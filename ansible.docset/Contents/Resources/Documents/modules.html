<!DOCTYPE html>
<!-- saved from url=(0050)http://www.ansibleworks.com/docs/modules.html#copy -->
<html dir="ltr" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Ansible Modules | AnsibleWorks</title>
<meta name="keywords" content="ansible, ansibleworks, datacenter automation, configuration management, automation, orchestration, it orchestration, ansible awx, ansibleworks awx, awx">
<meta name="description" content="AnsibleWorks is the company behind Ansible, the radically simple IT orchestration solution that simplifies the way IT departments manage systems, applications, and cloud infrastructure.">
<meta name="author" content="AnsibleWorks, Inc.">
<meta name="robots" content="follow, index">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="pingback" href="http://www.ansibleworks.com/xmlrpc.php">
 
<link rel="shortcut icon" href="http://www.ansibleworks.com/wp-content/themes/rachelbaker-bootstrapwp-Twitter-Bootstrap-for-WordPress-9bc2021/ico/favicon.ico">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://www.ansibleworks.com/wp-content/themes/rachelbaker-bootstrapwp-Twitter-Bootstrap-for-WordPress-9bc2021/ico/apple-touch-icon-144-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://www.ansibleworks.com/wp-content/themes/rachelbaker-bootstrapwp-Twitter-Bootstrap-for-WordPress-9bc2021/ico/apple-touch-icon-114-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://www.ansibleworks.com/wp-content/themes/rachelbaker-bootstrapwp-Twitter-Bootstrap-for-WordPress-9bc2021/ico/apple-touch-icon-72-precomposed.png">
<link rel="apple-touch-icon-precomposed" href="http://www.ansibleworks.com/wp-content/themes/rachelbaker-bootstrapwp-Twitter-Bootstrap-for-WordPress-9bc2021/ico/apple-touch-icon-57-precomposed.png">
<!--[if lt IE 9]>
<script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="alternate" type="application/rss+xml" title="AnsibleWorks » Feed" href="http://www.ansibleworks.com/feed/">
<link rel="alternate" type="application/rss+xml" title="AnsibleWorks » Comments Feed" href="http://www.ansibleworks.com/comments/feed/">
<link rel="stylesheet" id="cnss_css-css" href="./modules_files/cnss.css" type="text/css" media="all">
<link rel="stylesheet" id="bootstrapwp-css" href="./modules_files/bootstrapwp.css" type="text/css" media="all">
<link rel="stylesheet" id="prettify-css" href="./modules_files/prettify.css" type="text/css" media="all">
<link rel="stylesheet" id="font-awesome-styles-css" href="./modules_files/font-awesome.min.css" type="text/css" media="all">
<!--[if lte IE 7]>
<link rel='stylesheet' id='font-awesome-ie7-css'  href='http://www.ansibleworks.com/wp-content/plugins/font-awesome/assets/css/font-awesome-ie7.min.css?ver=3.2.1' type='text/css' media='all' />
<![endif]-->
<link rel="stylesheet" id="event-list_css-css" href="./modules_files/event-list.css" type="text/css" media="all">
<link rel="stylesheet" id="page-list-style-css" href="./modules_files/page-list.css" type="text/css" media="all">
<script type="text/javascript" async="" src="./modules_files/cse.js"></script><script type="text/javascript" async="" src="./modules_files/ga.js"></script><script type="text/javascript" src="./modules_files/jquery.js"></script>
<script type="text/javascript" src="./modules_files/cnss.js"></script>
<script type="text/javascript" src="./modules_files/jquery.cookie.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.ansibleworks.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.ansibleworks.com/wp-includes/wlwmanifest.xml">
<meta name="generator" content="WordPress 3.4.1">
<link rel="canonical" href="http://www.ansibleworks.com/docs/modules.html">
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-29861888-2']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
<style type="text/css">.recentcomments a{display:inline!important;padding:0!important;margin:0!important;}</style>
<script src="./modules_files/jsapi" type="text/javascript"></script><link type="text/css" href="./modules_files/default+en.css" rel="stylesheet"><link type="text/css" href="./modules_files/default.css" rel="stylesheet"><script type="text/javascript" src="./modules_files/default+en.I.js"></script><script type="text/javascript" src="./modules_files/search.I.js"></script><style type="text/css">
.gsc-control-cse {
font-family: Arial, sans-serif;
border-color: #FFFFFF;
background-color: #FFFFFF;
}
.gsc-control-cse .gsc-table-result {
font-family: Arial, sans-serif;
}
input.gsc-input, .gsc-input-box, .gsc-input-box-hover, .gsc-input-box-focus {
border-color: #FFFFFF;
}
input.gsc-search-button, input.gsc-search-button:hover, input.gsc-search-button:focus {
border-color: #666666;
background-color: #CECECE;
background-image: none;
filter: none;
}
.gsc-tabHeader.gsc-tabhInactive {
border-color: #E9E9E9;
background-color: #E9E9E9;
}
.gsc-tabHeader.gsc-tabhActive {
border-color: #FF9900;
border-bottom-color: #FFFFFF;
background-color: #FFFFFF;
}
.gsc-tabsArea {
border-color: #FF9900;
}
.gsc-webResult.gsc-result,
.gsc-results .gsc-imageResult {
border-color: #FFFFFF;
background-color: #FFFFFF;
}
.gsc-webResult.gsc-result:hover,
.gsc-imageResult:hover {
border-color: #FFFFFF;
background-color: #FFFFFF;
}
.gs-webResult.gs-result a.gs-title:link,
.gs-webResult.gs-result a.gs-title:link b,
.gs-imageResult a.gs-title:link,
.gs-imageResult a.gs-title:link b {
color: #0000CC;
}
.gs-webResult.gs-result a.gs-title:visited,
.gs-webResult.gs-result a.gs-title:visited b,
.gs-imageResult a.gs-title:visited,
.gs-imageResult a.gs-title:visited b {
color: #0000CC;
}
.gs-webResult.gs-result a.gs-title:hover,
.gs-webResult.gs-result a.gs-title:hover b,
.gs-imageResult a.gs-title:hover,
.gs-imageResult a.gs-title:hover b {
color: #0000CC;
}
.gs-webResult.gs-result a.gs-title:active,
.gs-webResult.gs-result a.gs-title:active b,
.gs-imageResult a.gs-title:active,
.gs-imageResult a.gs-title:active b {
color: #0000CC;
}
.gsc-cursor-page {
color: #0000CC;
}
a.gsc-trailing-more-results:link {
color: #0000CC;
}
.gs-webResult .gs-snippet,
.gs-imageResult .gs-snippet,
.gs-fileFormatType {
color: #000000;
}
.gs-webResult div.gs-visibleUrl,
.gs-imageResult div.gs-visibleUrl {
color: #008000;
}
.gs-webResult div.gs-visibleUrl-short {
color: #008000;
}
.gs-webResult div.gs-visibleUrl-short {
display: none;
}
.gs-webResult div.gs-visibleUrl-long {
display: block;
}
.gs-promotion div.gs-visibleUrl-short {
display: none;
}
.gs-promotion div.gs-visibleUrl-long {
display: block;
}
.gsc-cursor-box {
border-color: #FFFFFF;
}
.gsc-results .gsc-cursor-box .gsc-cursor-page {
border-color: #E9E9E9;
background-color: #FFFFFF;
color: #0000CC;
}
.gsc-results .gsc-cursor-box .gsc-cursor-current-page {
border-color: #FF9900;
background-color: #FFFFFF;
color: #0000CC;
}
.gsc-webResult.gsc-result.gsc-promotion {
border-color: #336699;
background-color: #FFFFFF;
}
.gsc-completion-title {
color: #0000CC;
}
.gsc-completion-snippet {
color: #000000;
}
.gs-promotion a.gs-title:link,
.gs-promotion a.gs-title:link *,
.gs-promotion .gs-snippet a:link {
color: #0000CC;
}
.gs-promotion a.gs-title:visited,
.gs-promotion a.gs-title:visited *,
.gs-promotion .gs-snippet a:visited {
color: #0000CC;
}
.gs-promotion a.gs-title:hover,
.gs-promotion a.gs-title:hover *,
.gs-promotion .gs-snippet a:hover {
color: #0000CC;
}
.gs-promotion a.gs-title:active,
.gs-promotion a.gs-title:active *,
.gs-promotion .gs-snippet a:active {
color: #0000CC;
}
.gs-promotion .gs-snippet,
.gs-promotion .gs-title .gs-promotion-title-right,
.gs-promotion .gs-title .gs-promotion-title-right * {
color: #000000;
}
.gs-promotion .gs-visibleUrl,
.gs-promotion .gs-visibleUrl-short {
color: #008000;
}
</style><script src="./modules_files/webfont.js" type="text/javascript" async=""></script><style type="text/css">.gscb_a{display:inline-block;font:27px/13px arial,sans-serif}.gsst_a .gscb_a{color:#a1b9ed;cursor:pointer}.gsst_a:hover .gscb_a,.gsst_a:focus .gscb_a{color:#36c}.gsst_a{display:inline-block}.gsst_a{cursor:pointer;padding:0 4px}.gsst_a:hover{text-decoration:none!important}.gsst_b{font-size:16px;padding:0 2px;position:relative;user-select:none;-webkit-user-select:none;white-space:nowrap}.gsst_e{opacity:0.55;}.gsst_a:hover .gsst_e,.gsst_a:focus .gsst_e{opacity:0.72;}.gsst_a:active .gsst_e{opacity:1;}.gsst_f{background:white;text-align:left}.gsst_g{background-color:white;border:1px solid #ccc;border-top-color:#d9d9d9;box-shadow:0 2px 4px rgba(0,0,0,0.2);-webkit-box-shadow:0 2px 4px rgba(0,0,0,0.2);margin:-1px -3px;padding:0 6px}.gsst_h{background-color:white;height:1px;margin-bottom:-1px;position:relative;top:-1px}.gsib_a{width:100%;padding:4px 6px 0}.gsib_a,.gsib_b{vertical-align:top}.gssb_c{border:0;position:absolute;z-index:989}.gssb_e{border:1px solid #ccc;border-top-color:#d9d9d9;box-shadow:0 2px 4px rgba(0,0,0,0.2);-webkit-box-shadow:0 2px 4px rgba(0,0,0,0.2);cursor:default}.gssb_f{visibility:hidden;white-space:nowrap}.gssb_k{border:0;display:block;position:absolute;top:0;z-index:988}.gsdd_a{border:none!important}.gscsep_a{display:none}.gsq_a{padding:0}.gssb_a{padding:0 7px}.gssb_a,.gssb_a td{white-space:nowrap;overflow:hidden;line-height:22px}#gssb_b{font-size:11px;color:#36c;text-decoration:none}#gssb_b:hover{font-size:11px;color:#36c;text-decoration:underline}.gssb_g{text-align:center;padding:8px 0 7px;position:relative}.gssb_h{font-size:15px;height:28px;margin:0.2em;-webkit-appearance:button}.gssb_i{background:#eee}.gss_ifl{visibility:hidden;padding-left:5px}.gssb_i .gss_ifl{visibility:visible}a.gssb_j{font-size:13px;color:#36c;text-decoration:none;line-height:100%}a.gssb_j:hover{text-decoration:underline}.gssb_l{height:1px;background-color:#e5e5e5}.gssb_m{color:#000;background:#fff}.gsfe_a{border:1px solid #b9b9b9;border-top-color:#a0a0a0;box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);-moz-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);-webkit-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.1);}.gsfe_b{border:1px solid #4d90fe;outline:none;box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);-moz-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);-webkit-box-shadow:inset 0px 1px 2px rgba(0,0,0,0.3);}.gssb_a{padding:0 9px}.gsib_a{padding-right:8px;padding-left:8px}.gsst_a{padding-top:3px}.gssb_e{border:0}.gssb_l{margin:5px 0}.gssb_c .gsc-completion-container{position:static}.gssb_c{z-index:5000}.gsc-completion-container table{background:transparent;font-size:inherit;font-family:inherit}.gssb_c > tbody > tr,.gssb_c > tbody > tr > td,.gssb_d,.gssb_d > tbody > tr,.gssb_d > tbody > tr > td,.gssb_e,.gssb_e > tbody > tr,.gssb_e > tbody > tr > td{padding:0;margin:0;border:0}.gssb_a table,.gssb_a table tr,.gssb_a table tr td{padding:0;margin:0;border:0}</style><style>[touch-action="none"]{ -ms-touch-action: none; touch-action: none; }[touch-action="pan-x"]{ -ms-touch-action: pan-x; touch-action: pan-x; }[touch-action="pan-y"]{ -ms-touch-action: pan-y; touch-action: pan-y; }[touch-action="scroll"],[touch-action="pan-x pan-y"],[touch-action="pan-y pan-x"]{ -ms-touch-action: pan-x pan-y; touch-action: pan-x pan-y; }</style></head>
<body class="single single--42 postid--42 single-author" data-spy="scroll" data-target=".bs-docs-sidebar" data-offset="10" data-ember-extension="1">
<div id="wrap">
<div class="navbar navbar-inverse navbar-relative-top">
<div class="navbar-inner">
<div class="container">
<div class="row">
<div class="socialicons">
<div class="textwidget"><a href="http://www.ansibleworks.com/pricing"><button class="btn btn-primary" type="button" style="width: 110px;">Pricing</button></a>
<span><a href="http://www.ansibleworks.com/whitepapers"><button class="btn btn-primary" type="button" style="width: 110px;">Whitepapers</button></a></span>
</div>
</div>
<a class="span5 brand" href="http://www.ansibleworks.com/" title="AnsibleWorks" rel="home">
<img src="./modules_files/logo.png">
</a>
</div>
<button type="button mobilebutton" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<div class="nav-collapse"><ul id="main-menu" class="nav"><li id="menu-item-386" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-386 dropdown"><a href="http://www.ansibleworks.com/docs/modules.html#" class="dropdown-toggle" data-toggle="dropdown">Technology<b class="caret"></b></a>
<ul class="dropdown-menu">
<li id="menu-item-486" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-486"><a href="http://www.ansibleworks.com/why-ansible/" class="">Why Ansible</a></li>
<li id="menu-item-485" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-485"><a href="http://www.ansibleworks.com/tech/" class="">How Ansible Works</a></li>
<li id="menu-item-1625" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1625"><a href="http://www.ansibleworks.com/ansibleworks-awx/" class="">AnsibleWorks AWX</a></li>
</ul>
</li>
<li id="menu-item-280" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-280 dropdown"><a href="http://www.ansibleworks.com/docs/modules.html#" class="dropdown-toggle" data-toggle="dropdown">Solutions<b class="caret"></b></a>
<ul class="dropdown-menu">
<li id="menu-item-484" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-484"><a href="http://www.ansibleworks.com/configuration-management/" class="">Configuration Management</a></li>
<li id="menu-item-478" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-478"><a href="http://www.ansibleworks.com/application-deployment/" class="">Application Deployment</a></li>
<li id="menu-item-483" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-483"><a href="http://www.ansibleworks.com/continuous-delivery/" class="">Continuous Delivery</a></li>
</ul>
</li>
<li id="menu-item-34" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-34 dropdown"><a href="http://www.ansibleworks.com/products" class="dropdown-toggle" data-toggle="dropdown">Products<b class="caret"></b></a>
<ul class="dropdown-menu">
<li id="menu-item-2089" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2089"><a href="http://www.ansibleworks.com/pricing/" class="">Pricing</a></li>
<li id="menu-item-1626" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1626"><a href="http://www.ansibleworks.com/ansibleworks-awx/" class="">AnsibleWorks AWX</a></li>
<li id="menu-item-491" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-491"><a href="http://www.ansibleworks.com/consulting/" class="">Ansible Consulting</a></li>
<li id="menu-item-492" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-492"><a href="http://www.ansibleworks.com/training/" class="">Ansible Training</a></li>
</ul>
</li>
<li id="menu-item-1451" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-ancestor current-menu-parent menu-item-1451 dropdown"><a href="http://www.ansibleworks.com/docs/" class="dropdown-toggle" data-toggle="dropdown">Documentation<b class="caret"></b></a>
<ul class="dropdown-menu">
<li id="menu-item-1555" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1555"><a href="http://www.ansibleworks.com/docs/" class="">Index</a></li>
<li id="menu-item-1558" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item menu-item-1558"><a href="http://www.ansibleworks.com/docs/modules.html" class="">Modules</a></li>
</ul>
</li>
<li id="menu-item-48" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-48 dropdown"><a class="dropdown-toggle" data-toggle="dropdown">Resources<b class="caret"></b></a>
<ul class="dropdown-menu">
<li id="menu-item-1233" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1233"><a href="http://www.ansibleworks.com/quickstart/" class="">Quick Start</a></li>
<li id="menu-item-58" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-58"><a href="http://www.ansibleworks.com/whitepapers/" class="">White Papers</a></li>
<li id="menu-item-876" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-876"><a href="http://www.ansibleworks.com/community/" class="">Community</a></li>
<li id="menu-item-164" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-164"><a href="http://www.ansibleworks.com/users/" class="">Users and Quotes</a></li>
<li id="menu-item-1768" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1768"><a href="http://www.ansibleworks.com/videos/" class="">Videos</a></li>
<li id="menu-item-1698" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1698"><a href="http://www.ansibleworks.com/fest/" class="">AnsibleFest</a></li>
</ul>
</li>
<li id="menu-item-51" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-51 dropdown"><a href="http://www.ansibleworks.com/docs/modules.html#" class="dropdown-toggle" data-toggle="dropdown">Company<b class="caret"></b></a>
<ul class="dropdown-menu">
<li id="menu-item-198" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-198"><a href="http://www.ansibleworks.com/team/" class="">Leadership Team</a></li>
<li id="menu-item-2697" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2697"><a href="http://www.ansibleworks.com/board/" class="">Board of Directors</a></li>
<li id="menu-item-994" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-994"><a href="http://www.ansibleworks.com/partners/" class="">Partners</a></li>
<li id="menu-item-299" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-299"><a href="http://blog.ansibleworks.com/" class="">Blogs</a></li>
<li id="menu-item-421" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-421"><a href="http://www.ansibleworks.com/careers/" class="">Careers</a></li>
<li id="menu-item-306" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-306"><a href="http://www.ansibleworks.com/contact-us/" class="">Contact Us</a></li>
</ul>
</li>
</ul></div> </div>
</div>
</div>
 
 
<div class="row">
<div class="container">
<ul class="breadcrumb"><li><a href="http://www.ansibleworks.com/">Home</a></li> <span class="divider">/</span> <li><a href="http://www.ansibleworks.com/docs/">Documentation Home</a></li> <span class="divider">/</span> <li class="active">Ansible Modules</li>
<script>
  (function() {
    var cx = '009400013633739293307:eu5pbnxp4po';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<li id="cse" style="border: solid #2773ae; width: 33%; float: right;"><div id="___gcse_0"><div class="gsc-control-cse gsc-control-cse-en"><div class="gsc-control-wrapper-cse" dir="ltr"><form class="gsc-search-box gsc-search-box-tools" accept-charset="utf-8"><table cellspacing="0" cellpadding="0" class="gsc-search-box"><tbody><tr><td class="gsc-input"><div class="gsc-input-box " id="gsc-iw-id1"><table cellspacing="0" cellpadding="0" id="gs_id50" class="gstl_50 " style="width: 100%; padding: 0px;"><tbody><tr><td id="gs_tti50" class="gsib_a"><input autocomplete="off" type="text" size="10" class="gsc-input" name="search" title="search" id="gsc-i-id1" style="width: 100%; padding: 0px; border: none; margin: -0.0625em 0px 0px; height: 1.25em; outline: none; background-image: url(http://www.google.com/cse/intl/en/images/google_custom_search_watermark.gif); background-color: rgb(255, 255, 255); background-position: 0% 50%; background-repeat: no-repeat no-repeat;" dir="ltr" spellcheck="false"></td><td class="gsib_b"><div class="gsst_b" id="gs_st50" dir="ltr"><a class="gsst_a" href="javascript:void(0)" style="display: none;"><span class="gscb_a" id="gs_cb50">×</span></a></div></td></tr></tbody></table></div></td><td class="gsc-search-button"><input type="image" src="./modules_files/search_box_icon.png" class="gsc-search-button gsc-search-button-v2" title="search"></td><td class="gsc-clear-button"><div class="gsc-clear-button" title="clear results">&nbsp;</div></td></tr></tbody></table><table cellspacing="0" cellpadding="0" class="gsc-branding"><tbody><tr><td class="gsc-branding-user-defined"></td><td class="gsc-branding-text"><div class="gsc-branding-text">powered by</div></td><td class="gsc-branding-img"><img src="./modules_files/small-logo.png" class="gsc-branding-img"></td></tr></tbody></table></form><div class="gsc-results-wrapper-overlay"><div class="gsc-results-close-btn" tabindex="0"></div><div class="gsc-tabsAreaInvisible"><div class="gsc-tabHeader gsc-inline-block gsc-tabhActive">Custom Search</div><span class="gs-spacer"> </span></div><div class="gsc-tabsAreaInvisible"></div><div class="gsc-above-wrapper-area-invisible"><table cellspacing="0" cellpadding="0" class="gsc-above-wrapper-area-container"><tbody><tr><td class="gsc-result-info-container"><div class="gsc-result-info-invisible"></div></td><td class="gsc-orderby-container"><div class="gsc-orderby-invisible"><div class="gsc-orderby-label gsc-inline-block">Sort by:</div><div class="gsc-option-menu-container gsc-inline-block"><div class="gsc-selected-option-container gsc-inline-block"><div class="gsc-selected-option">Relevance</div><div class="gsc-option-selector"></div></div><div class="gsc-option-menu-invisible"><div class="gsc-option-menu-item gsc-option-menu-item-highlighted"><div class="gsc-option">Relevance</div></div><div class="gsc-option-menu-item"><div class="gsc-option">Date</div></div></div></div></div></td></tr></tbody></table></div><div class="gsc-adBlockInvisible"></div><div class="gsc-wrapper"><div class="gsc-adBlockInvisible"></div><div class="gsc-resultsbox-invisible"><div class="gsc-resultsRoot gsc-tabData gsc-tabdActive"><table cellspacing="0" cellpadding="0" class="gsc-resultsHeader"><tbody><tr><td class="gsc-twiddleRegionCell"><div class="gsc-twiddle"><div class="gsc-title">Web</div></div><div class="gsc-stats"></div><div class="gsc-results-selector gsc-all-results-active"><div class="gsc-result-selector gsc-one-result" title="show one result">&nbsp;</div><div class="gsc-result-selector gsc-more-results" title="show more results">&nbsp;</div><div class="gsc-result-selector gsc-all-results" title="show all results">&nbsp;</div></div></td><td class="gsc-configLabelCell"></td></tr></tbody></table><div><div class="gsc-expansionArea"></div></div></div></div></div></div><div class="gsc-modal-background-image" tabindex="0"></div></div></div></div></li>
</ul> </div> 
</div> 
<div class="container doc-content">
<div class="row clear-both">
 
<div id="left-sidebar" class="span3 sidebar">
<div class="side-nav sidebar-block left-side-nav">
<ul><li><a href="http://www.ansibleworks.com/docs/"><strong>Documentation Home</strong></a></li></ul>
<ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#">Ansible Modules</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#introduction">Introduction</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#cloud">Cloud</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#cloudformation">cloudformation</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#digital-ocean">digital_ocean</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ec2">ec2</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ec2-ami">ec2_ami</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ec2-eip">ec2_eip</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ec2-elb">ec2_elb</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ec2-facts">ec2_facts</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ec2-group">ec2_group</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ec2-tag">ec2_tag</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ec2-vol">ec2_vol</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#glance-image">glance_image</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#keystone-user">keystone_user</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#linode">linode</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#nova-compute">nova_compute</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#nova-keypair">nova_keypair</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#quantum-floating-ip">quantum_floating_ip</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#quantum-floating-ip-associate">quantum_floating_ip_associate</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#quantum-network">quantum_network</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#quantum-router">quantum_router</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#quantum-router-gateway">quantum_router_gateway</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#quantum-router-interface">quantum_router_interface</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#quantum-subnet">quantum_subnet</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rax">rax</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rax-clb">rax_clb</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rds">rds</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#route53">route53</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#s3">s3</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#virt">virt</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#commands">Commands</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#command">command</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#raw">raw</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#script">script</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#shell">shell</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#database">Database</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#mongodb-user">mongodb_user</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#mysql-db">mysql_db</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#mysql-replication">mysql_replication</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#mysql-user">mysql_user</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#mysql-variables">mysql_variables</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#postgresql-db">postgresql_db</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#postgresql-privs">postgresql_privs</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#postgresql-user">postgresql_user</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#redis">redis</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#riak">riak</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#files">Files</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#assemble">assemble</a></li>
<li><a class="reference internal" href="./modules_files/modules.html">copy</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#fetch">fetch</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#file">file</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ini-file">ini_file</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#lineinfile">lineinfile</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#stat">stat</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#template">template</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#xattr">xattr</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#internal">Internal</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#async-status">async_status</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#inventory">Inventory</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#add-host">add_host</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#group-by">group_by</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#messaging">Messaging</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rabbitmq-parameter">rabbitmq_parameter</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rabbitmq-plugin">rabbitmq_plugin</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rabbitmq-user">rabbitmq_user</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rabbitmq-vhost">rabbitmq_vhost</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#monitoring">Monitoring</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#airbrake-deployment">airbrake_deployment</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#boundary-meter">boundary_meter</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#datadog-event">datadog_event</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#monit">monit</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#nagios">nagios</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#newrelic-deployment">newrelic_deployment</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#pagerduty">pagerduty</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#pingdom">pingdom</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#net-infrastructure">Net Infrastructure</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#arista-interface">arista_interface</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#arista-l2interface">arista_l2interface</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#arista-lag">arista_lag</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#arista-vlan">arista_vlan</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#bigip-pool">bigip_pool</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#dnsmadeeasy">dnsmadeeasy</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#netscaler">netscaler</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#network">Network</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#get-url">get_url</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#slurp">slurp</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#uri">uri</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#notification">Notification</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#campfire">campfire</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#flowdock">flowdock</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#hipchat">hipchat</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#irc">irc</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#jabber">jabber</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#mail">mail</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#mqtt">mqtt</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#osx-say">osx_say</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#packaging">Packaging</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#apt">apt</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#apt-key">apt_key</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#apt-repository">apt_repository</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#easy-install">easy_install</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#gem">gem</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#homebrew">homebrew</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#macports">macports</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#npm">npm</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#openbsd-pkg">openbsd_pkg</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#opkg">opkg</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#pacman">pacman</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#pip">pip</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#pkgin">pkgin</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#pkgng">pkgng</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#pkgutil">pkgutil</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#redhat-subscription">redhat_subscription</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rhn-channel">rhn_channel</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rhn-register">rhn_register</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rpm-key">rpm_key</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#svr4pkg">svr4pkg</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#yum">yum</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#zypper">zypper</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#source-control">Source Control</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#bzr">bzr</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#git">git</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#hg">hg</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#subversion">subversion</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#system">System</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#authorized-key">authorized_key</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#cron">cron</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#facter">facter</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#filesystem">filesystem</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#firewalld">firewalld</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#group">group</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#host">host</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#lvg">lvg</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#lvol">lvol</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#modprobe">modprobe</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#mount">mount</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ohai">ohai</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#open-iscsi">open_iscsi</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ping">ping</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#seboolean">seboolean</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#selinux">selinux</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#service">service</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#setup">setup</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#sysctl">sysctl</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#user">user</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#zfs">zfs</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#utilities">Utilities</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#accelerate">accelerate</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#debug">debug</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#fail">fail</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#fireball">fireball</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#pause">pause</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#set-fact">set_fact</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#wait-for">wait_for</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#web-infrastructure">Web Infrastructure</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#django-manage">django_manage</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#htpasswd">htpasswd</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#supervisorctl">supervisorctl</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#reading-module-documentation-locally">Reading Module Documentation Locally</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#writing-your-own-modules">Writing your own modules</a></li>
</ul>
</li>
</ul>
<hr>
<div class="qsButton pagination-centered">
<a href="http://www.ansibleworks.com/quickstart"><button class="btn btn-primary" type="button">Quick Start Video</button></a>
<hr><a href="http://www.ansibleworks.com/ansibleworks-awx/"><button class="btn btn-info">Get AnsibleWorks AWX</button></a><hr><a href="http://www.ansibleworks.com/fest/"><img src="./modules_files/AnsibleFest_200x400_banner.jpg" alt="AnsibleFest SF 2013"></a></div>
</div>
</div>
 
 
<div class="span8 main-column two-columns-left">
<div class="section" id="ansible-modules">
<h1><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id142">Ansible Modules</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#ansible-modules" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ansible-modules" id="id142">Ansible Modules</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#introduction" id="id143">Introduction</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#cloud" id="id144">Cloud</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#cloudformation" id="id145">cloudformation</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#digital-ocean" id="id146">digital_ocean</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ec2" id="id147">ec2</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ec2-ami" id="id148">ec2_ami</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ec2-eip" id="id149">ec2_eip</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ec2-elb" id="id150">ec2_elb</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ec2-facts" id="id151">ec2_facts</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ec2-group" id="id152">ec2_group</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ec2-tag" id="id153">ec2_tag</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ec2-vol" id="id154">ec2_vol</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#glance-image" id="id155">glance_image</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#keystone-user" id="id156">keystone_user</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#linode" id="id157">linode</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#nova-compute" id="id158">nova_compute</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#nova-keypair" id="id159">nova_keypair</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#quantum-floating-ip" id="id160">quantum_floating_ip</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#quantum-floating-ip-associate" id="id161">quantum_floating_ip_associate</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#quantum-network" id="id162">quantum_network</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#quantum-router" id="id163">quantum_router</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#quantum-router-gateway" id="id164">quantum_router_gateway</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#quantum-router-interface" id="id165">quantum_router_interface</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#quantum-subnet" id="id166">quantum_subnet</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rax" id="id167">rax</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rax-clb" id="id168">rax_clb</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rds" id="id169">rds</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#route53" id="id170">route53</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#s3" id="id171">s3</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#virt" id="id172">virt</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#commands" id="id173">Commands</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#command" id="id174">command</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#raw" id="id175">raw</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#script" id="id176">script</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#shell" id="id177">shell</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#database" id="id178">Database</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#mongodb-user" id="id179">mongodb_user</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#mysql-db" id="id180">mysql_db</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#mysql-replication" id="id181">mysql_replication</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#mysql-user" id="id182">mysql_user</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#mysql-variables" id="id183">mysql_variables</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#postgresql-db" id="id184">postgresql_db</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#postgresql-privs" id="id185">postgresql_privs</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#postgresql-user" id="id186">postgresql_user</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#redis" id="id187">redis</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#riak" id="id188">riak</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#files" id="id189">Files</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#assemble" id="id190">assemble</a></li>
<li><a class="reference internal" href="./modules_files/modules.html" id="id191">copy</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#fetch" id="id192">fetch</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#file" id="id193">file</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ini-file" id="id194">ini_file</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#lineinfile" id="id195">lineinfile</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#stat" id="id196">stat</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#template" id="id197">template</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#xattr" id="id198">xattr</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#internal" id="id199">Internal</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#async-status" id="id200">async_status</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#inventory" id="id201">Inventory</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#add-host" id="id202">add_host</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#group-by" id="id203">group_by</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#messaging" id="id204">Messaging</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rabbitmq-parameter" id="id205">rabbitmq_parameter</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rabbitmq-plugin" id="id206">rabbitmq_plugin</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rabbitmq-user" id="id207">rabbitmq_user</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rabbitmq-vhost" id="id208">rabbitmq_vhost</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#monitoring" id="id209">Monitoring</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#airbrake-deployment" id="id210">airbrake_deployment</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#boundary-meter" id="id211">boundary_meter</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#datadog-event" id="id212">datadog_event</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#monit" id="id213">monit</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#nagios" id="id214">nagios</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#newrelic-deployment" id="id215">newrelic_deployment</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#pagerduty" id="id216">pagerduty</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#pingdom" id="id217">pingdom</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#net-infrastructure" id="id218">Net Infrastructure</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#arista-interface" id="id219">arista_interface</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#arista-l2interface" id="id220">arista_l2interface</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#arista-lag" id="id221">arista_lag</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#arista-vlan" id="id222">arista_vlan</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#bigip-pool" id="id223">bigip_pool</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#dnsmadeeasy" id="id224">dnsmadeeasy</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#netscaler" id="id225">netscaler</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#network" id="id226">Network</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#get-url" id="id227">get_url</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#slurp" id="id228">slurp</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#uri" id="id229">uri</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#notification" id="id230">Notification</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#campfire" id="id231">campfire</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#flowdock" id="id232">flowdock</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#hipchat" id="id233">hipchat</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#irc" id="id234">irc</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#jabber" id="id235">jabber</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#mail" id="id236">mail</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#mqtt" id="id237">mqtt</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#osx-say" id="id238">osx_say</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#packaging" id="id239">Packaging</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#apt" id="id240">apt</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#apt-key" id="id241">apt_key</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#apt-repository" id="id242">apt_repository</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#easy-install" id="id243">easy_install</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#gem" id="id244">gem</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#homebrew" id="id245">homebrew</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#macports" id="id246">macports</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#npm" id="id247">npm</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#openbsd-pkg" id="id248">openbsd_pkg</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#opkg" id="id249">opkg</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#pacman" id="id250">pacman</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#pip" id="id251">pip</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#pkgin" id="id252">pkgin</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#pkgng" id="id253">pkgng</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#pkgutil" id="id254">pkgutil</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#redhat-subscription" id="id255">redhat_subscription</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rhn-channel" id="id256">rhn_channel</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rhn-register" id="id257">rhn_register</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#rpm-key" id="id258">rpm_key</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#svr4pkg" id="id259">svr4pkg</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#yum" id="id260">yum</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#zypper" id="id261">zypper</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#source-control" id="id262">Source Control</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#bzr" id="id263">bzr</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#git" id="id264">git</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#hg" id="id265">hg</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#subversion" id="id266">subversion</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#system" id="id267">System</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#authorized-key" id="id268">authorized_key</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#cron" id="id269">cron</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#facter" id="id270">facter</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#filesystem" id="id271">filesystem</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#firewalld" id="id272">firewalld</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#group" id="id273">group</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#host" id="id274">host</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#lvg" id="id275">lvg</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#lvol" id="id276">lvol</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#modprobe" id="id277">modprobe</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#mount" id="id278">mount</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ohai" id="id279">ohai</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#open-iscsi" id="id280">open_iscsi</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#ping" id="id281">ping</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#seboolean" id="id282">seboolean</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#selinux" id="id283">selinux</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#service" id="id284">service</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#setup" id="id285">setup</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#sysctl" id="id286">sysctl</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#user" id="id287">user</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#zfs" id="id288">zfs</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#utilities" id="id289">Utilities</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#accelerate" id="id290">accelerate</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#debug" id="id291">debug</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#fail" id="id292">fail</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#fireball" id="id293">fireball</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#pause" id="id294">pause</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#set-fact" id="id295">set_fact</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#wait-for" id="id296">wait_for</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#web-infrastructure" id="id297">Web Infrastructure</a><ul>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#django-manage" id="id298">django_manage</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#htpasswd" id="id299">htpasswd</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#supervisorctl" id="id300">supervisorctl</a></li>
</ul>
</li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#reading-module-documentation-locally" id="id301">Reading Module Documentation Locally</a></li>
<li><a class="reference internal" href="http://www.ansibleworks.com/docs/modules.html#writing-your-own-modules" id="id302">Writing your own modules</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<span id="modules-intro"></span><h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id143">Introduction</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#introduction" title="Permalink to this headline">¶</a></h2>
<p>Ansible ships with a number of modules (called the ‘module library’)
that can be executed directly on remote hosts or through <a class="reference internal" href="http://www.ansibleworks.com/docs/playbooks.html"><em>Intro to Playbooks</em></a>.
Users can also write their own modules. These modules can control system
resources, like services, packages, or files (anything really), or
handle executing system commands.</p>
<p>Let’s review how we execute three different modules from the command line:</p>
<div class="highlight-python"><pre>ansible webservers -m service -a "name=httpd state=running"
ansible webservers -m ping
ansible webservers -m command -a "/sbin/reboot -t now"</pre>
</div>
<p>Each module supports taking arguments. Nearly all modules take <tt class="docutils literal"><span class="pre">key=value</span></tt>
arguments, space delimited. Some modules take no arguments, and the
command/shell modules simply take the string of the command you want to run.</p>
<p>From playbooks, Ansible modules are executed in a very similar way:</p>
<div class="highlight-python"><pre>- name: reboot the servers
  action: command /sbin/reboot -t now</pre>
</div>
<p>Version 0.8 and higher support the following shorter syntax:</p>
<div class="highlight-python"><pre>- name: reboot the servers
  command: /sbin/reboot -t now</pre>
</div>
<p>All modules technically return JSON format data, though if you are using the
command line or playbooks, you don’t really need to know much about
that. If you’re writing your own module, you care, and this means you do
not have to write modules in any particular language – you get to choose.</p>
<p>Modules are <cite>idempotent</cite>, meaning they will seek to avoid changes to the system unless a change needs to be made. When using Ansible
playbooks, these modules can trigger ‘change events’ in the form of notifying ‘handlers’
to run additional tasks.</p>
<p>Documention for each module can be accessed from the command line with the
ansible-doc as well as the man command:</p>
<div class="highlight-python"><pre>ansible-doc command

man ansible.template</pre>
</div>
<p>Let’s see what’s available in the Ansible module library, out of the box:</p>
</div>
<div class="section" id="cloud">
<h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id144">Cloud</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#cloud" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cloudformation">
<span id="id1"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id145">cloudformation</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#cloudformation" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>Launches an AWS CloudFormation stack and waits for it complete.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>disable_rollback</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>If a stacks fails to form, rollback will remove the stack</td>
</tr>
<tr>
<td>region</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The AWS region to use. If not specified then the value of the EC2_REGION environment variable, if any, is used.</td>
</tr>
<tr>
<td>stack_name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>name of the cloudformation stack</td>
</tr>
<tr>
<td>state</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>If state is "present", stack will be created. If state is "present" and if stack exists and template has changed, it will be updated. If state is absent, stack will be removed.</td>
</tr>
<tr>
<td>template</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>the path of the cloudformation template</td>
</tr>
<tr>
<td>template_parameters</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>a list of hashes of all the template variables for the stack</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
boto
</p><br><pre># Basic task example
tasks:
- name: launch ansible cloudformation example
  action: cloudformation &gt;
    stack_name="ansible-cloudformation" state=present
    region=us-east-1 disable_rollback=yes
    template=files/cloudformation-example.json
  args:
    template_parameters:
      KeyName: jmartin
      DiskType: ephemeral
      InstanceType: m1.small
      ClusterSize: 3
</pre></div>
<div class="section" id="digital-ocean">
<span id="id2"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id146">digital_ocean</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#digital-ocean" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.3.</span></p>
</div>
<p>Create/delete a droplet in DigitalOcean and optionally waits for it to be ‘running’, or deploy an SSH key.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>api_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Digital Ocean api key.</td>
</tr>
<tr>
<td>client_id</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Digital Ocean manager id.</td>
</tr>
<tr>
<td>command</td>
<td>no</td>
<td>droplet</td>
<td><ul><li>droplet</li><li>ssh</li></ul></td>
<td>Which target you want to operate on.</td>
</tr>
<tr>
<td>id</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Numeric, the droplet id you want to operate on.</td>
</tr>
<tr>
<td>image_id</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Numeric, this is the id of the image you would like the droplet created with.</td>
</tr>
<tr>
<td>name</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>String, this is the name of the droplet - must be formatted by hostname rules, or the name of a SSH key.</td>
</tr>
<tr>
<td>region_id</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Numeric, this is the id of the region you would like your server</td>
</tr>
<tr>
<td>size_id</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Numeric, this is the id of the size you would like the droplet created at.</td>
</tr>
<tr>
<td>ssh_key_ids</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Optional, comma separated list of ssh_key_ids that you would like to be added to the server</td>
</tr>
<tr>
<td>ssh_pub_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The public SSH key you want to add to your account.</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>active</li><li>absent</li><li>deleted</li></ul></td>
<td>Indicate desired state of the target.</td>
</tr>
<tr>
<td>unique_name</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Bool, require unique hostnames. By default, digital ocean allows multiple hosts with the same name. Setting this to "yes" allows only one host per name. Useful for idempotence. (added in Ansible 1.4)</td>
</tr>
<tr>
<td>wait</td>
<td>no</td>
<td>yes</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Wait for the droplet to be in state 'running' before returning. If wait is "no" an ip_address may not be returned.</td>
</tr>
<tr>
<td>wait_timeout</td>
<td>no</td>
<td>300</td>
<td><ul></ul></td>
<td>How long before wait gives up, in seconds.</td>
</tr>
</tbody></table><br><pre># Ensure a SSH key is present
# If a key matches this name, will return the ssh key id and changed = False
# If no existing key matches this name, a new key is created, the ssh key id is returned and changed = False

- digital_ocean: &gt;
      state=present
      command=ssh
      name=my_ssh_key
      ssh_pub_key='ssh-rsa AAAA...'
      client_id=XXX
      api_key=XXX

# Create a new Droplet
# Will return the droplet details including the droplet id (used for idempotence)

- digital_ocean: &gt;
      state=present
      command=droplet
      name=my_new_droplet
      client_id=XXX
      api_key=XXX
      size_id=1
      region_id=2
      image_id=3
      wait_timeout=500
  register: my_droplet
- debug: msg="ID is {{ my_droplet.droplet.id }}"
- debug: msg="IP is {{ my_droplet.droplet.ip_address }}"

# Ensure a droplet is present
# If droplet id already exist, will return the droplet details and changed = False
# If no droplet matches the id, a new droplet will be created and the droplet details (including the new id) are returned, changed = True.

- digital_ocean: &gt;
      state=present
      command=droplet
      id=123
      name=my_new_droplet
      client_id=XXX
      api_key=XXX
      size_id=1
      region_id=2
      image_id=3
      wait_timeout=500

# Create a droplet with ssh key
# The ssh key id can be passed as argument at the creation of a droplet (see ssh_key_ids).
# Several keys can be added to ssh_key_ids as id1,id2,id3
# The keys are used to connect as root to the droplet.

- digital_ocean: &gt;
      state=present
      ssh_key_ids=id1,id2
      name=my_new_droplet
      client_id=XXX
      api_key=XXX
      size_id=1
      region_id=2
      image_id=3
</pre><h4>Notes</h4>
<p>Two environment variables can be used, DO_CLIENT_ID and DO_API_KEY.</p></div>
<div class="section" id="ec2">
<span id="id3"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id147">ec2</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#ec2" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.9.</span></p>
</div>
<p>Creates or terminates ec2 instances. When created optionally waits for it to be ‘running’. This module has a dependency on python-boto &gt;= 2.5</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>aws_access_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>AWS access key. If not set then the value of the AWS_ACCESS_KEY environment variable is used.</td>
</tr>
<tr>
<td>aws_secret_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>AWS secret key. If not set then the value of the AWS_SECRET_KEY environment variable is used.</td>
</tr>
<tr>
<td>count</td>
<td>no</td>
<td>1</td>
<td><ul></ul></td>
<td>number of instances to launch</td>
</tr>
<tr>
<td>ec2_url</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Url to use to connect to EC2 or your Eucalyptus cloud (by default the module will use EC2 endpoints). Must be specified if region is not used. If not set then the value of the EC2_URL environment variable, if any, is used</td>
</tr>
<tr>
<td>group</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>security group (or list of groups) to use with the instance</td>
</tr>
<tr>
<td>group_id</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>security group id (or list of ids) to use with the instance (added in Ansible 1.1)</td>
</tr>
<tr>
<td>id</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>identifier for this instance or set of instances, so that the module will be idempotent with respect to EC2 instances. This identifier is valid for at least 24 hours after the termination of the instance, and should not be reused for another call later on. For details, see the description of client token at <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Run_Instance_Idempotency.html">http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Run_Instance_Idempotency.html</a>.</td>
</tr>
<tr>
<td>image</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td><em>emi</em> (or <em>ami</em>) to use for the instance</td>
</tr>
<tr>
<td>instance_ids</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>list of instance ids, currently only used when state='absent' (added in Ansible 1.3)</td>
</tr>
<tr>
<td>instance_profile_name</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Name of the IAM instance profile to use. Boto library must be 2.5.0+ (added in Ansible 1.3)</td>
</tr>
<tr>
<td>instance_tags</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>a hash/dictionary of tags to add to the new instance; '{"key":"value"}' and '{"key":"value","key":"value"}' (added in Ansible 1.0)</td>
</tr>
<tr>
<td>instance_type</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>instance type to use for the instance</td>
</tr>
<tr>
<td>kernel</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>kernel <em>eki</em> to use for the instance</td>
</tr>
<tr>
<td>key_name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>key pair to use on the instance</td>
</tr>
<tr>
<td>monitoring</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>enable detailed monitoring (CloudWatch) for instance (added in Ansible 1.1)</td>
</tr>
<tr>
<td>placement_group</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>placement group for the instance when using EC2 Clustered Compute (added in Ansible 1.3)</td>
</tr>
<tr>
<td>private_ip</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>the private ip address to assign the instance (from the vpc subnet) (added in Ansible 1.2)</td>
</tr>
<tr>
<td>ramdisk</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>ramdisk <em>eri</em> to use for the instance</td>
</tr>
<tr>
<td>region</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The AWS region to use. Must be specified if ec2_url is not used. If not specified then the value of the EC2_REGION environment variable, if any, is used. (added in Ansible 1.2)</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul></ul></td>
<td>create or terminate instances (added in Ansible 1.3)</td>
</tr>
<tr>
<td>user_data</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>opaque blob of data which is made available to the ec2 instance (added in Ansible 0.9)</td>
</tr>
<tr>
<td>vpc_subnet_id</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>the subnet ID in which to launch the instance (VPC) (added in Ansible 1.1)</td>
</tr>
<tr>
<td>wait</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>wait for the instance to be in state 'running' before returning</td>
</tr>
<tr>
<td>wait_timeout</td>
<td>no</td>
<td>300</td>
<td><ul></ul></td>
<td>how long before wait gives up, in seconds</td>
</tr>
<tr>
<td>zone</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>AWS availability zone in which to launch the instance (added in Ansible 1.2)</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
boto
</p><br><pre># Note: None of these examples set aws_access_key, aws_secret_key, or region.
# It is assumed that their matching environment variables are set.

# Basic provisioning example
- local_action:
    module: ec2
    keypair: mykey
    instance_type: c1.medium
    image: emi-40603AD1
    wait: yes
    group: webserver
    count: 3

# Advanced example with tagging and CloudWatch
- local_action:
    module: ec2
    keypair: mykey
    group: databases
    instance_type: m1.large
    image: ami-6e649707
    wait: yes
    wait_timeout: 500
    count: 5
    instance_tags: '{"db":"postgres"}'
    monitoring=yes

# Multiple groups example
local_action:
    module: ec2
    keypair: mykey
    group: ['databases', 'internal-services', 'sshable', 'and-so-forth']
    instance_type: m1.large
    image: ami-6e649707
    wait: yes
    wait_timeout: 500
    count: 5
    instance_tags: '{"db":"postgres"}'
    monitoring=yes

# VPC example
- local_action:
    module: ec2
    keypair: mykey
    group_id: sg-1dc53f72
    instance_type: m1.small
    image: ami-6e649707
    wait: yes
    vpc_subnet_id: subnet-29e63245


# Launch instances, runs some tasks
# and then terminate them


- name: Create a sandbox instance
  hosts: localhost
  gather_facts: False
  vars:
    keypair: my_keypair
    instance_type: m1.small
    security_group: my_securitygroup
    image: my_ami_id
    region: us-east-1
  tasks:
    - name: Launch instance
      local_action: ec2 keypair={{ keypair }} group={{ security_group }} instance_type={{ instance_type }} image={{ image }} wait=true region={{ region }}
      register: ec2
    - name: Add new instance to host group
      local_action: add_host hostname={{ item.public_ip }} groupname=launched
      with_items: ec2.instances
    - name: Wait for SSH to come up
      local_action: wait_for host={{ item.public_dns_name }} port=22 delay=60 timeout=320 state=started
      with_items: ec2.instances

- name: Configure instance(s)
  hosts: launched
  sudo: True
  gather_facts: True
  roles:
    - my_awesome_role
    - my_awesome_test

- name: Terminate instances
  hosts: localhost
  connection: local
  tasks:
    - name: Terminate instances that were previously launched
      local_action:
        module: ec2
        state: 'absent'
        instance_ids: {{ec2.instance_ids}}

</pre></div>
<div class="section" id="ec2-ami">
<span id="id4"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id148">ec2_ami</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#ec2-ami" title="Permalink to this headline">¶</a></h3>
<p>Creates or deletes ec2 images. This module has a dependency on python-boto &gt;= 2.5</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>aws_access_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>AWS access key. If not set then the value of the AWS_ACCESS_KEY environment variable is used.</td>
</tr>
<tr>
<td>aws_secret_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>AWS secret key. If not set then the value of the AWS_SECRET_KEY environment variable is used.</td>
</tr>
<tr>
<td>delete_snapshot</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Whether or not to deleted an AMI while deregistering it.</td>
</tr>
<tr>
<td>description</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>An optional human-readable string describing the contents and purpose of the AMI.</td>
</tr>
<tr>
<td>ec2_url</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Url to use to connect to EC2 or your Eucalyptus cloud (by default the module will use EC2 endpoints). Must be specified if region is not used. If not set then the value of the EC2_URL environment variable, if any, is used</td>
</tr>
<tr>
<td>image_id</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Image ID to be deregistered.</td>
</tr>
<tr>
<td>instance_id</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>instance id of the image to create</td>
</tr>
<tr>
<td>name</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The name of the new image to create</td>
</tr>
<tr>
<td>no_reboot</td>
<td>no</td>
<td></td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>An optional flag indicating that the bundling process should not attempt to shutdown the instance before bundling. If this flag is True, the responsibility of maintaining file system integrity is left to the owner of the instance.</td>
</tr>
<tr>
<td>region</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The AWS region to use. Must be specified if ec2_url is not used. If not specified then the value of the EC2_REGION environment variable, if any, is used.</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul></ul></td>
<td>create or deregister/delete image</td>
</tr>
<tr>
<td>wait</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>wait for the AMI to be in state 'available' before returning.</td>
</tr>
<tr>
<td>wait_timeout</td>
<td>no</td>
<td>300</td>
<td><ul></ul></td>
<td>how long before wait gives up, in seconds</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
boto
</p><br><pre># Basic AMI Creation
- local_action:
    module: ec2_ami
    aws_access_key: xxxxxxxxxxxxxxxxxxxxxxx
    aws_secret_key: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    instance_id: i-xxxxxx
    wait: yes
    name: newtest
  register: instance

# Basic AMI Creation, without waiting
- local_action:
    module: ec2_ami
    aws_access_key: xxxxxxxxxxxxxxxxxxxxxxx
    aws_secret_key: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    region: xxxxxx
    instance_id: i-xxxxxx
    wait: no
    name: newtest
  register: instance

# Deregister/Delete AMI
- local_action:
    module: ec2_ami
    aws_access_key: xxxxxxxxxxxxxxxxxxxxxxx
    aws_secret_key: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    region: xxxxxx
    image_id: ${instance.image_id}
    delete_snapshot: True
    state: absent

# Deregister AMI
- local_action:
    module: ec2_ami
    aws_access_key: xxxxxxxxxxxxxxxxxxxxxxx
    aws_secret_key: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    region: xxxxxx
    image_id: ${instance.image_id}
    delete_snapshot: False
    state: absent

</pre></div>
<div class="section" id="ec2-eip">
<span id="id5"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id149">ec2_eip</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#ec2-eip" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.4.</span></p>
</div>
<p>This module associates AWS EC2 elastic IP addresses with instances</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>ec2_access_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>EC2 access key. If not specified then the EC2_ACCESS_KEY environment variable is used.</td>
</tr>
<tr>
<td>ec2_secret_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>EC2 secret key. If not specified then the EC2_SECRET_KEY environment variable is used.</td>
</tr>
<tr>
<td>ec2_url</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>URL to use to connect to EC2-compatible cloud (by default the module will use EC2 endpoints)</td>
</tr>
<tr>
<td>instance_id</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The EC2 instance id</td>
</tr>
<tr>
<td>public_ip</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The elastic IP address to associate with the instance.If absent, allocate a new address</td>
</tr>
<tr>
<td>region</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>the EC2 region to use</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>If present, associate the IP with the instance.If absent, disassociate the IP with the instance.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
boto
</p><br><pre>- name: associate an elastic IP with an instance
  ec2_eip: instance_id=i-1212f003 ip=93.184.216.119

- name: disassociate an elastic IP from an instance
  ec2_eip: instance_id=i-1212f003 ip=93.184.216.119 state=absent

- name: allocate a new elastic IP and associate it with an instance
  ec2_eip: instance_id=i-1212f003

- name: allocate a new elastic IP without associating it to anything
  ec2_eip:
  register: eip
- name: output the IP
  debug: msg="Allocated IP is {{ eip.public_ip }}"

- name: provision new instances with ec2
  ec2: keypair=mykey instance_type=c1.medium image=emi-40603AD1 wait=yes group=webserver count=3
  register: ec2
- name: associate new elastic IPs with each of the instances
  ec2_eip: "instance_id={{ item }}"
  with_items: ec2.instance_ids

</pre><h4>Notes</h4>
<p>This module will return <code>public_ip</code> on success, which will contain the public IP address associated with the instance.</p>
<p>There may be a delay between the time the Elastic IP is assigned and when the cloud instance is reachable via the new address. Use wait_for and pause to delay further playbook execution until the instance is reachable, if necessary.</p></div>
<div class="section" id="ec2-elb">
<span id="id6"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id150">ec2_elb</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#ec2-elb" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>This module de-registers or registers an AWS EC2 instance from the EL**s** that it belongs to.
Returns fact “ec2_elbs” which is a list of elbs attached to the instance if state=absent is passed as an argument.
Will be marked changed when called only if there are ELBs found to operate on.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>aws_access_key</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>AWS access key. If not set then the value of the AWS_ACCESS_KEY environment variable is used.</td>
</tr>
<tr>
<td>aws_secret_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>AWS secret key. If not set then the value of the AWS_SECRET_KEY environment variable is used.</td>
</tr>
<tr>
<td>ec2_elbs</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>List of ELB names, required for registration. The ec2_elbs fact should be used if there was a previous de-register.</td>
</tr>
<tr>
<td>instance_id</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>EC2 Instance ID</td>
</tr>
<tr>
<td>region</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The AWS region to use. If not specified then the value of the EC2_REGION environment variable, if any, is used.</td>
</tr>
<tr>
<td>state</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>register or deregister the instance</td>
</tr>
<tr>
<td>wait</td>
<td>no</td>
<td>True</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Wait for instance registration or deregistration to complete successfully before returning.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
boto
</p><br><pre># basic pre_task and post_task example
pre_tasks:
  - name: Gathering ec2 facts
    ec2_facts:
  - name: Instance De-register
    local_action: ec2_elb
    args:
      instance_id: "{{ ansible_ec2_instance_id }}"
      state: 'absent'
roles:
  - myrole
post_tasks:
  - name: Instance Register
    local_action: ec2_elb
    args:
      instance_id: "{{ ansible_ec2_instance_id }}"
      ec2_elbs: "{{ item }}"
      state: 'present'
    with_items: ec2_elbs
</pre></div>
<div class="section" id="ec2-facts">
<span id="id7"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id151">ec2_facts</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#ec2-facts" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.0.</span></p>
</div>
<p>This module fetches data from the metadata servers in ec2 (aws). Eucalyptus cloud provides a similar service and this module should work this cloud provider as well.</p>
<br><pre># Conditional example
- name: Gather facts
  action: ec2_facts

- name: Conditional
  action: debug msg="This instance is a t1.micro"
  when: ansible_ec2_instance_type == "t1.micro"
</pre><h4>Notes</h4>
<p>Parameters to filter on ec2_facts may be added later.</p></div>
<div class="section" id="ec2-group">
<span id="id8"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id152">ec2_group</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#ec2-group" title="Permalink to this headline">¶</a></h3>
<p>maintains ec2 security groups. This module has a dependency on python-boto &gt;= 2.5</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>description</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Description of the security group.</td>
</tr>
<tr>
<td>ec2_access_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>EC2 access key</td>
</tr>
<tr>
<td>ec2_secret_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>EC2 secret key</td>
</tr>
<tr>
<td>ec2_url</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Url to use to connect to EC2 or your Eucalyptus cloud (by default the module will use EC2 endpoints)</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Name of the security group.</td>
</tr>
<tr>
<td>region</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>the EC2 region to use</td>
</tr>
<tr>
<td>rules</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>List of firewall rules to enforce in this group (see example).</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul></ul></td>
<td>create or delete security group (added in Ansible 1.4)</td>
</tr>
<tr>
<td>vpc_id</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>ID of the VPC to create the group in.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
boto
</p><br><pre>- name: example ec2 group
  local_action:
    module: ec2_group
    name: example
    description: an example EC2 group
    vpc_id: 12345
    region: eu-west-1a
    ec2_secret_key: SECRET
    ec2_access_key: ACCESS
    rules:
      - proto: tcp
        from_port: 80
        to_port: 80
        cidr_ip: 0.0.0.0/0
      - proto: tcp
        from_port: 22
        to_port: 22
        cidr_ip: 10.0.0.0/8
      - proto: udp
        from_port: 10050
        to_port: 10050
        cidr_ip: 10.0.0.0/8
      - proto: udp
        from_port: 10051
        to_port: 10051
        group_id: abcdef
</pre></div>
<div class="section" id="ec2-tag">
<span id="id9"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id153">ec2_tag</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#ec2-tag" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.3.</span></p>
</div>
<p>Creates and removes tags from any EC2 resource. The resource is referenced by its resource id (e.g. an instance being i-XXXXXXX). It is designed to be used with complex args (tags), see the examples. This module has a dependency on python-boto.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>aws_access_key</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>AWS access key. If not set then the value of the AWS_ACCESS_KEY environment variable is used.</td>
</tr>
<tr>
<td>aws_secret_key</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>AWS secret key. If not set then the value of the AWS_SECRET_KEY environment variable is used.</td>
</tr>
<tr>
<td>ec2_url</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Url to use to connect to EC2 or your Eucalyptus cloud (by default the module will use EC2 endpoints). Must be specified if region is not used. If not set then the value of the EC2_URL environment variable, if any, is used.</td>
</tr>
<tr>
<td>region</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>region in which the resource exists.</td>
</tr>
<tr>
<td>resource</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The EC2 resource id.</td>
</tr>
<tr>
<td>state</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Whether the tags should be present or absent on the resource.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
boto
</p><br><pre># Basic example of adding tag(s)
tasks:
- name: tag a resource
  local_action: ec2_tag resource=vol-XXXXXX region=eu-west-1 state=present
  args:
    tags:
      Name: ubervol
      env: prod

# Playbook example of adding tag(s) to spawned instances
tasks:
- name: launch some instances
  local_action: ec2 keypair={{ keypair }} group={{ security_group }} instance_type={{ instance_type }} image={{ image_id }} wait=true region=eu-west-1
  register: ec2

- name: tag my launched instances
  local_action: ec2_tag resource={{ item.id }} region=eu-west-1 state=present
  with_items: ec2.instances
  args:
    tags:
      Name: webserver
      env: prod
</pre></div>
<div class="section" id="ec2-vol">
<span id="id10"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id154">ec2_vol</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#ec2-vol" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>creates an EBS volume and optionally attaches it to an instance. If both an instance ID and a device name is given and the instance has a device at the device name, then no volume is created and no attachment is made. This module has a dependency on python-boto.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>aws_access_key</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>AWS access key. If not set then the value of the AWS_ACCESS_KEY environment variable is used.</td>
</tr>
<tr>
<td>aws_secret_key</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>AWS secret key. If not set then the value of the AWS_SECRET_KEY environment variable is used.</td>
</tr>
<tr>
<td>device_name</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>device id to override device mapping. Assumes /dev/sdf for Linux/UNIX and /dev/xvdf for Windows.</td>
</tr>
<tr>
<td>ec2_url</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Url to use to connect to EC2 or your Eucalyptus cloud (by default the module will use EC2 endpoints). Must be specified if region is not used. If not set then the value of the EC2_URL environment variable, if any, is used</td>
</tr>
<tr>
<td>instance</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>instance ID if you wish to attach the volume.</td>
</tr>
<tr>
<td>iops</td>
<td>no</td>
<td>100</td>
<td><ul></ul></td>
<td>the provisioned IOPs you want to associate with this volume (integer). (added in Ansible 1.3)</td>
</tr>
<tr>
<td>region</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The AWS region to use. If not specified then the value of the EC2_REGION environment variable, if any, is used.</td>
</tr>
<tr>
<td>volume_size</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>size of volume (in GB) to create.</td>
</tr>
<tr>
<td>zone</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>zone in which to create the volume, if unset uses the zone the instance is in (if set)</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
boto
</p><br><pre># Simple attachment action
- local_action:
    module: ec2_vol
    instance: XXXXXX
    volume_size: 5
    device_name: sdd

# Example using custom iops params
- local_action:
    module: ec2_vol
    instance: XXXXXX
    volume_size: 5
    iops: 200
    device_name: sdd

# Playbook example combined with instance launch
- local_action:
    module: ec2
    keypair: "{{ keypair }}"
    image: "{{ image }}"
    wait: yes
    count: 3
    register: ec2
- local_action:
    module: ec2_vol
    instance: "{{ item.id }} "
    volume_size: 5
    with_items: ec2.instances
    register: ec2_vol
</pre></div>
<div class="section" id="glance-image">
<span id="id11"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id155">glance_image</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#glance-image" title="Permalink to this headline">¶</a></h3>
<p>Add or Remove images from the glance repository.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>auth_url</td>
<td>no</td>
<td>http://127.0.0.1:35357/v2.0/</td>
<td><ul></ul></td>
<td>The keystone url for authentication</td>
</tr>
<tr>
<td>container_format</td>
<td>no</td>
<td>bare</td>
<td><ul></ul></td>
<td>The format of the container</td>
</tr>
<tr>
<td>copy_from</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>A url from where the image can be downloaded, mutually exclusive with file parameter</td>
</tr>
<tr>
<td>disk_format</td>
<td>no</td>
<td>qcow2</td>
<td><ul></ul></td>
<td>The format of the disk that is getting uploaded</td>
</tr>
<tr>
<td>file</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The path to the file which has to be uploaded, mutually exclusive with copy_from</td>
</tr>
<tr>
<td>is_public</td>
<td>no</td>
<td>yes</td>
<td><ul></ul></td>
<td>Whether the image can be accessed publicly</td>
</tr>
<tr>
<td>login_password</td>
<td>yes</td>
<td>yes</td>
<td><ul></ul></td>
<td>Password of login user</td>
</tr>
<tr>
<td>login_tenant_name</td>
<td>yes</td>
<td>yes</td>
<td><ul></ul></td>
<td>The tenant name of the login user</td>
</tr>
<tr>
<td>login_username</td>
<td>yes</td>
<td>admin</td>
<td><ul></ul></td>
<td>login username to authenticate to keystone</td>
</tr>
<tr>
<td>min_disk</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The minimum disk space required to deploy this image</td>
</tr>
<tr>
<td>min_ram</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The minimum ram required to deploy this image</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td>None</td>
<td><ul></ul></td>
<td>Name that has to be given to the image</td>
</tr>
<tr>
<td>owner</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The owner of the image</td>
</tr>
<tr>
<td>region_name</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>Name of the region</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Indicate desired state of the resource</td>
</tr>
<tr>
<td>timeout</td>
<td>no</td>
<td>180</td>
<td><ul></ul></td>
<td>The time to wait for the image process to complete in seconds</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
glanceclient
keystoneclient
</p><br><pre># Upload an image from an HTTP URL
- glance_image: login_username=admin
                login_password=passme
                login_tenant_name=admin
                name=cirros
                container_format=bare
                disk_format=qcow2
                state=present
                copy_from=http:launchpad.net/cirros/trunk/0.3.0/+download/cirros-0.3.0-x86_64-disk.img
</pre></div>
<div class="section" id="keystone-user">
<span id="id12"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id156">keystone_user</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#keystone-user" title="Permalink to this headline">¶</a></h3>
<p>Manage users,tenants, roles from OpenStack.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>description</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>A description for the tenant</td>
</tr>
<tr>
<td>email</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>An email address for the user</td>
</tr>
<tr>
<td>endpoint</td>
<td>no</td>
<td>http://127.0.0.1:35357/v2.0/</td>
<td><ul></ul></td>
<td>The keystone url for authentication</td>
</tr>
<tr>
<td>login_password</td>
<td>no</td>
<td>yes</td>
<td><ul></ul></td>
<td>Password of login user</td>
</tr>
<tr>
<td>login_tenant_name</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The tenant login_user belongs to</td>
</tr>
<tr>
<td>login_user</td>
<td>no</td>
<td>admin</td>
<td><ul></ul></td>
<td>login username to authenticate to keystone</td>
</tr>
<tr>
<td>password</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The password to be assigned to the user</td>
</tr>
<tr>
<td>role</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The name of the role to be assigned or created</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Indicate desired state of the resource</td>
</tr>
<tr>
<td>tenant</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The tenant name that has be added/removed</td>
</tr>
<tr>
<td>token</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The token to be uses in case the password is not specified</td>
</tr>
<tr>
<td>user</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The name of the user that has to added/removed from OpenStack</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
python-keystoneclient
</p><br><pre># Create a tenant
- keystone_user: tenant=demo tenant_description="Default Tenant"

# Create a user
- keystone_user: user=john tenant=demo password=secrete

# Apply the admin role to the john user in the demo tenant
- keystone_user: role=admin user=john tenant=demo
</pre></div>
<div class="section" id="linode">
<span id="id13"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id157">linode</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#linode" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.3.</span></p>
</div>
<p>creates / deletes a Linode Public Cloud instance and optionally waits for it to be ‘running’.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>api_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Linode API key</td>
</tr>
<tr>
<td>datacenter</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>datacenter to create an instance in (Linode Datacenter)</td>
</tr>
<tr>
<td>distribution</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>distribution to use for the instance (Linode Distribution)</td>
</tr>
<tr>
<td>linode_id</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Unique ID of a linode server</td>
</tr>
<tr>
<td>name</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Name to give the instance (alphanumeric, dashes, underscore)To keep sanity on the Linode Web Console, name is prepended with LinodeID_</td>
</tr>
<tr>
<td>password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>root password to apply to a new server (auto generated if missing)</td>
</tr>
<tr>
<td>payment_term</td>
<td>no</td>
<td>1</td>
<td><ul><li>1</li><li>12</li><li>24</li></ul></td>
<td>payment term to use for the instance (payment term in months)</td>
</tr>
<tr>
<td>plan</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>plan to use for the instance (Linode plan)</td>
</tr>
<tr>
<td>ssh_pub_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>SSH public key applied to root user</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>active</li><li>started</li><li>absent'</li><li>deleted</li><li>stopped</li><li>restarted</li></ul></td>
<td>Indicate desired state of the resource</td>
</tr>
<tr>
<td>swap</td>
<td>no</td>
<td>512</td>
<td><ul></ul></td>
<td>swap size in MB</td>
</tr>
<tr>
<td>wait</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>wait for the instance to be in state 'running' before returning</td>
</tr>
<tr>
<td>wait_timeout</td>
<td>no</td>
<td>300</td>
<td><ul></ul></td>
<td>how long before wait gives up, in seconds</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
linode-python
</p><br><pre># Create a server
- local_action:
     module: linode
     api_key: 'longStringFromLinodeApi'
     name: linode-test1
     plan: 1
     datacenter: 2
     distribution: 99
     password: 'superSecureRootPassword'
     ssh_pub_key: 'ssh-rsa qwerty'
     swap: 768
     wait: yes
     wait_timeout: 600
     state: present

# Ensure a running server (create if missing)
- local_action:
     module: linode
     api_key: 'longStringFromLinodeApi'
     name: linode-test1
     linode_id: 12345678
     plan: 1
     datacenter: 2
     distribution: 99
     password: 'superSecureRootPassword'
     ssh_pub_key: 'ssh-rsa qwerty'
     swap: 768
     wait: yes
     wait_timeout: 600
     state: present

# Delete a server
- local_action:
     module: linode
     api_key: 'longStringFromLinodeApi'
     name: linode-test1
     linode_id: 12345678
     state: absent

# Stop a server
- local_action:
     module: linode
     api_key: 'longStringFromLinodeApi'
     name: linode-test1
     linode_id: 12345678
     state: stopped

# Reboot a server
- local_action:
     module: linode
     api_key: 'longStringFromLinodeApi'
     name: linode-test1
     linode_id: 12345678
     state: restarted
</pre><h4>Notes</h4>
<p>LINODE_API_KEY env variable can be used instead</p></div>
<div class="section" id="nova-compute">
<span id="id14"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id158">nova_compute</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#nova-compute" title="Permalink to this headline">¶</a></h3>
<p>Create or Remove virtual machines from Openstack.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>auth_url</td>
<td>no</td>
<td>http://127.0.0.1:35357/v2.0/</td>
<td><ul></ul></td>
<td>The keystone url for authentication</td>
</tr>
<tr>
<td>flavor_id</td>
<td>no</td>
<td>1</td>
<td><ul></ul></td>
<td>The id of the flavor in which the new VM has to be created</td>
</tr>
<tr>
<td>image_id</td>
<td>yes</td>
<td>None</td>
<td><ul></ul></td>
<td>The id of the image that has to be cloned</td>
</tr>
<tr>
<td>key_name</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The key pair name to be used when creating a VM</td>
</tr>
<tr>
<td>login_password</td>
<td>yes</td>
<td>yes</td>
<td><ul></ul></td>
<td>Password of login user</td>
</tr>
<tr>
<td>login_tenant_name</td>
<td>yes</td>
<td>yes</td>
<td><ul></ul></td>
<td>The tenant name of the login user</td>
</tr>
<tr>
<td>login_username</td>
<td>yes</td>
<td>admin</td>
<td><ul></ul></td>
<td>login username to authenticate to keystone</td>
</tr>
<tr>
<td>meta</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>A list of key value pairs that should be provided as a metadata to the new VM</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td>None</td>
<td><ul></ul></td>
<td>Name that has to be given to the image</td>
</tr>
<tr>
<td>nics</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>A list of network id's to which the VM's interface should be attached</td>
</tr>
<tr>
<td>region_name</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>Name of the region</td>
</tr>
<tr>
<td>security_groups</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The name of the security group to which the VM should be added</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Indicate desired state of the resource</td>
</tr>
<tr>
<td>wait</td>
<td>no</td>
<td>yes</td>
<td><ul></ul></td>
<td>If the module should wait for the VM to be created.</td>
</tr>
<tr>
<td>wait_for</td>
<td>no</td>
<td>180</td>
<td><ul></ul></td>
<td>The amount of time the module should wait for the VM to get into active state</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
novaclient
</p><br><pre># Creates a new VM and attaches to a network and passes metadata to the instance
- nova_compute:
       state: present
       login_username: admin
       login_password: admin
       login_tenant_name: admin
       name: vm1
       image_id: 4f905f38-e52a-43d2-b6ec-754a13ffb529
       key_name: ansible_key
       wait_for: 200
       flavor_id: 4
       nics:
         - net-id: 34605f38-e52a-25d2-b6ec-754a13ffb723
       meta:
         hostname: test1
         group: uge_master
</pre></div>
<div class="section" id="nova-keypair">
<span id="id15"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id159">nova_keypair</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#nova-keypair" title="Permalink to this headline">¶</a></h3>
<p>Add or Remove key pair from nova .</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>auth_url</td>
<td>no</td>
<td>http://127.0.0.1:35357/v2.0/</td>
<td><ul></ul></td>
<td>The keystone url for authentication</td>
</tr>
<tr>
<td>login_password</td>
<td>yes</td>
<td>yes</td>
<td><ul></ul></td>
<td>Password of login user</td>
</tr>
<tr>
<td>login_tenant_name</td>
<td>yes</td>
<td>yes</td>
<td><ul></ul></td>
<td>The tenant name of the login user</td>
</tr>
<tr>
<td>login_username</td>
<td>yes</td>
<td>admin</td>
<td><ul></ul></td>
<td>login username to authenticate to keystone</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td>None</td>
<td><ul></ul></td>
<td>Name that has to be given to the key pair</td>
</tr>
<tr>
<td>public_key</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The public key that would be uploaded to nova and injected to vm's upon creation</td>
</tr>
<tr>
<td>region_name</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>Name of the region</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Indicate desired state of the resource</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
novaclient
</p><br><pre># Creates a key pair with the running users public key
- nova_keypair: state=present login_username=admin
                login_password=admin login_tenant_name=admin name=ansible_key
                public_key={{ lookup('file','~/.ssh/id_rsa.pub') }}

# Creates a new key pair and the private key returned after the run.
- nova_keypair: state=present login_username=admin login_password=admin
                login_tenant_name=admin name=ansible_key
</pre></div>
<div class="section" id="quantum-floating-ip">
<span id="id16"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id160">quantum_floating_ip</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#quantum-floating-ip" title="Permalink to this headline">¶</a></h3>
<p>Add or Remove a floating IP to an instance</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>auth_url</td>
<td>no</td>
<td>http://127.0.0.1:35357/v2.0/</td>
<td><ul></ul></td>
<td>The keystone url for authentication</td>
</tr>
<tr>
<td>instance_name</td>
<td>yes</td>
<td>None</td>
<td><ul></ul></td>
<td>The name of the instance to which the IP address should be assigned</td>
</tr>
<tr>
<td>login_password</td>
<td>yes</td>
<td>yes</td>
<td><ul></ul></td>
<td>Password of login user</td>
</tr>
<tr>
<td>login_tenant_name</td>
<td>yes</td>
<td>yes</td>
<td><ul></ul></td>
<td>The tenant name of the login user</td>
</tr>
<tr>
<td>login_username</td>
<td>yes</td>
<td>admin</td>
<td><ul></ul></td>
<td>login username to authenticate to keystone</td>
</tr>
<tr>
<td>network_name</td>
<td>yes</td>
<td>None</td>
<td><ul></ul></td>
<td>Name of the network from which IP has to be assigned to VM. Please make sure the network is an external network</td>
</tr>
<tr>
<td>region_name</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>Name of the region</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Indicate desired state of the resource</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
novaclient
quantumclient
keystoneclient
</p><br><pre># Assign a floating ip to the instance from an external network
- quantum_floating_ip: state=present login_username=admin login_password=admin
                       login_tenant_name=admin network_name=external_network
                       instance_name=vm1
</pre></div>
<div class="section" id="quantum-floating-ip-associate">
<span id="id17"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id161">quantum_floating_ip_associate</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#quantum-floating-ip-associate" title="Permalink to this headline">¶</a></h3>
<p>Associates or disassociates a specific floating IP with a particular instance</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>auth_url</td>
<td>no</td>
<td>http://127.0.0.1:35357/v2.0/</td>
<td><ul></ul></td>
<td>the keystone url for authentication</td>
</tr>
<tr>
<td>instance_name</td>
<td>yes</td>
<td>None</td>
<td><ul></ul></td>
<td>name of the instance to which the public IP should be assigned</td>
</tr>
<tr>
<td>ip_address</td>
<td>yes</td>
<td>None</td>
<td><ul></ul></td>
<td>floating ip that should be assigned to the instance</td>
</tr>
<tr>
<td>login_password</td>
<td>yes</td>
<td>yes</td>
<td><ul></ul></td>
<td>password of login user</td>
</tr>
<tr>
<td>login_tenant_name</td>
<td>yes</td>
<td>True</td>
<td><ul></ul></td>
<td>the tenant name of the login user</td>
</tr>
<tr>
<td>login_username</td>
<td>yes</td>
<td>admin</td>
<td><ul></ul></td>
<td>login username to authenticate to keystone</td>
</tr>
<tr>
<td>region_name</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>name of the region</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>indicates the desired state of the resource</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
quantumclient
keystoneclient
</p><br><pre># Associate a specific floating IP with an Instance
- quantum_floating_ip_associate:
           state=present
           login_username=admin
           login_password=admin
           login_tenant_name=admin
           ip_address=1.1.1.1
           instance_name=vm1
</pre></div>
<div class="section" id="quantum-network">
<span id="id18"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id162">quantum_network</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#quantum-network" title="Permalink to this headline">¶</a></h3>
<p>Add or Remove network from OpenStack.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>admin_state_up</td>
<td>no</td>
<td>True</td>
<td><ul></ul></td>
<td>Whether the state should be marked as up or down</td>
</tr>
<tr>
<td>auth_url</td>
<td>no</td>
<td>http://127.0.0.1:35357/v2.0/</td>
<td><ul></ul></td>
<td>The keystone url for authentication</td>
</tr>
<tr>
<td>login_password</td>
<td>yes</td>
<td>yes</td>
<td><ul></ul></td>
<td>Password of login user</td>
</tr>
<tr>
<td>login_tenant_name</td>
<td>yes</td>
<td>yes</td>
<td><ul></ul></td>
<td>The tenant name of the login user</td>
</tr>
<tr>
<td>login_username</td>
<td>yes</td>
<td>admin</td>
<td><ul></ul></td>
<td>login username to authenticate to keystone</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td>None</td>
<td><ul></ul></td>
<td>Name to be assigned to the nework</td>
</tr>
<tr>
<td>provider_network_type</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The type of the network to be created, gre, vlan, local. Available types depend on the plugin. The Quantum service decides if not specified.</td>
</tr>
<tr>
<td>provider_physical_network</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The physical network which would realize the virtual network for flat and vlan networks.</td>
</tr>
<tr>
<td>provider_segmentation_id</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The id that has to be assigned to the network, in case of vlan networks that would be vlan id and for gre the tunnel id</td>
</tr>
<tr>
<td>region_name</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>Name of the region</td>
</tr>
<tr>
<td>router_external</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>If 'yes', specifies that the virtual network is a external network (public).</td>
</tr>
<tr>
<td>shared</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Whether this network is shared or not</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Indicate desired state of the resource</td>
</tr>
<tr>
<td>tenant_name</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The name of the tenant for whom the network is created</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
quantumclient
keystoneclient
</p><br><pre># Create a GRE backed Quantum network with tunnel id 1 for tenant1
- quantum_network: name=t1network tenant_name=tenant1 state=present
                   provider_network_type=gre provider_segmentation_id=1
                   login_username=admin login_password=admin login_tenant_name=admin

# Create an external network
- quantum_network: name=external_network state=present
                   provider_network_type=local router_external=yes
                   login_username=admin login_password=admin login_tenant_name=admin
</pre></div>
<div class="section" id="quantum-router">
<span id="id19"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id163">quantum_router</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#quantum-router" title="Permalink to this headline">¶</a></h3>
<p>Create or Delete routers from OpenStack</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>admin_state_up</td>
<td>no</td>
<td>True</td>
<td><ul></ul></td>
<td>desired admin state of the created router .</td>
</tr>
<tr>
<td>auth_url</td>
<td>no</td>
<td>http://127.0.0.1:35357/v2.0/</td>
<td><ul></ul></td>
<td>The keystone url for authentication</td>
</tr>
<tr>
<td>login_password</td>
<td>yes</td>
<td>yes</td>
<td><ul></ul></td>
<td>Password of login user</td>
</tr>
<tr>
<td>login_tenant_name</td>
<td>yes</td>
<td>yes</td>
<td><ul></ul></td>
<td>The tenant name of the login user</td>
</tr>
<tr>
<td>login_username</td>
<td>yes</td>
<td>admin</td>
<td><ul></ul></td>
<td>login username to authenticate to keystone</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td>None</td>
<td><ul></ul></td>
<td>Name to be give to the router</td>
</tr>
<tr>
<td>region_name</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>Name of the region</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Indicate desired state of the resource</td>
</tr>
<tr>
<td>tenant_name</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>Name of the tenant for which the router has to be created, if none router would be created for the login tenant.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
quantumclient
keystoneclient
</p><br><pre># Creates a router for tenant admin
- quantum_router: state=present
                login_username=admin
                login_password=admin
                login_tenant_name=admin
                name=router1"
</pre></div>
<div class="section" id="quantum-router-gateway">
<span id="id20"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id164">quantum_router_gateway</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#quantum-router-gateway" title="Permalink to this headline">¶</a></h3>
<p>Creates/Removes a gateway interface from the router, used to associate a external network with a router to route external traffic.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>auth_url</td>
<td>no</td>
<td>http://127.0.0.1:35357/v2.0/</td>
<td><ul></ul></td>
<td>The keystone URL for authentication</td>
</tr>
<tr>
<td>login_password</td>
<td>yes</td>
<td>yes</td>
<td><ul></ul></td>
<td>Password of login user</td>
</tr>
<tr>
<td>login_tenant_name</td>
<td>yes</td>
<td>yes</td>
<td><ul></ul></td>
<td>The tenant name of the login user</td>
</tr>
<tr>
<td>login_username</td>
<td>yes</td>
<td>admin</td>
<td><ul></ul></td>
<td>login username to authenticate to keystone</td>
</tr>
<tr>
<td>network_name</td>
<td>yes</td>
<td>None</td>
<td><ul></ul></td>
<td>Name of the external network which should be attached to the router.</td>
</tr>
<tr>
<td>region_name</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>Name of the region</td>
</tr>
<tr>
<td>router_name</td>
<td>yes</td>
<td>None</td>
<td><ul></ul></td>
<td>Name of the router to which the gateway should be attached.</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Indicate desired state of the resource</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
quantumclient
keystoneclient
</p><br><pre># Attach an external network with a router to allow flow of external traffic
- quantum_router_gateway: state=present login_username=admin login_password=admin
                          login_tenant_name=admin router_name=external_router
                          network_name=external_network
</pre></div>
<div class="section" id="quantum-router-interface">
<span id="id21"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id165">quantum_router_interface</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#quantum-router-interface" title="Permalink to this headline">¶</a></h3>
<p>Attach/Dettach a subnet interface to a router, to provide a gateway for the subnet.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>auth_url</td>
<td>no</td>
<td>http://127.0.0.1:35357/v2.0/</td>
<td><ul></ul></td>
<td>The keystone URL for authentication</td>
</tr>
<tr>
<td>login_password</td>
<td>yes</td>
<td>yes</td>
<td><ul></ul></td>
<td>Password of login user</td>
</tr>
<tr>
<td>login_tenant_name</td>
<td>yes</td>
<td>yes</td>
<td><ul></ul></td>
<td>The tenant name of the login user</td>
</tr>
<tr>
<td>login_username</td>
<td>yes</td>
<td>admin</td>
<td><ul></ul></td>
<td>login username to authenticate to keystone</td>
</tr>
<tr>
<td>region_name</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>Name of the region</td>
</tr>
<tr>
<td>router_name</td>
<td>yes</td>
<td>None</td>
<td><ul></ul></td>
<td>Name of the router to which the subnet's interface should be attached.</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Indicate desired state of the resource</td>
</tr>
<tr>
<td>subnet_name</td>
<td>yes</td>
<td>None</td>
<td><ul></ul></td>
<td>Name of the subnet to whose interface should be attached to the router.</td>
</tr>
<tr>
<td>tenant_name</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>Name of the tenant whose subnet has to be attached.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
quantumclient
keystoneclient
</p><br><pre># Attach tenant1's subnet to the external router
- quantum_router_interface: state=present login_username=admin
                            login_password=admin
                            login_tenant_name=admin
                            tenant_name=tenant1
                            router_name=external_route
                            subnet_name=t1subnet
</pre></div>
<div class="section" id="quantum-subnet">
<span id="id22"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id166">quantum_subnet</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#quantum-subnet" title="Permalink to this headline">¶</a></h3>
<p>Add or Remove a floating IP to an instance</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>allocation_pool_end</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>From the subnet pool the last IP that should be assigned to the virtual machines</td>
</tr>
<tr>
<td>allocation_pool_start</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>From the subnet pool the starting address from which the IP should be allocated</td>
</tr>
<tr>
<td>auth_url</td>
<td>no</td>
<td>http://127.0.0.1:35357/v2.0/</td>
<td><ul></ul></td>
<td>The keystone URL for authentication</td>
</tr>
<tr>
<td>cidr</td>
<td>yes</td>
<td>None</td>
<td><ul></ul></td>
<td>The CIDR representation of the subnet that should be assigned to the subnet</td>
</tr>
<tr>
<td>dns_nameservers</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>DNS nameservers for this subnet, comma-separated</td>
</tr>
<tr>
<td>enable_dhcp</td>
<td>no</td>
<td>True</td>
<td><ul></ul></td>
<td>Whether DHCP should be enabled for this subnet.</td>
</tr>
<tr>
<td>gateway_ip</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The ip that would be assigned to the gateway for this subnet</td>
</tr>
<tr>
<td>ip_version</td>
<td>no</td>
<td>4</td>
<td><ul></ul></td>
<td>The IP version of the subnet 4 or 6</td>
</tr>
<tr>
<td>login_password</td>
<td>yes</td>
<td>True</td>
<td><ul></ul></td>
<td>Password of login user</td>
</tr>
<tr>
<td>login_tenant_name</td>
<td>yes</td>
<td>True</td>
<td><ul></ul></td>
<td>The tenant name of the login user</td>
</tr>
<tr>
<td>login_username</td>
<td>yes</td>
<td>admin</td>
<td><ul></ul></td>
<td>login username to authenticate to keystone</td>
</tr>
<tr>
<td>network_name</td>
<td>yes</td>
<td>None</td>
<td><ul></ul></td>
<td>Name of the network to which the subnet should be attached</td>
</tr>
<tr>
<td>region_name</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>Name of the region</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Indicate desired state of the resource</td>
</tr>
<tr>
<td>tenant_name</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The name of the tenant for whom the subnet should be created</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
quantum
keystoneclient
</p><br><pre># Create a subnet for a tenant with the specified subnet
- quantum_subnet: state=present login_username=admin login_password=admin
                  login_tenant_name=admin tenant_name=tenant1
                  network_name=network1 name=net1subnet cidr=192.168.0.0/24"
</pre></div>
<div class="section" id="rax">
<span id="id23"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id167">rax</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#rax" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>creates / deletes a Rackspace Public Cloud instance and optionally waits for it to be ‘running’.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>api_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Rackspace API key (overrides <code>credentials</code>)</td>
</tr>
<tr>
<td>credentials</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>File to find the Rackspace credentials in (ignored if <code>api_key</code> and <code>username</code> are provided)</td>
</tr>
<tr>
<td>files</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Files to insert into the instance. remotefilename:localcontent</td>
</tr>
<tr>
<td>flavor</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>flavor to use for the instance</td>
</tr>
<tr>
<td>image</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>image to use for the instance</td>
</tr>
<tr>
<td>key_name</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>key pair to use on the instance</td>
</tr>
<tr>
<td>meta</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>A hash of metadata to associate with the instance</td>
</tr>
<tr>
<td>name</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Name to give the instance</td>
</tr>
<tr>
<td>region</td>
<td>no</td>
<td>DFW</td>
<td><ul></ul></td>
<td>Region to create an instance in</td>
</tr>
<tr>
<td>service</td>
<td>no</td>
<td>cloudservers</td>
<td><ul><li>cloudservers</li></ul></td>
<td>Cloud service to interact with</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>active</li><li>absent</li><li>deleted</li></ul></td>
<td>Indicate desired state of the resource</td>
</tr>
<tr>
<td>username</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Rackspace username (overrides <code>credentials</code>)</td>
</tr>
<tr>
<td>wait</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>wait for the instance to be in state 'running' before returning</td>
</tr>
<tr>
<td>wait_timeout</td>
<td>no</td>
<td>300</td>
<td><ul></ul></td>
<td>how long before wait gives up, in seconds</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
pyrax
</p><br><pre>- name: Build a Cloud Server
  gather_facts: False

  tasks:
    - name: Server build request
      local_action:
        module: rax
        credentials: ~/.raxpub
        service: cloudservers
        name: rax-test1
        flavor: 5
        image: b11d9567-e412-4255-96b9-bd63ab23bcfe
        files:
          /root/.ssh/authorized_keys: /home/localuser/.ssh/id_rsa.pub
          /root/test.txt: /home/localuser/test.txt
        wait: yes
        state: present
</pre><h4>Notes</h4>
<p>The following environment variables can be used, <code>RAX_USERNAME</code>, <code>RAX_API_KEY</code>, <code>RAX_CREDS</code>, <code>RAX_CREDENTIALS</code>, <code>RAX_REGION</code>.</p>
<p><code>RAX_CREDENTIALS</code> and <code>RAX_CREDS</code> points to a credentials file appropriate for pyrax</p>
<p><code>RAX_USERNAME</code> and <code>RAX_API_KEY</code> obviate the use of a credentials file</p>
<p><code>RAX_REGION</code> defines a Rackspace Public Cloud region (DFW, ORD, LON, ...)</p></div>
<div class="section" id="rax-clb">
<span id="id24"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id168">rax_clb</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#rax-clb" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.4.</span></p>
</div>
<p>Adds, modifies and removes nodes from a Rackspace Cloud Load Balancer</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>address</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>IP address or domain name of the node</td>
</tr>
<tr>
<td>api_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Rackspace API key (overrides <code>credentials</code>)</td>
</tr>
<tr>
<td>condition</td>
<td>no</td>
<td></td>
<td><ul><li>enabled</li><li>disabled</li><li>draining</li></ul></td>
<td>Condition for the node, which determines its role within the load balancer</td>
</tr>
<tr>
<td>credentials</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>File to find the Rackspace credentials in (ignored if <code>api_key</code> and <code>username</code> are provided)</td>
</tr>
<tr>
<td>load_balancer_id</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Load balancer id</td>
</tr>
<tr>
<td>node_id</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Node id</td>
</tr>
<tr>
<td>port</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Port number of the load balanced service on the node</td>
</tr>
<tr>
<td>region</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Region to authenticate in</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Indicate desired state of the node</td>
</tr>
<tr>
<td>type</td>
<td>no</td>
<td></td>
<td><ul><li>primary</li><li>secondary</li></ul></td>
<td>Type of node</td>
</tr>
<tr>
<td>username</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Rackspace username (overrides <code>credentials</code>)</td>
</tr>
<tr>
<td>virtualenv</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Path to a virtualenv that should be activated before doing anything. The virtualenv has to already exist. Useful if installing pyrax globally is not an option.</td>
</tr>
<tr>
<td>wait</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Wait for the load balancer to become active before returning</td>
</tr>
<tr>
<td>wait_timeout</td>
<td>no</td>
<td>30</td>
<td><ul></ul></td>
<td>How long to wait before giving up and returning an error</td>
</tr>
<tr>
<td>weight</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Weight of node</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
pyrax
</p><br><pre># Add a new node to the load balancer
- local_action:
    module: rax_clb
    load_balancer_id: 71
    address: 10.2.2.3
    port: 80
    condition: enabled
    type: primary
    wait: yes
    credentials: /path/to/credentials

# Drain connections from a node
- local_action:
    module: rax_clb
    load_balancer_id: 71
    node_id: 410
    condition: draining
    wait: yes
    credentials: /path/to/credentials

# Remove a node from the load balancer
- local_action:
    module: rax_clb
    load_balancer_id: 71
    node_id: 410
    state: absent
    wait: yes
    credentials: /path/to/credentials
</pre><h4>Notes</h4>
<p>The following environment variables can be used: <code>RAX_USERNAME</code>, <code>RAX_API_KEY</code>, <code>RAX_CREDENTIALS</code> and <code>RAX_REGION</code>.</p></div>
<div class="section" id="rds">
<span id="id25"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id169">rds</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#rds" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.3.</span></p>
</div>
<p>Creates or deletes rds instances. When creating an instance it can be either a new instance or a read-only replica of an existing instance. This module has a dependency on python-boto &gt;= 2.5.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>apply_immediately</td>
<td>no</td>
<td></td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Used only when command=modify. If enabled, the modifications will be applied as soon as possible rather than waiting for the next preferred maintenance window.</td>
</tr>
<tr>
<td>aws_access_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>AWS access key. If not set then the value of the AWS_ACCESS_KEY environment variable is used.</td>
</tr>
<tr>
<td>aws_secret_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>AWS secret key. If not set then the value of the AWS_SECRET_KEY environment variable is used.</td>
</tr>
<tr>
<td>backup_retention</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Number of days backups are retained. Set to 0 to disable backups. Default is 1 day. Valid range: 0-35. Used only when command=create or command=modify.</td>
</tr>
<tr>
<td>backup_window</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Backup window in format of hh24:mi-hh24:mi. If not specified then a random backup window is assigned. Used only when command=create or command=modify.</td>
</tr>
<tr>
<td>command</td>
<td>yes</td>
<td></td>
<td><ul><li>create</li><li>replicate</li><li>delete</li><li>facts</li><li>modify</li></ul></td>
<td>Specifies the action to take.</td>
</tr>
<tr>
<td>db_engine</td>
<td>no</td>
<td></td>
<td><ul><li>MySQL</li><li>oracle-se1</li><li>oracle-se</li><li>oracle-ee</li><li>sqlserver-ee</li><li>sqlserver-se</li><li>sqlserver-ex</li><li>sqlserver-web</li></ul></td>
<td>The type of database. Used only when command=create.</td>
</tr>
<tr>
<td>db_name</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Name of a database to create within the instance. If not specified then no database is created. Used only when command=create.</td>
</tr>
<tr>
<td>engine_version</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Version number of the database engine to use. Used only when command=create. If not specified then the current Amazon RDS default engine version is used.</td>
</tr>
<tr>
<td>instance_name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Database instance identifier.</td>
</tr>
<tr>
<td>instance_type</td>
<td>no</td>
<td></td>
<td><ul><li>db.t1.micro</li><li>db.m1.small</li><li>db.m1.medium</li><li>db.m1.large</li><li>db.m1.xlarge</li><li>db.m2.xlarge</li><li>db.m2.2xlarge</li><li>db.m2.4xlarge</li></ul></td>
<td>The instance type of the database. Must be specified when command=create. Optional when command=replicate or command=modify. If not specified then the replica inherits the same instance type as the source instance.</td>
</tr>
<tr>
<td>iops</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Specifies the number of IOPS for the instance. Used only when command=create or command=modify. Must be an integer greater than 1000.</td>
</tr>
<tr>
<td>license_model</td>
<td>no</td>
<td></td>
<td><ul><li>license-included</li><li>bring-your-own-license</li><li>general-public-license</li></ul></td>
<td>The license model for this DB instance. Used only when command=create.</td>
</tr>
<tr>
<td>maint_window</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Maintenance window in format of ddd:hh24:mi-ddd:hh24:mi. (Example: Mon:22:00-Mon:23:15) If not specified then a random maintenance window is assigned. Used only when command=create or command=modify.</td>
</tr>
<tr>
<td>multi_zone</td>
<td>no</td>
<td></td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Specifies if this is a Multi-availability-zone deployment. Can not be used in conjunction with zone parameter. Used only when command=create or command=modify.</td>
</tr>
<tr>
<td>option_group</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The name of the option group to use. If not specified then the default option group is used. Used only when command=create.</td>
</tr>
<tr>
<td>parameter_group</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Name of the DB parameter group to associate with this instance. If omitted then the RDS default DBParameterGroup will be used. Used only when command=create or command=modify.</td>
</tr>
<tr>
<td>password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Password for the master database username. Used only when command=create or command=modify.</td>
</tr>
<tr>
<td>port</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Port number that the DB instance uses for connections. Defaults to 3306 for mysql, 1521 for Oracle, 1443 for SQL Server. Used only when command=create or command=replicate.</td>
</tr>
<tr>
<td>region</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The AWS region to use. If not specified then the value of the EC2_REGION environment variable, if any, is used.</td>
</tr>
<tr>
<td>security_groups</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Comma separated list of one or more security groups. Used only when command=create or command=modify. If a subnet is specified then this is treated as a list of VPC security groups.</td>
</tr>
<tr>
<td>size</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Size in gigabytes of the initial storage for the DB instance. Used only when command=create or command=modify.</td>
</tr>
<tr>
<td>snapshot</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Name of final snapshot to take when deleting an instance. If no snapshot name is provided then no snapshot is taken. Used only when command=delete.</td>
</tr>
<tr>
<td>source_instance</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Name of the database to replicate. Used only when command=replicate.</td>
</tr>
<tr>
<td>subnet</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>VPC subnet group. If specified then a VPC instance is created. Used only when command=create.</td>
</tr>
<tr>
<td>upgrade</td>
<td>no</td>
<td></td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Indicates that minor version upgrades should be applied automatically. Used only when command=create or command=replicate.</td>
</tr>
<tr>
<td>username</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Master database username. Used only when command=create.</td>
</tr>
<tr>
<td>wait</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>When command=create, replicate, or modify then wait for the database to enter the 'available' state. When command=delete wait for the database to be terminated.</td>
</tr>
<tr>
<td>wait_timeout</td>
<td>no</td>
<td>300</td>
<td><ul></ul></td>
<td>how long before wait gives up, in seconds</td>
</tr>
<tr>
<td>zone</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>availability zone in which to launch the instance. Used only when command=create or command=replicate.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
boto
</p><br><pre># Basic mysql provisioning example
- rds: &gt;
      command=create
      instance_name=new_database
      db_engine=MySQL
      size=10
      instance_type=db.m1.small
      username=mysql_admin
      password=1nsecure

# Create a read-only replica and wait for it to become available
- rds: &gt;
      command=replicate
      instance_name=new_database_replica
      source_instance=new_database
      wait=yes
      wait_timeout=600

# Delete an instance, but create a snapshot before doing so
- rds: &gt;
      command=delete
      instance_name=new_database
      snapshot=new_database_snapshot

# Get facts about an instance
- rds: &gt;
      command=facts
      instance_name=new_database
      register: new_database_facts

</pre></div>
<div class="section" id="route53">
<span id="id26"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id170">route53</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#route53" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.3.</span></p>
</div>
<p>Creates and deletes DNS records in Amazons Route53 service</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>aws_access_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>AWS access key.</td>
</tr>
<tr>
<td>aws_secret_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>AWS secret key.</td>
</tr>
<tr>
<td>command</td>
<td>yes</td>
<td></td>
<td><ul><li>get</li><li>create</li><li>delete</li></ul></td>
<td>Specifies the action to take.</td>
</tr>
<tr>
<td>overwrite</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Whether an existing record should be overwritten on create if values do not match</td>
</tr>
<tr>
<td>record</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The full DNS record to create or delete</td>
</tr>
<tr>
<td>ttl</td>
<td>no</td>
<td>3600 (one hour)</td>
<td><ul></ul></td>
<td>The TTL to give the new record</td>
</tr>
<tr>
<td>type</td>
<td>yes</td>
<td></td>
<td><ul><li>A</li><li>CNAME</li><li>MX</li><li>AAAA</li><li>TXT</li><li>PTR</li><li>SRV</li><li>SPF</li><li>NS</li></ul></td>
<td>The type of DNS record to create</td>
</tr>
<tr>
<td>value</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The new value when creating a DNS record. Multiple comma-spaced values are allowed. When deleting a record all values for the record must be specified or Route53 will not delete it.</td>
</tr>
<tr>
<td>zone</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The DNS zone to modify</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
boto
</p><br><pre># Add new.foo.com as an A record with 3 IPs
- route53: &gt;
      command=create
      zone=foo.com
      record=new.foo.com
      type=A
      ttl=7200
      value=1.1.1.1,2.2.2.2,3.3.3.3

# Retrieve the details for new.foo.com
- route53: &gt;
      command=get
      zone=foo.com
      record=new.foo.com
      type=A
  register: rec

# Delete new.foo.com A record using the results from the get command
- route53: &gt;
      command=delete
      zone=foo.com
      record={{ rec.set.record }}
      type={{ rec.set.type }}
      value={{ rec.set.value }}

# Add an AAAA record.  Note that because there are colons in the value
# that the entire parameter list must be quoted:
- route53: &gt;
      "command=create
      zone=foo.com
      record=localhost.foo.com
      type=AAAA
      ttl=7200
      value=::1"
</pre></div>
<div class="section" id="s3">
<span id="id27"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id171">s3</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#s3" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>This module allows the user to dictate the presence of a given file in an S3 bucket. If or once the key (file) exists in the bucket, it returns a time-expired download URL. This module has a dependency on python-boto.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>aws_access_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>AWS access key. If not set then the value of the AWS_ACCESS_KEY environment variable is used.</td>
</tr>
<tr>
<td>aws_secret_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>AWS secret key. If not set then the value of the AWS_SECRET_KEY environment variable is used.</td>
</tr>
<tr>
<td>bucket</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Bucket name.</td>
</tr>
<tr>
<td>dest</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The destination file path when downloading an object/key with a GET operation. (added in Ansible 1.3)</td>
</tr>
<tr>
<td>expiration</td>
<td>no</td>
<td>600</td>
<td><ul></ul></td>
<td>Time limit (in seconds) for the URL generated and returned by S3/Walrus when performing a mode=put or mode=geturl operation.</td>
</tr>
<tr>
<td>mode</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Switches the module behaviour between put (upload), get (download), geturl (return download url (Ansible 1.3+), getstr (download object as string (1.3+)), create (bucket) and delete (bucket).</td>
</tr>
<tr>
<td>object</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Keyname of the object inside the bucket. Can be used to create "virtual directories", see examples. (added in Ansible 1.3)</td>
</tr>
<tr>
<td>overwrite</td>
<td>no</td>
<td>True</td>
<td><ul></ul></td>
<td>Force overwrite either locally on the filesystem or remotely with the object/key. Used with PUT and GET operations. (added in Ansible 1.2)</td>
</tr>
<tr>
<td>s3_url</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>S3 URL endpoint. If not specified then the S3_URL environment variable is used, if that variable is defined.</td>
</tr>
<tr>
<td>src</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The source file path when performing a PUT operation. (added in Ansible 1.3)</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
boto
</p><br><pre># Simple PUT operation
- s3: bucket=mybucket object=/my/desired/key.txt src=/usr/local/myfile.txt mode=put
# Simple GET operation
- s3: bucket=mybucket object=/my/desired/key.txt dest=/usr/local/myfile.txt mode=get
# GET/download and overwrite local file (trust remote)
- s3: bucket=mybucket object=/my/desired/key.txt dest=/usr/local/myfile.txt mode=get
# GET/download and do not overwrite local file (trust remote)
- s3: bucket=mybucket object=/my/desired/key.txt dest=/usr/local/myfile.txt mode=get force=false
# PUT/upload and overwrite remote file (trust local)
- s3: bucket=mybucket object=/my/desired/key.txt src=/usr/local/myfile.txt mode=put
# PUT/upload and do not overwrite remote file (trust local)
- s3: bucket=mybucket object=/my/desired/key.txt src=/usr/local/myfile.txt mode=put force=false
# Download an object as a string to use else where in your playbook
- s3: bucket=mybucket object=/my/desired/key.txt src=/usr/local/myfile.txt mode=getstr
# Create an empty bucket
- s3: bucket=mybucket mode=create
# Create a bucket with key as directory
- s3: bucket=mybucket object=/my/directory/path mode=create
# Delete a bucket and all contents
- s3: bucket=mybucket mode=delete
</pre></div>
<div class="section" id="virt">
<span id="id28"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id172">virt</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#virt" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.2.</span></p>
</div>
<p>Manages virtual machines supported by <em>libvirt</em>.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>command</td>
<td>no</td>
<td></td>
<td><ul><li>create</li><li>status</li><li>start</li><li>stop</li><li>pause</li><li>unpause</li><li>shutdown</li><li>undefine</li><li>destroy</li><li>get_xml</li><li>autostart</li><li>freemem</li><li>list_vms</li><li>info</li><li>nodeinfo</li><li>virttype</li><li>define</li></ul></td>
<td>in addition to state management, various non-idempotent commands are available. See examples</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>name of the guest VM being managed. Note that VM must be previously defined with xml.</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>no</td>
<td><ul><li>running</li><li>shutdown</li></ul></td>
<td>Note that there may be some lag for state requests like <code>shutdown</code> since these refer only to VM states. After starting a guest, it may not be immediately accessible.</td>
</tr>
<tr>
<td>uri</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>libvirt connection uri</td>
</tr>
<tr>
<td>xml</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>XML document used with the define command</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
libvirt
</p><br><pre># a playbook task line:
- virt: name=alpha state=running

# /usr/bin/ansible invocations
ansible host -m virt -a "name=alpha command=status"
ansible host -m virt -a "name=alpha command=get_xml"
ansible host -m virt -a "name=alpha command=create uri=lxc:///"

# a playbook example of defining and launching an LXC guest
tasks:
  - name: define vm
    virt: name=foo
          command=define
          xml="{{ lookup('template', 'container-template.xml.j2') }}"
          uri=lxc:///
  - name: start vm
    virt: name=foo state=running uri=lxc:///
</pre></div>
</div>
<div class="section" id="commands">
<h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id173">Commands</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="command">
<span id="id29"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id174">command</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#command" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">command</span></tt> module takes the command name followed by a list of space-delimited arguments.
The given command will be executed on all selected nodes. It will not be processed through the shell, so variables like <tt class="docutils literal"><span class="pre">$HOME</span></tt> and operations like <tt class="docutils literal"><span class="pre">"&lt;"</span></tt>, <tt class="docutils literal"><span class="pre">"&gt;"</span></tt>, <tt class="docutils literal"><span class="pre">"|"</span></tt>, and <tt class="docutils literal"><span class="pre">"&amp;"</span></tt> will not work.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>chdir</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>cd into this directory before running the command (added in Ansible 0.6)</td>
</tr>
<tr>
<td>creates</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>a filename, when it already exists, this step will <b>not</b> be run.</td>
</tr>
<tr>
<td>executable</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>change the shell used to execute the command. Should be an absolute path to the executable. (added in Ansible 0.9)</td>
</tr>
<tr>
<td>free_form</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>the command module takes a free form command to run</td>
</tr>
<tr>
<td>removes</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>a filename, when it does not exist, this step will <b>not</b> be run. (added in Ansible 0.8)</td>
</tr>
</tbody></table><br><pre># Example from Ansible Playbooks
- command: /sbin/shutdown -t now

# Run the command if the specified file does not exist
- command: /usr/bin/make_database.sh arg1 arg2 creates=/path/to/database
</pre><h4>Notes</h4>
<p>If you want to run a command through the shell (say you are using <code>&lt;</code>, <code>&gt;</code>, <code>|</code>, etc), you actually want the <span class="module">shell</span> module instead. The <span class="module">command</span> module is much more secure as it's not affected by the user's environment.</p>
<p> <code>creates</code>, <code>removes</code>, and <code>chdir</code> can be specified after the command. For instance, if you only want to run a command if a certain file does not exist, use this.</p></div>
<div class="section" id="raw">
<span id="id30"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id175">raw</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#raw" title="Permalink to this headline">¶</a></h3>
<p>Executes a low-down and dirty SSH command, not going through the module subsystem. This is useful and should only be done in two cases. The first case is installing <tt class="docutils literal"><span class="pre">python-simplejson</span></tt> on older (Python 2.4 and before) hosts that need it as a dependency to run modules, since nearly all core modules require it. Another is speaking to any devices such as routers that do not have any Python installed. In any other case, using the <tt class="docutils literal"><span class="pre">shell</span></tt> or <tt class="docutils literal"><span class="pre">command</span></tt> module is much more appropriate. Arguments given to <tt class="docutils literal"><span class="pre">raw</span></tt> are run directly through the configured remote shell. Standard output, error output and return code are returned when available. There is no change handler support for this module.
This module does not require python on the remote system, much like the <tt class="docutils literal"><span class="pre">script</span></tt> module.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>executable</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>change the shell used to execute the command. Should be an absolute path to the executable. (added in Ansible 1.0)</td>
</tr>
<tr>
<td>free_form</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>the raw module takes a free form command to run</td>
</tr>
</tbody></table><br><pre># Bootstrap a legacy python 2.4 host
- raw: yum -y install python-simplejson
</pre><h4>Notes</h4>
<p>If you want to execute a command securely and predictably, it may be better to use the <span class="module">command</span> module instead. Best practices when writing playbooks will follow the trend of using <span class="module">command</span> unless <span class="module">shell</span> is explicitly required. When running ad-hoc commands, use your best judgement.</p></div>
<div class="section" id="script">
<span id="id31"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id176">script</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#script" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">script</span></tt> module takes the script name followed by a list of space-delimited arguments.
The local script at path will be transfered to the remote node and then executed.
The given script will be processed through the shell environment on the remote node.
This module does not require python on the remote system, much like the <tt class="docutils literal"><span class="pre">raw</span></tt> module.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>free_form</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>path to the local script file followed by optional arguments.</td>
</tr>
</tbody></table><br><pre># Example from Ansible Playbooks
- script: /some/local/script.sh --some-arguments 1234
</pre><h4>Notes</h4>
<p>It is usually preferable to write Ansible modules than pushing scripts. Convert your script to an Ansible module for bonus points!</p></div>
<div class="section" id="shell">
<span id="id32"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id177">shell</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#shell" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.2.</span></p>
</div>
<p>The shell module takes the command name followed by a list of arguments, space delimited. It is almost exactly like the <tt class="docutils literal"><span class="pre">command</span></tt> module but runs the command through a shell (<tt class="docutils literal"><span class="pre">/bin/sh</span></tt>) on the remote node.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>(free form)</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The command module takes a free form command to run</td>
</tr>
<tr>
<td>chdir</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>cd into this directory before running the command (added in Ansible 0.6)</td>
</tr>
<tr>
<td>creates</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>a filename, when it already exists, this step will NOT be run</td>
</tr>
<tr>
<td>executable</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>change the shell used to execute the command. Should be an absolute path to the executable. (added in Ansible 0.9)</td>
</tr>
</tbody></table><br><pre># Execute the command in remote shell; stdout goes to the specified
# file on the remote
- shell: somescript.sh &gt;&gt; somelog.txt
</pre><h4>Notes</h4>
<p>If you want to execute a command securely and predictably, it may be better to use the <span class="module">command</span> module instead. Best practices when writing playbooks will follow the trend of using <span class="module">command</span> unless <span class="module">shell</span> is explicitly required. When running ad-hoc commands, use your best judgement.</p></div>
</div>
<div class="section" id="database">
<h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id178">Database</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#database" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mongodb-user">
<span id="id33"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id179">mongodb_user</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#mongodb-user" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>Adds or removes a user from a MongoDB database.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>database</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The name of the database to add/remove the user from</td>
</tr>
<tr>
<td>login_host</td>
<td>no</td>
<td>localhost</td>
<td><ul></ul></td>
<td>The host running the database</td>
</tr>
<tr>
<td>login_password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The password used to authenticate with</td>
</tr>
<tr>
<td>login_port</td>
<td>no</td>
<td>27017</td>
<td><ul></ul></td>
<td>The port to connect to</td>
</tr>
<tr>
<td>login_user</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The username used to authenticate with</td>
</tr>
<tr>
<td>password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The password to use for the user</td>
</tr>
<tr>
<td>roles</td>
<td>no</td>
<td>readWrite</td>
<td><ul></ul></td>
<td>The database user roles valid values are one or more of the following: read, 'readWrite', 'dbAdmin', 'userAdmin', 'clusterAdmin', 'readAnyDatabase', 'readWriteAnyDatabase', 'userAdminAnyDatabase', 'dbAdminAnyDatabase'This param requires mongodb 2.4+ and pymongo 2.5+ (added in Ansible 1.3)</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>The database user state</td>
</tr>
<tr>
<td>user</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The name of the user to add or remove</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
pymongo
</p><br><pre># Create 'burgers' database user with name 'bob' and password '12345'.
- mongodb_user: database=burgers name=bob password=12345 state=present

# Delete 'burgers' database user with name 'bob'.
- mongodb_user: database=burgers name=bob state=absent

# Define more users with various specific roles (if not defined, no roles is assigned, and the user will be added via pre mongo 2.2 style)
- mongodb_user: database=burgers name=ben password=12345 roles='read' state=present
- mongodb_user: database=burgers name=jim password=12345 roles='readWrite,dbAdmin,userAdmin' state=present
- mongodb_user: database=burgers name=joe password=12345 roles='readWriteAnyDatabase' state=present
</pre><h4>Notes</h4>
<p>Requires the pymongo Python package on the remote host, version 2.4.2+. This can be installed using pip or the OS package manager. @see http://api.mongodb.org/python/current/installation.html</p></div>
<div class="section" id="mysql-db">
<span id="id34"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id180">mysql_db</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#mysql-db" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.6.</span></p>
</div>
<p>Add or remove MySQL databases from a remote host.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>collation</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Collation mode</td>
</tr>
<tr>
<td>encoding</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Encoding mode</td>
</tr>
<tr>
<td>login_host</td>
<td>no</td>
<td>localhost</td>
<td><ul></ul></td>
<td>Host running the database</td>
</tr>
<tr>
<td>login_password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The password used to authenticate with</td>
</tr>
<tr>
<td>login_port</td>
<td>no</td>
<td>3306</td>
<td><ul></ul></td>
<td>Port of the MySQL server</td>
</tr>
<tr>
<td>login_unix_socket</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The path to a Unix domain socket for local connections</td>
</tr>
<tr>
<td>login_user</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The username used to authenticate with</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>name of the database to add or remove</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li><li>dump</li><li>import</li></ul></td>
<td>The database state</td>
</tr>
<tr>
<td>target</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Where to dump/get the <code>.sql</code> file</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
ConfigParser
</p><br><pre># Create a new database with name 'bobdata'
- mysql_db: name=bobdata state=present
</pre><h4>Notes</h4>
<p>Requires the MySQLdb Python package on the remote host. For Ubuntu, this is as easy as apt-get install python-mysqldb. (See <span class="module">apt</span>.)</p>
<p>Both <em>login_password</em> and <em>login_user</em> are required when you are passing credentials. If none are present, the module will attempt to read the credentials from <code>~/.my.cnf</code>, and finally fall back to using the MySQL default login of <code>root</code> with no password.</p></div>
<div class="section" id="mysql-replication">
<span id="id35"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id181">mysql_replication</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#mysql-replication" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.3.</span></p>
</div>
<p>Manages MySQL server replication, slave, master status get and change master host.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>login_host</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>mysql host to connect</td>
</tr>
<tr>
<td>login_password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>password to connect mysql host, if defined login_user also needed.</td>
</tr>
<tr>
<td>login_unix_socket</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>unix socket to connect mysql server</td>
</tr>
<tr>
<td>login_user</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>username to connect mysql host, if defined login_password also needed.</td>
</tr>
<tr>
<td>master_connect_retry</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>same as mysql variable</td>
</tr>
<tr>
<td>master_host</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>same as mysql variable</td>
</tr>
<tr>
<td>master_log_file</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>same as mysql variable</td>
</tr>
<tr>
<td>master_log_pos</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>same as mysql variable</td>
</tr>
<tr>
<td>master_password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>same as mysql variable</td>
</tr>
<tr>
<td>master_port</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>same as mysql variable</td>
</tr>
<tr>
<td>master_ssl</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>same as mysql variable</td>
</tr>
<tr>
<td>master_ssl_ca</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>same as mysql variable</td>
</tr>
<tr>
<td>master_ssl_capath</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>same as mysql variable</td>
</tr>
<tr>
<td>master_ssl_cert</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>same as mysql variable</td>
</tr>
<tr>
<td>master_ssl_cipher</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>same as mysql variable</td>
</tr>
<tr>
<td>master_ssl_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>same as mysql variable</td>
</tr>
<tr>
<td>master_user</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>same as mysql variable</td>
</tr>
<tr>
<td>mode</td>
<td>no</td>
<td>getslave</td>
<td><ul><li>getslave</li><li>getmaster</li><li>changemaster</li><li>stopslave</li><li>startslave</li></ul></td>
<td>module operating mode. Could be getslave (SHOW SLAVE STATUS), getmaster (SHOW MASTER STATUS), changemaster (CHANGE MASTER TO), startslave (START SLAVE), stopslave (STOP SLAVE)</td>
</tr>
<tr>
<td>relay_log_file</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>same as mysql variable</td>
</tr>
<tr>
<td>relay_log_pos</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>same as mysql variable</td>
</tr>
</tbody></table><br><pre># Stop mysql slave thread
- mysql_replication: mode=stopslave

# Get master binlog file name and binlog position
- mysql_replication: mode=getmaster

# Change master to master server 192.168.1.1 and use binary log 'mysql-bin.000009' with position 4578
- mysql_replication: mode=changemaster master_host=192.168.1.1 master_log_file=mysql-bin.000009 master_log_pos=4578
</pre></div>
<div class="section" id="mysql-user">
<span id="id36"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id182">mysql_user</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#mysql-user" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.6.</span></p>
</div>
<p>Adds or removes a user from a MySQL database.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>append_privs</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Append the privileges defined by priv to the existing ones for this user instead of overwriting existing ones. (added in Ansible 1.4)</td>
</tr>
<tr>
<td>check_implicit_admin</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Check if mysql allows login as root/nopassword before trying supplied credentials. (added in Ansible 1.3)</td>
</tr>
<tr>
<td>host</td>
<td>no</td>
<td>localhost</td>
<td><ul></ul></td>
<td>the 'host' part of the MySQL username</td>
</tr>
<tr>
<td>login_host</td>
<td>no</td>
<td>localhost</td>
<td><ul></ul></td>
<td>Host running the database</td>
</tr>
<tr>
<td>login_password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The password used to authenticate with</td>
</tr>
<tr>
<td>login_port</td>
<td>no</td>
<td>3306</td>
<td><ul></ul></td>
<td>Port of the MySQL server (added in Ansible 1.4)</td>
</tr>
<tr>
<td>login_unix_socket</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The path to a Unix domain socket for local connections</td>
</tr>
<tr>
<td>login_user</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The username used to authenticate with</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>name of the user (role) to add or remove</td>
</tr>
<tr>
<td>password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>set the user's password</td>
</tr>
<tr>
<td>priv</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>MySQL privileges string in the format: <code>db.table:priv1,priv2</code></td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Whether the user should exist. When <code>absent</code>, removes the user.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
ConfigParser
MySQLdb
</p><br><pre># Create database user with name 'bob' and password '12345' with all database privileges
- mysql_user: name=bob password=12345 priv=*.*:ALL state=present

# Ensure no user named 'sally' exists, also passing in the auth credentials.
- mysql_user: login_user=root login_password=123456 name=sally state=absent

# Example privileges string format
mydb.*:INSERT,UPDATE/anotherdb.*:SELECT/yetanotherdb.*:ALL

# Example using login_unix_socket to connect to server
- mysql_user: name=root password=abc123 login_unix_socket=/var/run/mysqld/mysqld.sock

# Example .my.cnf file for setting the root password
# Note: don't use quotes around the password, because the mysql_user module
# will include them in the password but the mysql client will not

[client]
user=root
password=n&lt;_665{vS43y
</pre><h4>Notes</h4>
<p>Requires the MySQLdb Python package on the remote host. For Ubuntu, this is as easy as apt-get install python-mysqldb.</p>
<p>Both <code>login_password</code> and <code>login_username</code> are required when you are passing credentials. If none are present, the module will attempt to read the credentials from <code>~/.my.cnf</code>, and finally fall back to using the MySQL default login of 'root' with no password.</p>
<p>MySQL server installs with default login_user of 'root' and no password. To secure this user as part of an idempotent playbook, you must create at least two tasks: the first must change the root user's password, without providing any login_user/login_password details. The second must drop a ~/.my.cnf file containing the new root credentials. Subsequent runs of the playbook will then succeed by reading the new credentials from the file.</p></div>
<div class="section" id="mysql-variables">
<span id="id37"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id183">mysql_variables</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#mysql-variables" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.3.</span></p>
</div>
<p>Query / Set MySQL variables</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>login_host</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>mysql host to connect</td>
</tr>
<tr>
<td>login_password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>password to connect mysql host, if defined login_user also needed.</td>
</tr>
<tr>
<td>login_unix_socket</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>unix socket to connect mysql server</td>
</tr>
<tr>
<td>login_user</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>username to connect mysql host, if defined login_password also needed.</td>
</tr>
<tr>
<td>value</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>If set, then sets variable value to this</td>
</tr>
<tr>
<td>variable</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Variable name to operate</td>
</tr>
</tbody></table><br><pre># Check for sync_binary_log setting
- mysql_variables: variable=sync_binary_log

# Set read_only variable to 1
- mysql_variables: variable=read_only value=1
</pre></div>
<div class="section" id="postgresql-db">
<span id="id38"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id184">postgresql_db</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#postgresql-db" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.6.</span></p>
</div>
<p>Add or remove PostgreSQL databases from a remote host.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>encoding</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Encoding of the database</td>
</tr>
<tr>
<td>lc_collate</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Collation order (LC_COLLATE) to use in the database. Must match collation order of template database unless <code>template0</code> is used as template.</td>
</tr>
<tr>
<td>lc_ctype</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Character classification (LC_CTYPE) to use in the database (e.g. lower, upper, ...) Must match LC_CTYPE of template database unless <code>template0</code> is used as template.</td>
</tr>
<tr>
<td>login_host</td>
<td>no</td>
<td>localhost</td>
<td><ul></ul></td>
<td>Host running the database</td>
</tr>
<tr>
<td>login_password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The password used to authenticate with</td>
</tr>
<tr>
<td>login_user</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The username used to authenticate with</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>name of the database to add or remove</td>
</tr>
<tr>
<td>owner</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Name of the role to set as owner of the database</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>The database state</td>
</tr>
<tr>
<td>template</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Template used to create the database</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
psycopg2
</p><br><pre># Create a new database with name "acme"
- postgresql_db: name=acme

# Create a new database with name "acme" and specific encoding and locale
# settings. If a template different from "template0" is specified, encoding
# and locale settings must match those of the template.
- postgresql_db: name=acme
                 encoding='UTF-8'
                 lc_collate='de_DE.UTF-8'
                 lc_ctype='de_DE.UTF-8'
                 template='template0'
</pre><h4>Notes</h4>
<p>The default authentication assumes that you are either logging in as or sudo'ing to the <code>postgres</code> account on the host.</p>
<p>This module uses <em>psycopg2</em>, a Python PostgreSQL database adapter. You must ensure that psycopg2 is installed on the host before using this module. If the remote host is the PostgreSQL server (which is the default case), then PostgreSQL must also be installed on the remote host. For Ubuntu-based systems, install the <code>postgresql</code>, <code>libpq-dev</code>, and <code>python-psycopg2</code> packages on the remote host before using this module.</p></div>
<div class="section" id="postgresql-privs">
<span id="id39"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id185">postgresql_privs</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#postgresql-privs" title="Permalink to this headline">¶</a></h3>
<p>Grant or revoke privileges on PostgreSQL database objects.
This module is basically a wrapper around most of the functionality of PostgreSQL’s GRANT and REVOKE statements with detection of changes (GRANT/REVOKE <em>privs</em> ON <em>type</em> <em>objs</em> TO/FROM <em>roles</em>)</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>database</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Name of database to connect to.Alias: <em>db</em></td>
</tr>
<tr>
<td>grant_option</td>
<td>no</td>
<td></td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Whether <code>role</code> may grant/revoke the specified privileges/group memberships to others.Set to <code>no</code> to revoke GRANT OPTION, leave unspecified to make no changes.<em>grant_option</em> only has an effect if <em>state</em> is <code>present</code>.Alias: <em>admin_option</em></td>
</tr>
<tr>
<td>host</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Database host address. If unspecified, connect via Unix socket.Alias: <em>login_host</em></td>
</tr>
<tr>
<td>login</td>
<td>no</td>
<td>postgres</td>
<td><ul></ul></td>
<td>The username to authenticate with.Alias: <em>login_user</em></td>
</tr>
<tr>
<td>objs</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Comma separated list of database objects to set privileges on.If <em>type</em> is <code>table</code> or <code>sequence</code>, the special value <code>ALL_IN_SCHEMA</code> can be provided instead to specify all database objects of type <em>type</em> in the schema specified via <em>schema</em>. (This also works with PostgreSQL &lt; 9.0.)If <em>type</em> is <code>database</code>, this parameter can be omitted, in which case privileges are set for the database specified via <em>database</em>.If <em>type</em> is <em>function</em>, colons (":") in object names will be replaced with commas (needed to specify function signatures, see examples)Alias: <em>obj</em></td>
</tr>
<tr>
<td>password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The password to authenticate with.Alias: <em>login_password</em>)</td>
</tr>
<tr>
<td>port</td>
<td>no</td>
<td>5432</td>
<td><ul></ul></td>
<td>Database port to connect to.</td>
</tr>
<tr>
<td>privs</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Comma separated list of privileges to grant/revoke.Alias: <em>priv</em></td>
</tr>
<tr>
<td>roles</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Comma separated list of role (user/group) names to set permissions for.The special value <code>PUBLIC</code> can be provided instead to set permissions for the implicitly defined PUBLIC group.Alias: <em>role</em></td>
</tr>
<tr>
<td>schema</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Schema that contains the database objects specified via <em>objs</em>.May only be provided if <em>type</em> is <code>table</code>, <code>sequence</code> or <code>function</code>. Defaults to <code>public</code> in these cases.</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>If <code>present</code>, the specified privileges are granted, if <code>absent</code> they are revoked.</td>
</tr>
<tr>
<td>type</td>
<td>no</td>
<td>table</td>
<td><ul><li>table</li><li>sequence</li><li>function</li><li>database</li><li>schema</li><li>language</li><li>tablespace</li><li>group</li></ul></td>
<td>Type of database object to set privileges on.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
psycopg2
</p><br><pre># On database "library":
# GRANT SELECT, INSERT, UPDATE ON TABLE public.books, public.authors
# TO librarian, reader WITH GRANT OPTION
- postgresql_privs: &gt;
    database=library
    state=present
    privs=SELECT,INSERT,UPDATE
    type=table
    objs=books,authors
    schema=public
    roles=librarian,reader
    grant_option=yes

# Same as above leveraging default values:
- postgresql_privs: &gt;
    db=library
    privs=SELECT,INSERT,UPDATE
    objs=books,authors
    roles=librarian,reader
    grant_option=yes

# REVOKE GRANT OPTION FOR INSERT ON TABLE books FROM reader
# Note that role "reader" will be *granted* INSERT privilege itself if this
# isn't already the case (since state=present).
- postgresql_privs: &gt;
    db=library
    state=present
    priv=INSERT
    obj=books
    role=reader
    grant_option=no

# REVOKE INSERT, UPDATE ON ALL TABLES IN SCHEMA public FROM reader
# "public" is the default schema. This also works for PostgreSQL 8.x.
- postgresql_privs: &gt;
    db=library
    state=absent
    privs=INSERT,UPDATE
    objs=ALL_IN_SCHEMA
    role=reader

# GRANT ALL PRIVILEGES ON SCHEMA public, math TO librarian
- postgresql_privs: &gt;
    db=library
    privs=ALL
    type=schema
    objs=public,math
    role=librarian

# GRANT ALL PRIVILEGES ON FUNCTION math.add(int, int) TO librarian, reader
# Note the separation of arguments with colons.
- postgresql_privs: &gt;
    db=library
    privs=ALL
    type=function
    obj=add(int:int)
    schema=math
    roles=librarian,reader

# GRANT librarian, reader TO alice, bob WITH ADMIN OPTION
# Note that group role memberships apply cluster-wide and therefore are not
# restricted to database "library" here.
- postgresql_privs: &gt;
    db=library
    type=group
    objs=librarian,reader
    roles=alice,bob
    admin_option=yes

# GRANT ALL PRIVILEGES ON DATABASE library TO librarian
# Note that here "db=postgres" specifies the database to connect to, not the
# database to grant privileges on (which is specified via the "objs" param)
- postgresql_privs: &gt;
    db=postgres
    privs=ALL
    type=database
    obj=library
    role=librarian

# GRANT ALL PRIVILEGES ON DATABASE library TO librarian
# If objs is omitted for type "database", it defaults to the database
# to which the connection is established
- postgresql_privs: &gt;
    db=library
    privs=ALL
    type=database
    role=librarian
</pre><h4>Notes</h4>
<p>Default authentication assumes that postgresql_privs is run by the <code>postgres</code> user on the remote host. (Ansible's <code>user</code> or <code>sudo-user</code>).</p>
<p>This module requires Python package <em>psycopg2</em> to be installed on the remote host. In the default case of the remote host also being the PostgreSQL server, PostgreSQL has to be installed there as well, obviously. For Debian/Ubuntu-based systems, install packages <em>postgresql</em> and <em>python-psycopg2</em>.</p>
<p>Parameters that accept comma separated lists (<em>privs</em>, <em>objs</em>, <em>roles</em>) have singular alias names (<em>priv</em>, <em>obj</em>, <em>role</em>).</p>
<p>To revoke only <code>GRANT OPTION</code> for a specific object, set <em>state</em> to <code>present</code> and <em>grant_option</em> to <code>no</code> (see examples).</p>
<p>Note that when revoking privileges from a role R, this role may still have access via privileges granted to any role R is a member of including <code>PUBLIC</code>.</p>
<p>Note that when revoking privileges from a role R, you do so as the user specified via <em>login</em>. If R has been granted the same privileges by another user also, R can still access database objects via these privileges.</p>
<p>When revoking privileges, <code>RESTRICT</code> is assumed (see PostgreSQL docs).</p></div>
<div class="section" id="postgresql-user">
<span id="id40"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id186">postgresql_user</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#postgresql-user" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.6.</span></p>
</div>
<p>Add or remove PostgreSQL users (roles) from a remote host and, optionally, grant the users access to an existing database or tables.
The fundamental function of the module is to create, or delete, roles from a PostgreSQL cluster. Privilege assignment, or removal, is an optional step, which works on one database at a time. This allows for the module to be called several times in the same module to modify the permissions on different databases, or to grant permissions to already existing users.
A user cannot be removed until all the privileges have been stripped from the user. In such situation, if the module tries to remove the user it will fail. To avoid this from happening the fail_on_user option signals the module to try to remove the user, but if not possible keep going; the module will report if changes happened and separately if the user was removed or not.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>db</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>name of database where permissions will be granted</td>
</tr>
<tr>
<td>fail_on_user</td>
<td>no</td>
<td>yes</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>if <code>yes</code>, fail when user can't be removed. Otherwise just log and continue</td>
</tr>
<tr>
<td>login_host</td>
<td>no</td>
<td>localhost</td>
<td><ul></ul></td>
<td>Host running PostgreSQL.</td>
</tr>
<tr>
<td>login_password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Password used to authenticate with PostgreSQL</td>
</tr>
<tr>
<td>login_user</td>
<td>no</td>
<td>postgres</td>
<td><ul></ul></td>
<td>User (role) used to authenticate with PostgreSQL</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>name of the user (role) to add or remove</td>
</tr>
<tr>
<td>password</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>set the user's password</td>
</tr>
<tr>
<td>priv</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>PostgreSQL privileges string in the format: <code>table:priv1,priv2</code></td>
</tr>
<tr>
<td>role_attr_flags</td>
<td>no</td>
<td></td>
<td><ul><li>[NO]SUPERUSER</li><li>[NO]CREATEROLE</li><li>[NO]CREATEUSER</li><li>[NO]CREATEDB</li><li>[NO]INHERIT</li><li>[NO]LOGIN</li><li>[NO]REPLICATION</li></ul></td>
<td>PostgreSQL role attributes string in the format: CREATEDB,CREATEROLE,SUPERUSER</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>The user (role) state</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
psycopg2
</p><br><pre># Create django user and grant access to database and products table
- postgresql_user: db=acme user=django password=ceec4eif7ya priv=CONNECT/products:ALL

# Create rails user, grant privilege to create other databases and demote rails from super user status
- postgresql_user: user=rails password=secret role_attr_flags=CREATEDB,NOSUPERUSER

# Remove test user privileges from acme
- postgresql_user: db=acme user=test priv=ALL/products:ALL state=absent fail_on_user=no

# Remove test user from test database and the cluster
- postgresql_user: db=test user=test priv=ALL state=absent

# Example privileges string format
INSERT,UPDATE/table:SELECT/anothertable:ALL
</pre><h4>Notes</h4>
<p>The default authentication assumes that you are either logging in as or sudo'ing to the postgres account on the host.</p>
<p>This module uses psycopg2, a Python PostgreSQL database adapter. You must ensure that psycopg2 is installed on the host before using this module. If the remote host is the PostgreSQL server (which is the default case), then PostgreSQL must also be installed on the remote host. For Ubuntu-based systems, install the postgresql, libpq-dev, and python-psycopg2 packages on the remote host before using this module.</p>
<p>If you specify PUBLIC as the user, then the privilege changes will apply to all users. You may not specify password or role_attr_flags when the PUBLIC user is specified.</p></div>
<div class="section" id="redis">
<span id="id41"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id187">redis</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#redis" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.3.</span></p>
</div>
<p>Unified utility to interact with redis instances. ‘slave’ Sets a redis instance in slave or master mode. ‘flush’ Flushes all the instance or a specified db.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>command</td>
<td>yes</td>
<td></td>
<td><ul><li>slave</li><li>flush</li></ul></td>
<td>The selected redis command</td>
</tr>
<tr>
<td>db</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The database to flush (used in db mode) [flush command]</td>
</tr>
<tr>
<td>flush_mode</td>
<td>no</td>
<td>all</td>
<td><ul><li>all</li><li>db</li></ul></td>
<td>Type of flush (all the dbs in a redis instance or a specific one) [flush command]</td>
</tr>
<tr>
<td>login_host</td>
<td>no</td>
<td>localhost</td>
<td><ul></ul></td>
<td>The host running the database</td>
</tr>
<tr>
<td>login_password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The password used to authenticate with (usually not used)</td>
</tr>
<tr>
<td>login_port</td>
<td>no</td>
<td>6379</td>
<td><ul></ul></td>
<td>The port to connect to</td>
</tr>
<tr>
<td>master_host</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The host of the master instance [slave command]</td>
</tr>
<tr>
<td>master_port</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The port of the master instance [slave command]</td>
</tr>
<tr>
<td>slave_mode</td>
<td>no</td>
<td>slave</td>
<td><ul><li>master</li><li>slave</li></ul></td>
<td>the mode of the redis instance [slave command]</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
redis
</p><br><pre># Set local redis instance to be slave of melee.island on port 6377
- redis: command=slave master_host=melee.island master_port=6377

# Deactivate slave mode
- redis: command=slave slave_mode=master

# Flush all the redis db
- redis: command=flush flush_mode=all

# Flush only one db in a redis instance
- redis: command=flush db=1 flush_mode=db
</pre><h4>Notes</h4>
<p>Requires the redis-py Python package on the remote host. You can install it with pip (pip install redis) or with a package manager. https://github.com/andymccurdy/redis-py</p>
<p>If the redis master instance we are making slave of is password protected this needs to be in the redis.conf in the masterauth variable</p></div>
<div class="section" id="riak">
<span id="id42"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id188">riak</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#riak" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>This module can be used to join nodes to a cluster, check the status of the cluster.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>command</td>
<td>no</td>
<td></td>
<td><ul><li>ping</li><li>kv_test</li><li>join</li><li>plan</li><li>commit</li></ul></td>
<td>The command you would like to perform against the cluster.</td>
</tr>
<tr>
<td>config_dir</td>
<td>no</td>
<td>/etc/riak</td>
<td><ul></ul></td>
<td>The path to the riak configuration directory</td>
</tr>
<tr>
<td>http_conn</td>
<td>no</td>
<td>127.0.0.1:8098</td>
<td><ul></ul></td>
<td>The ip address and port that is listening for Riak HTTP queries</td>
</tr>
<tr>
<td>target_node</td>
<td>no</td>
<td>riak@127.0.0.1<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script></td>
<td><ul></ul></td>
<td>The target node for certain operations (join, ping)</td>
</tr>
<tr>
<td>wait_for_handoffs</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Number of seconds to wait for handoffs to complete.</td>
</tr>
<tr>
<td>wait_for_ring</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Number of seconds to wait for all nodes to agree on the ring.</td>
</tr>
<tr>
<td>wait_for_service</td>
<td>no</td>
<td>None</td>
<td><ul><li>kv</li></ul></td>
<td>Waits for a riak service to come online before continuing.</td>
</tr>
</tbody></table><br><pre># Join's a Riak node to another node
- riak: command=join target_node=riak@10.1.1.1<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>

# Wait for handoffs to finish.  Use with async and poll.
- riak: wait_for_handoffs=yes

# Wait for riak_kv service to startup
- riak: wait_for_service=kv
</pre></div>
</div>
<div class="section" id="files">
<h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id189">Files</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#files" title="Permalink to this headline">¶</a></h2>
<div class="section" id="assemble">
<span id="id43"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id190">assemble</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#assemble" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.5.</span></p>
</div>
<p>Assembles a configuration file from fragments. Often a particular program will take a single configuration file and does not support a <tt class="docutils literal"><span class="pre">conf.d</span></tt> style structure where it is easy to build up the configuration from multiple sources. <tt class="docutils literal"><span class="pre">assemble</span></tt> will take a directory of files that have already been transferred to the system, and concatenate them together to produce a destination file. Files are assembled in string sorting order. Puppet calls this idea <em>fragments</em>.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>backup</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Create a backup file (if <code>yes</code>), including the timestamp information so you can get the original file back if you somehow clobbered it incorrectly.</td>
</tr>
<tr>
<td>delimiter</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>A delimiter to seperate the file contents. (added in Ansible 1.4)</td>
</tr>
<tr>
<td>dest</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>A file to create using the concatenation of all of the source files.</td>
</tr>
<tr>
<td>others</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>all arguments accepted by the <span class="module">file</span> module also work here</td>
</tr>
<tr>
<td>src</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>An already existing directory full of source files.</td>
</tr>
</tbody></table><br><pre># Example from Ansible Playbooks
- assemble: src=/etc/someapp/fragments dest=/etc/someapp/someapp.conf

# When a delimiter is specified, it will be inserted in between each fragment
- assemble: src=/etc/someapp/fragments dest=/etc/someapp/someapp.conf delimiter='### START FRAGMENT ###'
</pre></div>
<div class="section" id="copy">
<span id="id44"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id191">copy</a><a class="headerlink" href="./modules_files/modules.html" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">copy</span></tt> module copies a file on the local box to remote locations.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>backup</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Create a backup file including the timestamp information so you can get the original file back if you somehow clobbered it incorrectly. (added in Ansible 0.7)</td>
</tr>
<tr>
<td>content</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>When used instead of 'src', sets the contents of a file directly to the specified value. (added in Ansible 1.1)</td>
</tr>
<tr>
<td>dest</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Remote absolute path where the file should be copied to.</td>
</tr>
<tr>
<td>force</td>
<td>no</td>
<td>yes</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>the default is <code>yes</code>, which will replace the remote file when contents are different than the source. If <code>no</code>, the file will only be transferred if the destination does not exist. (added in Ansible 1.1)</td>
</tr>
<tr>
<td>others</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>all arguments accepted by the <span class="module">file</span> module also work here</td>
</tr>
<tr>
<td>src</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Local path to a file to copy to the remote server; can be absolute or relative.</td>
</tr>
<tr>
<td>validate</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The validation command to run before copying into place. The path to the file to validate is passed in via '%s' which must be present as in the visudo example below. (added in Ansible 1.2)</td>
</tr>
</tbody></table><br><pre># Example from Ansible Playbooks
- copy: src=/srv/myfiles/foo.conf dest=/etc/foo.conf owner=foo group=foo mode=0644

# Copy a new "ntp.conf file into place, backing up the original if it differs from the copied version
- copy: src=/mine/ntp.conf dest=/etc/ntp.conf owner=root group=root mode=644 backup=yes

# Copy a new "sudoers" file into place, after passing validation with visudo
- copy: src=/mine/sudoers dest=/etc/sudoers validate='visudo -cf %s'
</pre><h4>Notes</h4>
<p>The "copy" module can't be used to recursively copy directory structures to the target machine. Please see the "Delegation" section of the Advanced Playbooks documentation for a better approach to recursive copies.</p></div>
<div class="section" id="fetch">
<span id="id45"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id192">fetch</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#fetch" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.2.</span></p>
</div>
<p>This module works like <tt class="docutils literal"><span class="pre">copy</span></tt>, but in reverse. It is used for fetching files from remote machines and storing them locally in a file tree, organized by hostname. Note that this module is written to transfer log files that might not be present, so a missing remote file won’t be an error unless fail_on_missing is set to ‘yes’.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>dest</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>A directory to save the file into. For example, if the <em>dest</em> directory is <code>/backup</code> a <em>src</em> file named <code>/etc/profile</code> on host <code>host.example.com</code>, would be saved into <code>/backup/host.example.com/etc/profile</code></td>
</tr>
<tr>
<td>fail_on_missing</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Makes it fails when the source file is missing. (added in Ansible 1.1)</td>
</tr>
<tr>
<td>flat</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Allows you to override the default behavior of prepending hostname/path/to/file to the destination. If dest ends with '/', it will use the basename of the source file, similar to the copy module. Obviously this is only handy if the filenames are unique. (added in Ansible 1.2)</td>
</tr>
<tr>
<td>src</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The file on the remote system to fetch. This <em>must</em> be a file, not a directory. Recursive fetching may be supported in a later release.</td>
</tr>
<tr>
<td>validate_md5</td>
<td>no</td>
<td>yes</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Verify that the source and destination md5sums match after the files are fetched. (added in Ansible 1.4)</td>
</tr>
</tbody></table><br><pre># Store file into /tmp/fetched/host.example.com/tmp/somefile
- fetch: src=/tmp/somefile dest=/tmp/fetched

# Specifying a path directly
- fetch: src=/tmp/somefile dest=/tmp/prefix-{{ ansible_hostname }} flat=yes

# Specifying a destination path
- fetch: src=/tmp/uniquefile dest=/tmp/special/ flat=yes

# Storing in a path relative to the playbook
- fetch: src=/tmp/uniquefile dest=special/prefix-{{ ansible_hostname }} flat=yes
</pre></div>
<div class="section" id="file">
<span id="id46"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id193">file</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#file" title="Permalink to this headline">¶</a></h3>
<p>Sets attributes of files, symlinks, and directories, or removes files/symlinks/directories. Many other modules support the same options as the <tt class="docutils literal"><span class="pre">file</span></tt> module - including <tt class="docutils literal"><span class="pre">copy</span></tt>, <tt class="docutils literal"><span class="pre">template</span></tt>, and <tt class="docutils literal"><span class="pre">assemble</span></tt>.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>force</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>force the creation of the symlinks in two cases: the source file does not exist (but will appear later); the destination exists and a file (so, we need to unlink the "path" file and create symlink to the "src" file in place of it).</td>
</tr>
<tr>
<td>group</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>name of the group that should own the file/directory, as would be fed to <em>chown</em></td>
</tr>
<tr>
<td>mode</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>mode the file or directory should be, such as 0644 as would be fed to <em>chmod</em></td>
</tr>
<tr>
<td>owner</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>name of the user that should own the file/directory, as would be fed to <em>chown</em></td>
</tr>
<tr>
<td>path</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>defines the file being managed, unless when used with <code>state=link</code>, and then sets the destination to create a symbolic link to using <em>src</em>. Aliases: <em>dest</em>, <em>name</em></td>
</tr>
<tr>
<td>recurse</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>recursively set the specified file attributes (applies only to state=directory) (added in Ansible 1.1)</td>
</tr>
<tr>
<td>selevel</td>
<td>no</td>
<td>s0</td>
<td><ul></ul></td>
<td>level part of the SELinux file context. This is the MLS/MCS attribute, sometimes known as the <code>range</code>. <code>_default</code> feature works as for <em>seuser</em>.</td>
</tr>
<tr>
<td>serole</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>role part of SELinux file context, <code>_default</code> feature works as for <em>seuser</em>.</td>
</tr>
<tr>
<td>setype</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>type part of SELinux file context, <code>_default</code> feature works as for <em>seuser</em>.</td>
</tr>
<tr>
<td>seuser</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>user part of SELinux file context. Will default to system policy, if applicable. If set to <code>_default</code>, it will use the <code>user</code> portion of the policy if available</td>
</tr>
<tr>
<td>src</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>path of the file to link to (applies only to <code>state=link</code>).</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>file</td>
<td><ul><li>file</li><li>link</li><li>directory</li><li>hard</li><li>touch</li><li>absent</li></ul></td>
<td>If <code>directory</code>, all immediate subdirectories will be created if they do not exist. If <code>file</code>, the file will NOT be created if it does not exist, see the <span class="module">copy</span> or <span class="module">template</span> module if you want that behavior. If <code>link</code>, the symbolic link will be created or changed. Use <code>hard</code> for hardlinks. If <code>absent</code>, directories will be recursively deleted, and files or symlinks will be unlinked. If <code>touch</code> (new in 1.4), an empty file will be created if the c(dest) does not exist, while an existing file or directory will receive updated file access and modification times (similar to the way `touch` works from the command line).</td>
</tr>
</tbody></table><br><pre>- file: path=/etc/foo.conf owner=foo group=foo mode=0644
- file: src=/file/to/link/to dest=/path/to/symlink owner=foo group=foo state=link
</pre><h4>Notes</h4>
<p>See also <span class="module">copy</span>, <span class="module">template</span>, <span class="module">assemble</span></p></div>
<div class="section" id="ini-file">
<span id="id47"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id194">ini_file</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#ini-file" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.9.</span></p>
</div>
<p>Manage (add, remove, change) individual settings in an INI-style file without having to manage the file as a whole with, say, <tt class="docutils literal"><span class="pre">template</span></tt> or <tt class="docutils literal"><span class="pre">assemble</span></tt>. Adds missing sections if they don’t exist.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>backup</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Create a backup file including the timestamp information so you can get the original file back if you somehow clobbered it incorrectly.</td>
</tr>
<tr>
<td>dest</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Path to the INI-style file; this file is created if required</td>
</tr>
<tr>
<td>option</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>if set (required for changing a <em>value</em>), this is the name of the option.May be omitted if adding/removing a whole <em>section</em>.</td>
</tr>
<tr>
<td>others</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>all arguments accepted by the <span class="module">file</span> module also work here</td>
</tr>
<tr>
<td>section</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Section name in INI file. This is added if <code>state=present</code> automatically when a single value is being set.</td>
</tr>
<tr>
<td>value</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>the string value to be associated with an <em>option</em>. May be omitted when removing an <em>option</em>.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
ConfigParser
</p><br><pre># Ensure "fav=lemonade is in section "[drinks]" in specified file
- ini_file: dest=/etc/conf section=drinks option=fav value=lemonade mode=0600 backup=yes

- ini_file: dest=/etc/anotherconf
            section=drinks
            option=temperature
            value=cold
            backup=yes
</pre><h4>Notes</h4>
<p>While it is possible to add an <em>option</em> without specifying a <em>value</em>, this makes no sense.</p>
<p>A section named <code>default</code> cannot be added by the module, but if it exists, individual options within the section can be updated. (This is a limitation of Python's <em>ConfigParser</em>.) Either use <span class="module">template</span> to create a base INI file with a <code>[default]</code> section, or use <span class="module">lineinfile</span> to add the missing line.</p></div>
<div class="section" id="lineinfile">
<span id="id48"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id195">lineinfile</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#lineinfile" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.7.</span></p>
</div>
<p>This module will search a file for a line, and ensure that it is present or absent.
This is primarily useful when you want to change a single line in a file only. For other cases, see the <tt class="docutils literal"><span class="pre">copy</span></tt> or <tt class="docutils literal"><span class="pre">template</span></tt> modules.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>backrefs</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Used with <code>state=present</code>. If set, line can contain backreferences (both positional and named) that will get populated if the regexp matches. This flag changes the operation of the module slightly; insertbefore and insertafter will be ignored, and if the regexp doesn't match anywhere in the file, the file will be left unchanged. If the regexp does match, the last matching line will be replaced by the expanded line parameter. (added in Ansible 1.1)</td>
</tr>
<tr>
<td>backup</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Create a backup file including the timestamp information so you can get the original file back if you somehow clobbered it incorrectly.</td>
</tr>
<tr>
<td>create</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Used with <code>state=present</code>. If specified, the file will be created if it does not already exist. By default it will fail if the file is missing.</td>
</tr>
<tr>
<td>dest</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The file to modify.</td>
</tr>
<tr>
<td>insertafter</td>
<td>no</td>
<td>EOF</td>
<td><ul><li>EOF</li><li>*regex*</li></ul></td>
<td>Used with <code>state=present</code>. If specified, the line will be inserted after the specified regular expression. A special value is available; <code>EOF</code> for inserting the line at the end of the file. May not be used with backrefs.</td>
</tr>
<tr>
<td>insertbefore</td>
<td>no</td>
<td></td>
<td><ul><li>BOF</li><li>*regex*</li></ul></td>
<td>Used with <code>state=present</code>. If specified, the line will be inserted before the specified regular expression. A value is available; <code>BOF</code> for inserting the line at the beginning of the file. May not be used with backrefs. (added in Ansible 1.1)</td>
</tr>
<tr>
<td>line</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Required for <code>state=present</code>. The line to insert/replace into the file. If backrefs is set, may contain backreferences that will get expanded with the regexp capture groups if the regexp matches. The backreferences should be double escaped (see examples).</td>
</tr>
<tr>
<td>others</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>All arguments accepted by the <span class="module">file</span> module also work here.</td>
</tr>
<tr>
<td>regexp</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The regular expression to look for in every line of the file. For <code>state=present</code>, the pattern to replace if found; only the last line found will be replaced. For <code>state=absent</code>, the pattern of the line to remove. Uses Python regular expressions; see <a href="http://docs.python.org/2/library/re.html">http://docs.python.org/2/library/re.html</a>.</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Whether the line should be there or not.</td>
</tr>
</tbody></table><br><pre>- lineinfile: dest=/etc/selinux/config regexp=^SELINUX= line=SELINUX=disabled

- lineinfile: dest=/etc/sudoers state=absent regexp="^%wheel"

- lineinfile: dest=/etc/hosts regexp='^127\.0\.0\.1' line='127.0.0.1 localhost' owner=root group=root mode=0644

- lineinfile: dest=/etc/httpd/conf/httpd.conf regexp="^Listen " insertafter="^#Listen " line="Listen 8080"

- lineinfile: dest=/etc/services regexp="^# port for http" insertbefore="^www.*80/tcp" line="# port for http by default"

# Fully quoted because of the ': ' on the line. See the Gotchas in the YAML docs.
- lineinfile: "dest=/etc/sudoers state=present regexp='^%wheel' line='%wheel ALL=(ALL) NOPASSWD: ALL'"

- lineinfile: dest=/opt/jboss-as/bin/standalone.conf regexp='^(.*)Xms(\d+)m(.*)$' line='\1Xms${xms}m\3' backrefs=yes
</pre></div>
<div class="section" id="stat">
<span id="id49"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id196">stat</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#stat" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.3.</span></p>
</div>
<p>Retrieves facts for a file similar to the linux/unix ‘stat’ command.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>follow</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Whether to follow symlinks</td>
</tr>
<tr>
<td>path</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The full path of the file/object to get the facts of</td>
</tr>
</tbody></table><br><pre># Obtain the stats of /etc/foo.conf, and check that the file still belongs
# to 'root'. Fail otherwise.
- stat: path=/etc/foo.conf
  register: st
- fail: msg="Whoops! file ownership has changed"
  when: st.stat.pw_name != 'root'

# Determine if a path exists and is a directory.  Note we need to test
# both that p.stat.isdir actually exists, and also that it's set to true.
- stat: path=/path/to/something
  register: p
- debug: msg="Path exists and is a directory"
  when: p.stat.isdir is defined and p.stat.isdir == true
</pre></div>
<div class="section" id="template">
<span id="id50"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id197">template</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#template" title="Permalink to this headline">¶</a></h3>
<p>Templates are processed by the Jinja2 templating language (<a class="reference external" href="http://jinja.pocoo.org/docs/">http://jinja.pocoo.org/docs/</a>) - documentation on the template formatting can be found in the Template Designer Documentation (<a class="reference external" href="http://jinja.pocoo.org/docs/templates/">http://jinja.pocoo.org/docs/templates/</a>).
Six additional variables can be used in templates: <tt class="docutils literal"><span class="pre">ansible_managed</span></tt> (configurable via the <tt class="docutils literal"><span class="pre">defaults</span></tt> section of <tt class="docutils literal"><span class="pre">ansible.cfg</span></tt>) contains a string which can be used to describe the template name, host, modification time of the template file and the owner uid, <tt class="docutils literal"><span class="pre">template_host</span></tt> contains the node name of the template’s machine, <tt class="docutils literal"><span class="pre">template_uid</span></tt> the owner, <tt class="docutils literal"><span class="pre">template_path</span></tt> the absolute path of the template, <tt class="docutils literal"><span class="pre">template_fullpath</span></tt> is the absolute path of the template, and <tt class="docutils literal"><span class="pre">template_run_date</span></tt> is the date that the template was rendered.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>backup</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Create a backup file including the timestamp information so you can get the original file back if you somehow clobbered it incorrectly.</td>
</tr>
<tr>
<td>dest</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Location to render the template to on the remote machine.</td>
</tr>
<tr>
<td>others</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>all arguments accepted by the <span class="module">file</span> module also work here</td>
</tr>
<tr>
<td>src</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Path of a Jinja2 formatted template on the local server. This can be a relative or absolute path.</td>
</tr>
<tr>
<td>validate</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>validation to run before copying into place (added in Ansible 1.2)</td>
</tr>
</tbody></table><br><pre># Example from Ansible Playbooks
- template: src=/mytemplates/foo.j2 dest=/etc/file.conf owner=bin group=wheel mode=0644

# Copy a new "sudoers file into place, after passing validation with visudo
- action: template src=/mine/sudoers dest=/etc/sudoers validate='visudo -cf %s'
</pre><h4>Notes</h4>
<p>Since Ansible version 0.9, templates are loaded with <code>trim_blocks=True</code>.</p>
<p>You can override jinja2 settings by adding a special header to template file. i.e. <code>#jinja2: trim_blocks: False</code></p></div>
<div class="section" id="xattr">
<span id="id51"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id198">xattr</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#xattr" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.3.</span></p>
</div>
<p>Manages filesystem user defined extended attributes, requires that they are enabled on the target filesystem and that the setfattr/getfattr utilities are present.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>follow</td>
<td>no</td>
<td>True</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>if yes, dereferences symlinks and sets/gets attributes on symlink target, otherwise acts on symlink itself.</td>
</tr>
<tr>
<td>key</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The name of a specific Extended attribute key to set/retrieve</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td>None</td>
<td><ul></ul></td>
<td>The full path of the file/object to get the facts of</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>get</td>
<td><ul><li>read</li><li>present</li><li>all</li><li>keys</li><li>absent</li></ul></td>
<td>defines which state you want to do. <code>read</code> retrieves the current value for a <code>key</code> (default) <code>present</code> sets <code>name</code> to <code>value</code>, default if value is set <code>all</code> dumps all data <code>keys</code> retrieves all keys <code>absent</code> deletes the key</td>
</tr>
<tr>
<td>value</td>
<td>no</td>
<td>None</td>
<td><ul></ul></td>
<td>The value to set the named name/key to, it automatically sets the <code>state</code> to 'set'</td>
</tr>
</tbody></table><br><pre># Obtain the extended attributes  of /etc/foo.conf
- xattr: name=/etc/foo.conf

# Sets the key 'foo' to value 'bar'
- xattr: path=/etc/foo.conf key=user.foo value=bar

# Removes the key 'foo'
- xattr: name=/etc/foo.conf key=user.foo state=absent
</pre></div>
</div>
<div class="section" id="internal">
<h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id199">Internal</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#internal" title="Permalink to this headline">¶</a></h2>
<div class="section" id="async-status">
<span id="id52"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id200">async_status</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#async-status" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.5.</span></p>
</div>
<p>This module gets the status of an asynchronous task. See: <a class="reference external" href="http://www.ansibleworks.com/docs/playbooks2.html#asynchronous-actions-and-polling">http://www.ansibleworks.com/docs/playbooks2.html#asynchronous-actions-and-polling</a></p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>jid</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Job or task identifier</td>
</tr>
<tr>
<td>mode</td>
<td>no</td>
<td>status</td>
<td><ul><li>status</li><li>cleanup</li></ul></td>
<td>if <code>status</code>, obtain the status; if <code>cleanup</code>, clean up the async job cache located in <code>~/.ansible_async/</code> for the specified job <em>jid</em>.</td>
</tr>
</tbody></table><br><h4>Notes</h4>
<p>See <a href="http://www.ansibleworks.com/docs/playbooks2.html#asynchronous-actions-and-polling">http://www.ansibleworks.com/docs/playbooks2.html#asynchronous-actions-and-polling</a></p></div>
</div>
<div class="section" id="inventory">
<h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id201">Inventory</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#inventory" title="Permalink to this headline">¶</a></h2>
<div class="section" id="add-host">
<span id="id53"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id202">add_host</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#add-host" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.9.</span></p>
</div>
<p>Use variables to create new hosts and groups in inventory for use in later plays of the same playbook. Takes variables so you can define the new hosts more fully.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>groups</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The groups to add the hostname to, comma separated.</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The hostname/ip of the host to add to the inventory, can include a colon and a port number.</td>
</tr>
</tbody></table><br><pre># add host to group 'just_created' with variable foo=42
- add_host: name={{ ip_from_ec2 }} groups=just_created foo=42

# add a host with a non-standard port local to your machines
- add_host: name={{ new_ip }}:{{ new_port }}

# add a host alias that we reach through a tunnel
- add_host: hostname={{ new_ip }}
            ansible_ssh_host={{ inventory_hostname }}
            ansible_ssh_port={{ new_port }}
</pre></div>
<div class="section" id="group-by">
<span id="id54"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id203">group_by</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#group-by" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.9.</span></p>
</div>
<p>Use facts to create ad-hoc groups that can be used later in a playbook.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>key</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The variables whose values will be used as groups</td>
</tr>
</tbody></table><br><pre># Create groups based on the machine architecture
-  group_by: key=machine_{{ ansible_machine }}
# Create groups like 'kvm-host'
-  group_by: key=virt_{{ ansible_virtualization_type }}_{{ ansible_virtualization_role }}
</pre><h4>Notes</h4>
<p>Spaces in group names are converted to dashes '-'.</p></div>
</div>
<div class="section" id="messaging">
<h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id204">Messaging</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#messaging" title="Permalink to this headline">¶</a></h2>
<div class="section" id="rabbitmq-parameter">
<span id="id55"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id205">rabbitmq_parameter</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#rabbitmq-parameter" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>Manage dynamic, cluster-wide parameters for RabbitMQ</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>component</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Name of the component of which the parameter is being set</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Name of the parameter being set</td>
</tr>
<tr>
<td>node</td>
<td>no</td>
<td>rabbit</td>
<td><ul></ul></td>
<td>erlang node name of the rabbit we wish to configure</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Specify if user is to be added or removed</td>
</tr>
<tr>
<td>value</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Value of the parameter, as a JSON term</td>
</tr>
<tr>
<td>vhost</td>
<td>no</td>
<td>/</td>
<td><ul></ul></td>
<td>vhost to apply access privileges.</td>
</tr>
</tbody></table><br><pre># Set the federation parameter 'local_username' to a value of 'guest' (in quotes)
- rabbitmq_parameter: component=federation
                      name=local-username
                      value='"guest"'
                      state=present
</pre></div>
<div class="section" id="rabbitmq-plugin">
<span id="id56"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id206">rabbitmq_plugin</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#rabbitmq-plugin" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>Enables or disables RabbitMQ plugins</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>names</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Comma-separated list of plugin names</td>
</tr>
<tr>
<td>new_only</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Only enable missing pluginsDoes not disable plugins that are not in the names list</td>
</tr>
<tr>
<td>prefix</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Specify a custom install prefix to a Rabbit (added in Ansible 1.3)</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>enabled</td>
<td><ul><li>enabled</li><li>disabled</li></ul></td>
<td>Specify if plugins are to be enabled or disabled</td>
</tr>
</tbody></table><br><pre># Enables the rabbitmq_management plugin
- rabbitmq_plugin: names=rabbitmq_management state=enabled
</pre></div>
<div class="section" id="rabbitmq-user">
<span id="id57"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id207">rabbitmq_user</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#rabbitmq-user" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>Add or remove users to RabbitMQ and assign permissions</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>configure_priv</td>
<td>no</td>
<td>^$</td>
<td><ul></ul></td>
<td>Regular expression to restrict configure actions on a resource for the specified vhost.By default all actions are restricted.</td>
</tr>
<tr>
<td>force</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Deletes and recreates the user.</td>
</tr>
<tr>
<td>node</td>
<td>no</td>
<td>rabbit</td>
<td><ul></ul></td>
<td>erlang node name of the rabbit we wish to configure</td>
</tr>
<tr>
<td>password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Password of user to add.To change the password of an existing user, you must also specify <code>force=yes</code>.</td>
</tr>
<tr>
<td>read_priv</td>
<td>no</td>
<td>^$</td>
<td><ul></ul></td>
<td>Regular expression to restrict configure actions on a resource for the specified vhost.By default all actions are restricted.</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Specify if user is to be added or removed</td>
</tr>
<tr>
<td>tags</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>User tags specified as comma delimited</td>
</tr>
<tr>
<td>user</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Name of user to add</td>
</tr>
<tr>
<td>vhost</td>
<td>no</td>
<td>/</td>
<td><ul></ul></td>
<td>vhost to apply access privileges.</td>
</tr>
<tr>
<td>write_priv</td>
<td>no</td>
<td>^$</td>
<td><ul></ul></td>
<td>Regular expression to restrict configure actions on a resource for the specified vhost.By default all actions are restricted.</td>
</tr>
</tbody></table><br><pre># Add user to server and assign full access control
- rabbitmq_user: user=joe
                 password=changeme
                 vhost=/
                 configure_priv=.*
                 read_priv=.*
                 write_priv=.*
                 state=present
</pre></div>
<div class="section" id="rabbitmq-vhost">
<span id="id58"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id208">rabbitmq_vhost</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#rabbitmq-vhost" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>Manage the state of a virtual host in RabbitMQ</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The name of the vhost to manage</td>
</tr>
<tr>
<td>node</td>
<td>no</td>
<td>rabbit</td>
<td><ul></ul></td>
<td>erlang node name of the rabbit we wish to configure</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>The state of vhost</td>
</tr>
<tr>
<td>tracing</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Enable/disable tracing for a vhost</td>
</tr>
</tbody></table><br><pre># Ensure that the vhost /test exists.
- rabbitmq_vhost: name=/test state=present
</pre></div>
</div>
<div class="section" id="monitoring">
<h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id209">Monitoring</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#monitoring" title="Permalink to this headline">¶</a></h2>
<div class="section" id="airbrake-deployment">
<span id="id59"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id210">airbrake_deployment</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#airbrake-deployment" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>Notify airbrake about app deployments (see <a class="reference external" href="http://help.airbrake.io/kb/api-2/deploy-tracking">http://help.airbrake.io/kb/api-2/deploy-tracking</a>)</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>environment</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The airbrake environment name, typically 'production', 'staging', etc.</td>
</tr>
<tr>
<td>repo</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>URL of the project repository</td>
</tr>
<tr>
<td>revision</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>A hash, number, tag, or other identifier showing what revision was deployed</td>
</tr>
<tr>
<td>token</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>API token.</td>
</tr>
<tr>
<td>user</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The username of the person doing the deployment</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
urllib
urllib2
</p><br><pre>- airbrake_deployment: token=AAAAAA
                       environment='staging'
                       user='ansible'
                       revision=4.2
</pre></div>
<div class="section" id="boundary-meter">
<span id="id60"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id211">boundary_meter</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#boundary-meter" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.3.</span></p>
</div>
<p>This module manages boundary meters</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>apiid</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Organizations boundary API ID</td>
</tr>
<tr>
<td>apikey</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Organizations boundary API KEY</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>meter name</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>True</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Whether to create or remove the client from boundary</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
Boundary API access
bprobe is required to send data, but not to register a meter
Python urllib2
</p><br><pre>- name: Create meter
  boundary_meter: apiid=AAAAAA api_key=BBBBBB state=present name={{ inventory_hostname }}"

- name: Delete meter
  boundary_meter: apiid=AAAAAA api_key=BBBBBB state=absent name={{ inventory_hostname }}"

</pre><h4>Notes</h4>
<p>This module does not yet support boundary tags.</p></div>
<div class="section" id="datadog-event">
<span id="id61"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id212">datadog_event</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#datadog-event" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.3.</span></p>
</div>
<p>Allows to post events to DataDog (www.datadoghq.com) service.
Uses <a class="reference external" href="http://docs.datadoghq.com/api/#events">http://docs.datadoghq.com/api/#events</a> API.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>aggregation_key</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>An arbitrary string to use for aggregation.</td>
</tr>
<tr>
<td>alert_type</td>
<td>no</td>
<td>info</td>
<td><ul><li>error</li><li>warning</li><li>info</li><li>success</li></ul></td>
<td>Type of alert.</td>
</tr>
<tr>
<td>api_key</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Your DataDog API key.</td>
</tr>
<tr>
<td>date_happened</td>
<td>no</td>
<td>now</td>
<td><ul></ul></td>
<td>POSIX timestamp of the event.Default value is now.</td>
</tr>
<tr>
<td>priority</td>
<td>no</td>
<td>normal</td>
<td><ul><li>normal</li><li>low</li></ul></td>
<td>The priority of the event.</td>
</tr>
<tr>
<td>tags</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Comma separated list of tags to apply to the event.</td>
</tr>
<tr>
<td>text</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The body of the event.</td>
</tr>
<tr>
<td>title</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The event title.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
urllib2
</p><br><pre># Post an event with low priority
datadog_event: title="Testing from ansible" text="Test!" priority="low"
               api_key="6873258723457823548234234234"
# Post an event with several tags
datadog_event: title="Testing from ansible" text="Test!"
               api_key="6873258723457823548234234234"
               tags=aa,bb,cc
</pre></div>
<div class="section" id="monit">
<span id="id62"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id213">monit</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#monit" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>Manage the state of a program monitored via <em>Monit</em></p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The name of the <em>monit</em> program/process to manage</td>
</tr>
<tr>
<td>state</td>
<td>yes</td>
<td></td>
<td><ul><li>present</li><li>started</li><li>stopped</li><li>restarted</li><li>monitored</li><li>unmonitored</li><li>reloaded</li></ul></td>
<td>The state of service</td>
</tr>
</tbody></table><br><pre># Manage the state of program "httpd" to be in "started" state.
- monit: name=httpd state=started
</pre></div>
<div class="section" id="nagios">
<span id="id63"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id214">nagios</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#nagios" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.7.</span></p>
</div>
<p>The <tt class="docutils literal"><span class="pre">nagios</span></tt> module has two basic functions: scheduling downtime and toggling alerts for services or hosts.
All actions require the <em>host</em> parameter to be given explicitly. In playbooks you can use the <tt class="docutils literal"><span class="pre">{{inventory_hostname}}</span></tt> variable to refer to the host the playbook is currently running on.
You can specify multiple services at once by separating them with commas, .e.g., <tt class="docutils literal"><span class="pre">services=httpd,nfs,puppet</span></tt>.
When specifying what service to handle there is a special service value, <em>host</em>, which will handle alerts/downtime for the <em>host itself</em>, e.g., <tt class="docutils literal"><span class="pre">service=host</span></tt>. This keyword may not be given with other services at the same time. <em>Setting alerts/downtime for a host does not affect alerts/downtime for any of the services running on it.</em> To schedule downtime for all services on particular host use keyword “all”, e.g., <tt class="docutils literal"><span class="pre">service=all</span></tt>.
When using the <tt class="docutils literal"><span class="pre">nagios</span></tt> module you will need to specify your Nagios server using the <tt class="docutils literal"><span class="pre">delegate_to</span></tt> parameter.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>action</td>
<td>yes</td>
<td></td>
<td><ul><li>downtime</li><li>enable_alerts</li><li>disable_alerts</li><li>silence</li><li>unsilence</li><li>silence_nagios</li><li>unsilence_nagios</li><li>command</li></ul></td>
<td>Action to take.</td>
</tr>
<tr>
<td>author</td>
<td>no</td>
<td>Ansible</td>
<td><ul></ul></td>
<td>Author to leave downtime comments as. Only usable with the <code>downtime</code> action.</td>
</tr>
<tr>
<td>cmdfile</td>
<td>no</td>
<td>auto-detected</td>
<td><ul></ul></td>
<td>Path to the nagios <em>command file</em> (FIFO pipe). Only required if auto-detection fails.</td>
</tr>
<tr>
<td>command</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The raw command to send to nagios, which should not include the submitted time header or the line-feed <b>Required</b> option when using the <code>command</code> action.</td>
</tr>
<tr>
<td>host</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Host to operate on in Nagios.</td>
</tr>
<tr>
<td>minutes</td>
<td>no</td>
<td>30</td>
<td><ul></ul></td>
<td>Minutes to schedule downtime for.Only usable with the <code>downtime</code> action.</td>
</tr>
<tr>
<td>services</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>What to manage downtime/alerts for. Separate multiple services with commas. <code>service</code> is an alias for <code>services</code>. <b>Required</b> option when using the <code>downtime</code>, <code>enable_alerts</code>, and <code>disable_alerts</code> actions.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
Nagios
</p><br><pre># set 30 minutes of apache downtime
- nagios: action=downtime minutes=30 service=httpd host={{ inventory_hostname }}

# schedule an hour of HOST downtime
- nagios: action=downtime minutes=60 service=host host={{ inventory_hostname }}

# schedule downtime for ALL services on HOST
- nagios: action=downtime minutes=45 service=all host={{ inventory_hostname }}

# schedule downtime for a few services
- nagios: action=downtime services=frob,foobar,qeuz host={{ inventory_hostname }}

# enable SMART disk alerts
- nagios: action=enable_alerts service=smart host={{ inventory_hostname }}

# "two services at once: disable httpd and nfs alerts"
- nagios: action=disable_alerts service=httpd,nfs host={{ inventory_hostname }}

# disable HOST alerts
- nagios: action=disable_alerts service=host host={{ inventory_hostname }}

# silence ALL alerts
- nagios: action=silence host={{ inventory_hostname }}

# unsilence all alerts
- nagios: action=unsilence host={{ inventory_hostname }}

# SHUT UP NAGIOS
- nagios: action=silence_nagios

# ANNOY ME NAGIOS
- nagios: action=unsilence_nagios

# command something
- nagios: action=command command='DISABLE_FAILURE_PREDICTION'
</pre></div>
<div class="section" id="newrelic-deployment">
<span id="id64"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id215">newrelic_deployment</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#newrelic-deployment" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>Notify newrelic about app deployments (see <a class="reference external" href="http://newrelic.github.io/newrelic_api/NewRelicApi/Deployment.html">http://newrelic.github.io/newrelic_api/NewRelicApi/Deployment.html</a>)</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>app_name</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>(one of app_name or application_id are required) The value of app_name in the newrelic.yml file used by the application</td>
</tr>
<tr>
<td>application_id</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>(one of app_name or application_id are required) The application id, found in the URL when viewing the application in RPM</td>
</tr>
<tr>
<td>appname</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Name of the application</td>
</tr>
<tr>
<td>changelog</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>A list of changes for this deployment</td>
</tr>
<tr>
<td>description</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Text annotation for the deployment - notes for you</td>
</tr>
<tr>
<td>environment</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The environment for this deployment</td>
</tr>
<tr>
<td>revision</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>A revision number (e.g., git commit SHA)</td>
</tr>
<tr>
<td>token</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>API token.</td>
</tr>
<tr>
<td>user</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The name of the user/process that triggered this deployment</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
urllib
urllib2
</p><br><pre>- newrelic_deployment: token=AAAAAA
                       app_name=myapp
                       user='ansible deployment'
                       revision=1.0
</pre></div>
<div class="section" id="pagerduty">
<span id="id65"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id216">pagerduty</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#pagerduty" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>This module will let you create PagerDuty maintenance windows</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>desc</td>
<td>no</td>
<td>Created by Ansible</td>
<td><ul></ul></td>
<td>Short description of maintenance window.</td>
</tr>
<tr>
<td>hours</td>
<td>no</td>
<td>1</td>
<td><ul></ul></td>
<td>Length of maintenance window in hours.</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>PagerDuty unique subdomain.</td>
</tr>
<tr>
<td>passwd</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>PagerDuty user password.</td>
</tr>
<tr>
<td>service</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>PagerDuty service ID.</td>
</tr>
<tr>
<td>state</td>
<td>yes</td>
<td></td>
<td><ul><li>running</li><li>started</li><li>ongoing</li></ul></td>
<td>Create a maintenance window or get a list of ongoing windows.</td>
</tr>
<tr>
<td>user</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>PagerDuty user ID.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
PagerDuty API access
</p><br><pre># List ongoing maintenance windows.
- pagerduty: name=companyabc user=example@example.com<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script> passwd=password123 state=ongoing

# Create a 1 hour maintenance window for service FOO123.
- pagerduty: name=companyabc
             user=example@example.com<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>
             passwd=password123
             state=running
             service=FOO123

# Create a 4 hour maintenance window for service FOO123 with the description "deployment".
- pagerduty: name=companyabc
             user=example@example.com<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>
             passwd=password123
             state=running
             service=FOO123
             hours=4
             desc=deployment
</pre><h4>Notes</h4>
<p>This module does not yet have support to end maintenance windows.</p></div>
<div class="section" id="pingdom">
<span id="id66"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id217">pingdom</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#pingdom" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>This module will let you pause/unpause Pingdom alerts</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>checkid</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Pingdom ID of the check.</td>
</tr>
<tr>
<td>key</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Pingdom API key.</td>
</tr>
<tr>
<td>passwd</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Pingdom user password.</td>
</tr>
<tr>
<td>state</td>
<td>yes</td>
<td></td>
<td><ul><li>running</li><li>paused</li></ul></td>
<td>Define whether or not the check should be running or paused.</td>
</tr>
<tr>
<td>uid</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Pingdom user ID.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
This pingdom python library: https://github.com/mbabineau/pingdom-python
</p><br><pre># Pause the check with the ID of 12345.
- pingdom: uid=example@example.com<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>
           passwd=password123
           key=apipassword123
           checkid=12345
           state=paused

# Unpause the check with the ID of 12345.
- pingdom: uid=example@example.com<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>
           passwd=password123
           key=apipassword123
           checkid=12345
           state=running
</pre><h4>Notes</h4>
<p>This module does not yet have support to add/remove checks.</p></div>
</div>
<div class="section" id="net-infrastructure">
<h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id218">Net Infrastructure</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#net-infrastructure" title="Permalink to this headline">¶</a></h2>
<div class="section" id="arista-interface">
<span id="id67"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id219">arista_interface</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#arista-interface" title="Permalink to this headline">¶</a></h3>
<p>Manage physical Ethernet interface resources on Arista EOS network devices</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>admin</td>
<td>no</td>
<td></td>
<td><ul><li>up</li><li>down</li></ul></td>
<td>controls the operational state of the interface</td>
</tr>
<tr>
<td>description</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>a single line text string describing the interface</td>
</tr>
<tr>
<td>duplex</td>
<td>no</td>
<td>auto</td>
<td><ul><li>auto</li><li>half</li><li>full</li></ul></td>
<td>sets the interface duplex setting</td>
</tr>
<tr>
<td>interface_id</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>the full name of the interface</td>
</tr>
<tr>
<td>logging</td>
<td>no</td>
<td></td>
<td><ul><li>true</li><li>false</li><li>yes</li><li>no</li></ul></td>
<td>enables or disables the syslog facility for this module</td>
</tr>
<tr>
<td>mtu</td>
<td>no</td>
<td>1500</td>
<td><ul></ul></td>
<td>configureds the maximum transmission unit for the interface</td>
</tr>
<tr>
<td>speed</td>
<td>no</td>
<td>auto</td>
<td><ul><li>auto</li><li>100m</li><li>1g</li><li>10g</li></ul></td>
<td>sets the interface speed setting</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
Arista EOS 4.10
Netdev extension for EOS
</p><br><pre>Example playbook entries using the arista_interface module to manage resource
state.  Note that interface names must be the full interface name not shortcut
names (ie Ethernet, not Et1)

    tasks:
    - name: enable interface Ethernet 1
      action: arista_interface interface_id=Ethernet1 admin=up speed=10g duplex=full logging=true

    - name: set mtu on Ethernet 1
      action: arista_interface interface_id=Ethernet1 mtu=1600 speed=10g duplex=full logging=true

    - name: reset changes to Ethernet 1
      action: arista_interface interface_id=Ethernet1 admin=down mtu=1500 speed=10g duplex=full logging=true
</pre><h4>Notes</h4>
<p>Requires EOS 4.10 or later</p>
<p>The Netdev extension for EOS must be installed and active in the available extensions (show extensions from the EOS CLI)</p>
<p>See http://eos.aristanetworks.com for details</p></div>
<div class="section" id="arista-l2interface">
<span id="id68"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id220">arista_l2interface</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#arista-l2interface" title="Permalink to this headline">¶</a></h3>
<p>Manage layer 2 interface resources on Arista EOS network devices</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>interface_id</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>the full name of the interface</td>
</tr>
<tr>
<td>logging</td>
<td>no</td>
<td></td>
<td><ul><li>true</li><li>false</li><li>yes</li><li>no</li></ul></td>
<td>enables or disables the syslog facility for this module</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>describe the desired state of the interface related to the config</td>
</tr>
<tr>
<td>tagged_vlans</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>specifies the list of vlans that should be allowed to transit this interface</td>
</tr>
<tr>
<td>untagged_vlan</td>
<td>no</td>
<td>default</td>
<td><ul></ul></td>
<td>specifies the vlan that untagged traffic should be placed in for transit across a vlan tagged link</td>
</tr>
<tr>
<td>vlan_tagging</td>
<td>no</td>
<td>True</td>
<td><ul><li>enable</li><li>disable</li></ul></td>
<td>specifies whether or not vlan tagging should be enabled for this interface</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
Arista EOS 4.10
Netdev extension for EOS
</p><br><pre>Example playbook entries using the arista_l2interface module to manage resource
state. Note that interface names must be the full interface name not shortcut
names (ie Ethernet, not Et1)

    tasks:
    - name: create switchport ethernet1 access port
      action: arista_l2interface interface_id=Ethernet1 logging=true

    - name: create switchport ethernet2 trunk port
      action: arista_l2interface interface_id=Ethernet2 vlan_tagging=enable logging=true

    - name: add vlans to red and blue switchport ethernet2
      action: arista_l2interface interface_id=Ethernet2 tagged_vlans=red,blue logging=true

    - name: set untagged vlan for Ethernet1
      action: arista_l2interface interface_id=Ethernet1 untagged_vlan=red logging=true

    - name: convert access to trunk
      action: arista_l2interface interface_id=Ethernet1 vlan_tagging=enable tagged_vlans=red,blue logging=true

    - name: convert trunk to access
      action: arista_l2interface interface_id=Ethernet2 vlan_tagging=disable untagged_vlan=blue logging=true

    - name: delete switchport ethernet1
      action: arista_l2interface interface_id=Ethernet1 state=absent logging=true
</pre><h4>Notes</h4>
<p>Requires EOS 4.10 or later</p>
<p>The Netdev extension for EOS must be installed and active in the available extensions (show extensions from the EOS CLI)</p>
<p>See http://eos.aristanetworks.com for details</p></div>
<div class="section" id="arista-lag">
<span id="id69"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id221">arista_lag</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#arista-lag" title="Permalink to this headline">¶</a></h3>
<p>Manage port channel interface resources on Arista EOS network devices</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>interface_id</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>the full name of the interface</td>
</tr>
<tr>
<td>lacp</td>
<td>no</td>
<td>active</td>
<td><ul><li>active</li><li>passive</li><li>off</li></ul></td>
<td>enables the use of the LACP protocol for managing link bundles</td>
</tr>
<tr>
<td>links</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>array of physical interface links to include in this lag</td>
</tr>
<tr>
<td>logging</td>
<td>no</td>
<td></td>
<td><ul><li>true</li><li>false</li><li>yes</li><li>no</li></ul></td>
<td>enables or disables the syslog facility for this module</td>
</tr>
<tr>
<td>minimum_links</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>the minimum number of physical interaces that must be operationally up to consider the lag operationally up</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>describe the desired state of the interface related to the config</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
Arista EOS 4.10
Netdev extension for EOS
</p><br><pre>Example playbook entries using the arista_lag module to manage resource
state.  Note that interface names must be the full interface name not shortcut
names (ie Ethernet, not Et1)

    tasks:
    - name: create lag interface
      action: arista_lag interface_id=Port-Channel1 links=Ethernet1,Ethernet2 logging=true

    - name: add member links
      action: arista_lag interface_id=Port-Channel1 links=Ethernet1,Ethernet2,Ethernet3 logging=true

    - name: remove member links
      action: arista_lag interface_id=Port-Channel1 links=Ethernet2,Ethernet3 logging=true

    - name: remove lag interface
      action: arista_lag interface_id=Port-Channel1 state=absent logging=true
</pre><h4>Notes</h4>
<p>Requires EOS 4.10 or later</p>
<p>The Netdev extension for EOS must be installed and active in the available extensions (show extensions from the EOS CLI)</p>
<p>See http://eos.aristanetworks.com for details</p></div>
<div class="section" id="arista-vlan">
<span id="id70"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id222">arista_vlan</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#arista-vlan" title="Permalink to this headline">¶</a></h3>
<p>Manage VLAN resources on Arista EOS network devices. This module requires the Netdev EOS extension to be installed in EOS. For detailed instructions for installing and using the Netdev module please see [link]</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>logging</td>
<td>no</td>
<td></td>
<td><ul><li>true</li><li>false</li><li>yes</li><li>no</li></ul></td>
<td>enables or disables the syslog facility for this module</td>
</tr>
<tr>
<td>name</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>a descriptive name for the vlan</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>describe the desired state of the vlan related to the config</td>
</tr>
<tr>
<td>vlan_id</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>the vlan id</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
Arista EOS 4.10
Netdev extension for EOS
</p><br><pre>Example playbook entries using the arista_vlan module to manage resource
state.

  tasks:
  - name: create vlan 999
    action: arista_vlan vlan_id=999 logging=true

  - name: create / edit vlan 999
    action: arista_vlan vlan_id=999 name=test logging=true

  - name: remove vlan 999
    action: arista_vlan vlan_id=999 state=absent logging=true

</pre><h4>Notes</h4>
<p>Requires EOS 4.10 or later</p>
<p>The Netdev extension for EOS must be installed and active in the available extensions (show extensions from the EOS CLI)</p>
<p>See http://eos.aristanetworks.com for details</p></div>
<div class="section" id="bigip-pool">
<span id="id71"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id223">bigip_pool</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#bigip-pool" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>Manages F5 BIG-IP LTM pools via iControl SOAP API</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>host</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Pool member IP</td>
</tr>
<tr>
<td>lb_method</td>
<td>no</td>
<td>round_robin</td>
<td><ul><li>round_robin</li><li>ratio_member</li><li>least_connection_member</li><li>observed_member</li><li>predictive_member</li><li>ratio_node_address</li><li>least_connection_node_address</li><li>fastest_node_address</li><li>observed_node_address</li><li>predictive_node_address</li><li>dynamic_ratio</li><li>fastest_app_response</li><li>least_sessions</li><li>dynamic_ratio_member</li><li>l3_addr</li><li>unknown</li><li>weighted_least_connection_member</li><li>weighted_least_connection_node_address</li><li>ratio_session</li><li>ratio_least_connection_member</li><li>ratio_least_connection_node_address</li></ul></td>
<td>Load balancing method (added in Ansible 1.3)</td>
</tr>
<tr>
<td>monitor_type</td>
<td>no</td>
<td></td>
<td><ul><li>and_list</li><li>m_of_n</li></ul></td>
<td>Monitor rule type when monitors &gt; 1 (added in Ansible 1.3)</td>
</tr>
<tr>
<td>monitors</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Monitor template name list. Always use the full path to the monitor. (added in Ansible 1.3)</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Pool name</td>
</tr>
<tr>
<td>partition</td>
<td>no</td>
<td>Common</td>
<td><ul></ul></td>
<td>Partition of pool/pool member</td>
</tr>
<tr>
<td>password</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>BIG-IP password</td>
</tr>
<tr>
<td>port</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Pool member port</td>
</tr>
<tr>
<td>quorum</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Monitor quorum value when monitor_type is m_of_n (added in Ansible 1.3)</td>
</tr>
<tr>
<td>server</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>BIG-IP host</td>
</tr>
<tr>
<td>service_down_action</td>
<td>no</td>
<td></td>
<td><ul><li>none</li><li>reset</li><li>drop</li><li>reselect</li></ul></td>
<td>Sets the action to take when node goes down in pool (added in Ansible 1.3)</td>
</tr>
<tr>
<td>slow_ramp_time</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Sets the ramp-up time (in seconds) to gradually ramp up the load on newly added or freshly detected up pool members (added in Ansible 1.3)</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Pool/pool member state</td>
</tr>
<tr>
<td>user</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>BIG-IP username</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
bigsuds
</p><br><pre>
## playbook task examples:

---
# file bigip-test.yml
# ...
- hosts: localhost
  tasks:
  - name: Create pool
    local_action: &gt;
      bigip_pool
      server=lb.mydomain.com
      user=admin
      password=mysecret
      state=present
      name=matthite-pool
      partition=matthite
      lb_method=least_connection_member
      slow_ramp_time=120

  - name: Modify load balancer method
    local_action: &gt;
      bigip_pool
      server=lb.mydomain.com
      user=admin
      password=mysecret
      state=present
      name=matthite-pool
      partition=matthite
      lb_method=round_robin

- hosts: bigip-test
  tasks:
  - name: Add pool member
    local_action: &gt;
      bigip_pool
      server=lb.mydomain.com
      user=admin
      password=mysecret
      state=present
      name=matthite-pool
      partition=matthite
      host="{{ ansible_default_ipv4["address"] }}"
      port=80

  - name: Remove pool member from pool
    local_action: &gt;
      bigip_pool
      server=lb.mydomain.com
      user=admin
      password=mysecret
      state=absent
      name=matthite-pool
      partition=matthite
      host="{{ ansible_default_ipv4["address"] }}"
      port=80

- hosts: localhost
  tasks:
  - name: Delete pool
    local_action: &gt;
      bigip_pool
      server=lb.mydomain.com
      user=admin
      password=mysecret
      state=absent
      name=matthite-pool
      partition=matthite

</pre><h4>Notes</h4>
<p>Requires BIG-IP software version &gt;= 11</p>
<p>F5 developed module 'bigsuds' required (see http://devcentral.f5.com)</p>
<p>Best run as a local_action in your playbook</p></div>
<div class="section" id="dnsmadeeasy">
<span id="id72"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id224">dnsmadeeasy</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#dnsmadeeasy" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.3.</span></p>
</div>
<p>Manages DNS records via the v2 REST API of the DNS Made Easy service. It handles records only; there is no manipulation of domains or monitor/account support yet. See: <a class="reference external" href="http://www.dnsmadeeasy.com/services/rest-api/">http://www.dnsmadeeasy.com/services/rest-api/</a></p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>account_key</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Accout API Key.</td>
</tr>
<tr>
<td>account_secret</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Accout Secret Key.</td>
</tr>
<tr>
<td>domain</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Domain to work with. Can be the domain name (e.g. "mydomain.com") or the numeric ID of the domain in DNS Made Easy (e.g. "839989") for faster resolution.</td>
</tr>
<tr>
<td>record_name</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Record name to get/create/delete/update. If record_name is not specified; all records for the domain will be returned in "result" regardless of the state argument.</td>
</tr>
<tr>
<td>record_ttl</td>
<td>no</td>
<td>1800</td>
<td><ul></ul></td>
<td>record's "Time to live". Number of seconds the record remains cached in DNS servers.</td>
</tr>
<tr>
<td>record_type</td>
<td>no</td>
<td></td>
<td><ul><li>A</li><li>AAAA</li><li>CNAME</li><li>HTTPRED</li><li>MX</li><li>NS</li><li>PTR</li><li>SRV</li><li>TXT</li></ul></td>
<td>Record type.</td>
</tr>
<tr>
<td>record_value</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Record value. HTTPRED: &lt;redirection URL&gt;, MX: &lt;priority&gt; &lt;target name&gt;, NS: &lt;name server&gt;, PTR: &lt;target name&gt;, SRV: &lt;priority&gt; &lt;weight&gt; &lt;port&gt; &lt;target name&gt;, TXT: &lt;text value&gt;If record_value is not specified; no changes will be made and the record will be returned in 'result' (in other words, this module can be used to fetch a record's current id, type, and ttl)</td>
</tr>
<tr>
<td>state</td>
<td>yes</td>
<td></td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>whether the record should exist or not</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
urllib
urllib2
hashlib
hmac
</p><br><pre># fetch my.com domain records
- dnsmadeeasy: account_key=key account_secret=secret domain=my.com state=present
  register: response

# create / ensure the presence of a record
- dnsmadeeasy: account_key=key account_secret=secret domain=my.com state=present record_name="test" record_type="A" record_value="127.0.0.1"

# update the previously created record
- dnsmadeeasy: account_key=key account_secret=secret domain=my.com state=present record_name="test" record_value="192.168.0.1"

# fetch a specific record
- dnsmadeeasy: account_key=key account_secret=secret domain=my.com state=present record_name="test"
  register: response

# delete a record / ensure it is absent
- dnsmadeeasy: account_key=key account_secret=secret domain=my.com state=absent record_name="test"
</pre><h4>Notes</h4>
<p>The DNS Made Easy service requires that machines interacting with the API have the proper time and timezone set. Be sure you are within a few seconds of actual time by using NTP.</p>
<p>This module returns record(s) in the "result" element when 'state' is set to 'present'. This value can be be registered and used in your playbooks.</p></div>
<div class="section" id="netscaler">
<span id="id73"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id225">netscaler</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#netscaler" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>Manages Citrix NetScaler server and service entities.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>action</td>
<td>no</td>
<td>disable</td>
<td><ul><li>enable</li><li>disable</li></ul></td>
<td>the action you want to perform on the entity</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td>hostname</td>
<td><ul></ul></td>
<td>name of the entity</td>
</tr>
<tr>
<td>nsc_host</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>hostname or ip of your netscaler</td>
</tr>
<tr>
<td>nsc_protocol</td>
<td>no</td>
<td>https</td>
<td><ul></ul></td>
<td>protocol used to access netscaler</td>
</tr>
<tr>
<td>password</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>password</td>
</tr>
<tr>
<td>type</td>
<td>no</td>
<td>server</td>
<td><ul><li>server</li><li>service</li></ul></td>
<td>type of the entity</td>
</tr>
<tr>
<td>user</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>username</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
urllib
urllib2
</p><br><pre># Disable the server
ansible host -m netscaler -a "nsc_host=nsc.example.com user=apiuser password=apipass"

# Enable the server
ansible host -m netscaler -a "nsc_host=nsc.example.com user=apiuser password=apipass action=enable"

# Disable the service local:8080
ansible host -m netscaler -a "nsc_host=nsc.example.com user=apiuser password=apipass name=local:8080 type=service action=disable"
</pre></div>
</div>
<div class="section" id="network">
<h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id226">Network</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#network" title="Permalink to this headline">¶</a></h2>
<div class="section" id="get-url">
<span id="id74"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id227">get_url</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#get-url" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.6.</span></p>
</div>
<p>Downloads files from HTTP, HTTPS, or FTP to the remote server. The remote server <em>must</em> have direct access to the remote resource.
By default, if an environment variable <tt class="docutils literal"><span class="pre">&lt;protocol&gt;_proxy</span></tt> is set on the target host, requests will be sent through that proxy. This behaviour can be overridden by setting a variable for this task (see <a class="reference external" href="http://www.ansibleworks.com/docs/playbooks2.html#setting-the-environment-and-working-with-proxies">setting the environment</a>), or by using the use_proxy option.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>dest</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>absolute path of where to download the file to.If <em>dest</em> is a directory, the basename of the file on the remote server will be used. If a directory, <code>force=yes</code> must also be set.</td>
</tr>
<tr>
<td>force</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>If <code>yes</code>, will download the file every time and replace the file if the contents change. If <code>no</code>, the file will only be downloaded if the destination does not exist. Generally should be <code>yes</code> only for small local files. Prior to 0.6, this module behaved as if <code>yes</code> was the default. (added in Ansible 0.7)</td>
</tr>
<tr>
<td>others</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>all arguments accepted by the <span class="module">file</span> module also work here</td>
</tr>
<tr>
<td>sha256sum</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>If a SHA-256 checksum is passed to this parameter, the digest of the destination file will be calculated after it is downloaded to ensure its integrity and verify that the transfer completed successfully. (added in Ansible 1.3)</td>
</tr>
<tr>
<td>url</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>HTTP, HTTPS, or FTP URL in the form (http|https|ftp)://[user[:pass]]@host.domain[:port]/path</td>
</tr>
<tr>
<td>use_proxy</td>
<td>no</td>
<td>yes</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>if <code>no</code>, it will not use a proxy, even if one is defined in an environment variable on the target hosts.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
urllib2
urlparse
</p><br><pre>- name: download foo.conf
  get_url: url=http://example.com/path/file.conf dest=/etc/foo.conf mode=0440

- name: download file with sha256 check
  get_url: url=http://example.com/path/file.conf dest=/etc/foo.conf sha256sum=b5bb9d8014a0f9b1d61e21e796d78dccdf1352f23cd32812f4850b878ae4944c
</pre><h4>Notes</h4>
<p>This module doesn't yet support configuration for proxies.</p></div>
<div class="section" id="slurp">
<span id="id75"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id228">slurp</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#slurp" title="Permalink to this headline">¶</a></h3>
<p>This module works like <tt class="docutils literal"><span class="pre">fetch</span></tt>. It is used for fetching a base64- encoded blob containing the data in a remote file.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>src</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The file on the remote system to fetch. This <em>must</em> be a file, not a directory.</td>
</tr>
</tbody></table><br><pre>ansible host -m slurp -a 'src=/tmp/xx'
   host | success &gt;&gt; {
      "content": "aGVsbG8gQW5zaWJsZSB3b3JsZAo=",
      "encoding": "base64"
   }
</pre><h4>Notes</h4>
<p>See also: <span class="module">fetch</span></p></div>
<div class="section" id="uri">
<span id="id76"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id229">uri</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#uri" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>Interacts with HTTP and HTTPS web services and supports Digest, Basic and WSSE HTTP authentication mechanisms.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>HEADER_</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Any parameter starting with "HEADER_" is a sent with your request as a header. For example, HEADER_Content-Type="application/json" would send the header "Content-Type" along with your request with a value of "application/json".</td>
</tr>
<tr>
<td>body</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The body of the http request/response to the web service.</td>
</tr>
<tr>
<td>creates</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>a filename, when it already exists, this step will not be run.</td>
</tr>
<tr>
<td>dest</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>path of where to download the file to (if desired). If <em>dest</em> is a directory, the basename of the file on the remote server will be used.</td>
</tr>
<tr>
<td>follow_redirects</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Whether or not the URI module should follow all redirects.</td>
</tr>
<tr>
<td>force_basic_auth</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>httplib2, the library used by the uri module only sends authentication information when a webservice responds to an initial request with a 401 status. Since some basic auth services do not properly send a 401, logins will fail. This option forces the sending of the Basic authentication header upon initial request.</td>
</tr>
<tr>
<td>method</td>
<td>no</td>
<td>GET</td>
<td><ul><li>GET</li><li>POST</li><li>PUT</li><li>HEAD</li><li>DELETE</li><li>OPTIONS</li></ul></td>
<td>The HTTP method of the request or response.</td>
</tr>
<tr>
<td>others</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>all arguments accepted by the <span class="module">file</span> module also work here</td>
</tr>
<tr>
<td>password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>password for the module to use for Digest, Basic or WSSE authentication.</td>
</tr>
<tr>
<td>removes</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>a filename, when it does not exist, this step will not be run.</td>
</tr>
<tr>
<td>return_content</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Whether or not to return the body of the request as a "content" key in the dictionary result. If the reported Content-type is "application/json", then the JSON is additionally loaded into a key called <code>json</code> in the dictionary results.</td>
</tr>
<tr>
<td>status_code</td>
<td>no</td>
<td>200</td>
<td><ul></ul></td>
<td>A valid, numeric, HTTP status code that signifies success of the request.</td>
</tr>
<tr>
<td>timeout</td>
<td>no</td>
<td>30</td>
<td><ul></ul></td>
<td>The socket level timeout in seconds</td>
</tr>
<tr>
<td>url</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>HTTP or HTTPS URL in the form (http|https)://host.domain[:port]/path</td>
</tr>
<tr>
<td>user</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>username for the module to use for Digest, Basic or WSSE authentication.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
urlparse
httplib2
</p><br><pre># Check that you can connect (GET) to a page and it returns a status 200
- uri: url=http://www.example.com

# Check that a page returns a status 200 and fail if the word AWESOME is not in the page contents.
- action: uri url=http://www.example.com return_content=yes
  register: webpage

- action: fail
  when: 'AWESOME' not in "{{ webpage.content }}"


# Create a JIRA issue.
- action: &gt;
        uri url=https://your.jira.example.com/rest/api/2/issue/
        method=POST user=your_username password=your_pass
        body="{{ lookup('file','issue.json') }}" force_basic_auth=yes
        status_code=201 HEADER_Content-Type="application/json"

- action: &gt;
        uri url=https://your.form.based.auth.examle.com/index.php
        method=POST body="name=your_username&amp;password=your_password&amp;enter=Sign%20in"
        status_code=302 HEADER_Content-Type="application/x-www-form-urlencoded"
  register: login

# Login to a form based webpage, then use the returned cookie to
# access the app in later tasks.
- action: uri url=https://your.form.based.auth.example.com/dashboard.php
            method=GET return_content=yes HEADER_Cookie="{{login.set_cookie}}"
</pre></div>
</div>
<div class="section" id="notification">
<h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id230">Notification</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#notification" title="Permalink to this headline">¶</a></h2>
<div class="section" id="campfire">
<span id="id77"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id231">campfire</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#campfire" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>Send a message to Campfire.
Messages with newlines will result in a “Paste” message being sent.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>msg</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The message body.</td>
</tr>
<tr>
<td>notify</td>
<td>no</td>
<td></td>
<td><ul><li>56k</li><li>bueller</li><li>crickets</li><li>dangerzone</li><li>deeper</li><li>drama</li><li>greatjob</li><li>horn</li><li>horror</li><li>inconceivable</li><li>live</li><li>loggins</li><li>noooo</li><li>nyan</li><li>ohmy</li><li>ohyeah</li><li>pushit</li><li>rimshot</li><li>sax</li><li>secret</li><li>tada</li><li>tmyk</li><li>trombone</li><li>vuvuzela</li><li>yeah</li><li>yodel</li></ul></td>
<td>Send a notification sound before the message.</td>
</tr>
<tr>
<td>room</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Room number to which the message should be sent.</td>
</tr>
<tr>
<td>subscription</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The subscription name to use.</td>
</tr>
<tr>
<td>token</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>API token.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
urllib2
cgi
</p><br><pre>- campfire: subscription=foo token=12345 room=123 msg="Task completed."

- campfire: subscription=foo token=12345 room=123 notify=loggins
        msg="Task completed ... with feeling."
</pre></div>
<div class="section" id="flowdock">
<span id="id78"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id232">flowdock</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#flowdock" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>Send a message to a flowdock team inbox or chat using the push API (see <a class="reference external" href="https://www.flowdock.com/api/team-inbox">https://www.flowdock.com/api/team-inbox</a> and <a class="reference external" href="https://www.flowdock.com/api/chat">https://www.flowdock.com/api/chat</a>)</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>external_user_name</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>(chat only - required) Name of the "user" sending the message</td>
</tr>
<tr>
<td>from_address</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>(inbox only - required) Email address of the message sender</td>
</tr>
<tr>
<td>from_name</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>(inbox only) Name of the message sender</td>
</tr>
<tr>
<td>link</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>(inbox only) Link associated with the message. This will be used to link the message subject in Team Inbox.</td>
</tr>
<tr>
<td>msg</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Content of the message</td>
</tr>
<tr>
<td>project</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>(inbox only) Human readable identifier for more detailed message categorization</td>
</tr>
<tr>
<td>reply_to</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>(inbox only) Email address for replies</td>
</tr>
<tr>
<td>source</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>(inbox only - required) Human readable identifier of the application that uses the Flowdock API</td>
</tr>
<tr>
<td>subject</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>(inbox only - required) Subject line of the message</td>
</tr>
<tr>
<td>tags</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>tags of the message, separated by commas</td>
</tr>
<tr>
<td>token</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>API token.</td>
</tr>
<tr>
<td>type</td>
<td>yes</td>
<td></td>
<td><ul><li>inbox</li><li>chat</li></ul></td>
<td>Whether to post to 'inbox' or 'chat'</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
urllib
urllib2
</p><br><pre>- flowdock: type=inbox
            token=AAAAAA
            from_address=user@example.com<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>
            source='my cool app'
            msg='test from ansible'
            subject='test subject'

- flowdock: type=chat
            token=AAAAAA
            external_user_name=testuser
            msg='test from ansible'
            tags=tag1,tag2,tag3
</pre></div>
<div class="section" id="hipchat">
<span id="id79"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id233">hipchat</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#hipchat" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>Send a message to hipchat</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>color</td>
<td>no</td>
<td>yellow</td>
<td><ul><li>yellow</li><li>red</li><li>green</li><li>purple</li><li>gray</li><li>random</li></ul></td>
<td>Background color for the message. Default is yellow.</td>
</tr>
<tr>
<td>from</td>
<td>no</td>
<td>Ansible</td>
<td><ul></ul></td>
<td>Name the message will appear be sent from. max 15 characters. Over 15, will be shorten.</td>
</tr>
<tr>
<td>msg</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The message body.</td>
</tr>
<tr>
<td>msg_format</td>
<td>no</td>
<td>text</td>
<td><ul><li>text</li><li>html</li></ul></td>
<td>message format. html or text. Default is text.</td>
</tr>
<tr>
<td>notify</td>
<td>no</td>
<td>yes</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>notify or not (change the tab color, play a sound, etc)</td>
</tr>
<tr>
<td>room</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>ID or name of the room.</td>
</tr>
<tr>
<td>token</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>API token.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
urllib
urllib2
</p><br><pre>- hipchat: token=AAAAAA room=notify msg="Ansible task finished"
</pre></div>
<div class="section" id="irc">
<span id="id80"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id234">irc</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#irc" title="Permalink to this headline">¶</a></h3>
<p>Send a message to an IRC channel. This is a very simplistic implementation.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>channel</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Channel name</td>
</tr>
<tr>
<td>color</td>
<td>no</td>
<td>black</td>
<td><ul><li>yellow</li><li>red</li><li>green</li><li>blue</li><li>black</li></ul></td>
<td>Text color for the message. Default is black.</td>
</tr>
<tr>
<td>msg</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The message body.</td>
</tr>
<tr>
<td>nick</td>
<td>no</td>
<td>ansible</td>
<td><ul></ul></td>
<td>Nickname</td>
</tr>
<tr>
<td>passwd</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Server password</td>
</tr>
<tr>
<td>port</td>
<td>no</td>
<td>6667</td>
<td><ul></ul></td>
<td>IRC server port number</td>
</tr>
<tr>
<td>server</td>
<td>no</td>
<td>localhost</td>
<td><ul></ul></td>
<td>IRC server name/address</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
socket
</p><br><pre>- irc: server=irc.example.net channel="#t1" msg="Hello world"

- local_action: irc port=6669
                channel="#t1"
                msg="All finished at {{ ansible_date_time.iso8601 }}"
                color=red
                nick=ansibleIRC
</pre></div>
<div class="section" id="jabber">
<span id="id81"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id235">jabber</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#jabber" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>Send a message to jabber</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>encoding</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>message encoding</td>
</tr>
<tr>
<td>host</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>host to connect, overrides user info</td>
</tr>
<tr>
<td>msg</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The message body.</td>
</tr>
<tr>
<td>password</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>password for user to connect</td>
</tr>
<tr>
<td>port</td>
<td>no</td>
<td>5222</td>
<td><ul></ul></td>
<td>port to connect to, overrides default</td>
</tr>
<tr>
<td>to</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>user ID or name of the room, when using room use a slash to indicate your nick.</td>
</tr>
<tr>
<td>user</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>User as which to connect</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
xmpp
</p><br><pre># send a message to a user
- jabber: user=mybot@example.net<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>
          password=secret
          to=friend@example.net<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>
          msg="Ansible task finished"

# send a message to a room
- jabber: user=mybot@example.net<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>
          password=secret
          to=mychaps@conference.example.net<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>/ansiblebot
          msg="Ansible task finished"

# send a message, specifying the host and port
- jabber user=mybot@example.net<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>
         host=talk.example.net
         port=5223
         password=secret
         to=mychaps@example.net<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>
         msg="Ansible task finished"
</pre></div>
<div class="section" id="mail">
<span id="id82"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id236">mail</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#mail" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.8.</span></p>
</div>
<p>This module is useful for sending emails from playbooks.
One may wonder why automate sending emails? In complex environments there are from time to time processes that cannot be automated, either because you lack the authority to make it so, or because not everyone agrees to a common approach.
If you cannot automate a specific step, but the step is non-blocking, sending out an email to the responsible party to make him perform his part of the bargain is an elegant way to put the responsibility in someone else’s lap.
Of course sending out a mail can be equally useful as a way to notify one or more people in a team that a specific action has been (successfully) taken.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>attach</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>A space-separated list of pathnames of files to attach to the message. Attached files will have their content-type set to <code>application/octet-stream</code>. (added in Ansible 1.0)</td>
</tr>
<tr>
<td>bcc</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The email-address(es) the mail is being 'blind' copied to. This is a comma-separated list, which may contain address and phrase portions.</td>
</tr>
<tr>
<td>body</td>
<td>no</td>
<td>$subject</td>
<td><ul></ul></td>
<td>The body of the email being sent.</td>
</tr>
<tr>
<td>cc</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The email-address(es) the mail is being copied to. This is a comma-separated list, which may contain address and phrase portions.</td>
</tr>
<tr>
<td>charset</td>
<td>no</td>
<td>us-ascii</td>
<td><ul></ul></td>
<td>The character set of email being sent</td>
</tr>
<tr>
<td>from</td>
<td>no</td>
<td>root</td>
<td><ul></ul></td>
<td>The email-address the mail is sent from. May contain address and phrase.</td>
</tr>
<tr>
<td>headers</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>A vertical-bar-separated list of headers which should be added to the message. Each individual header is specified as <code>header=value</code> (see example below). (added in Ansible 1.0)</td>
</tr>
<tr>
<td>host</td>
<td>no</td>
<td>localhost</td>
<td><ul></ul></td>
<td>The mail server</td>
</tr>
<tr>
<td>port</td>
<td>no</td>
<td>25</td>
<td><ul></ul></td>
<td>The mail server port (added in Ansible 1.0)</td>
</tr>
<tr>
<td>subject</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The subject of the email being sent.</td>
</tr>
<tr>
<td>to</td>
<td>no</td>
<td>root</td>
<td><ul></ul></td>
<td>The email-address(es) the mail is being sent to. This is a comma-separated list, which may contain address and phrase portions.</td>
</tr>
</tbody></table><br><pre># Example playbook sending mail to root
- local_action: mail msg='System {{ ansible_hostname }} has been successfully provisioned.'

# Send e-mail to a bunch of users, attaching files
- local_action: mail
                host='127.0.0.1'
                port=2025
                subject="Ansible-report"
                body="Hello, this is an e-mail. I hope you like it ;-)"
                from="jane@example.net<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script> (Jane Jolie)"
                to="John Doe &lt;j.d@example.org<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&gt;, Suzie Something &lt;sue@example.com<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&gt;"
                cc="Charlie Root &lt;root@localhost&gt;"
                attach="/etc/group /tmp/pavatar2.png"
                headers=Reply-To=john@example.com<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>|X-Special="Something or other"
                charset=utf8
</pre></div>
<div class="section" id="mqtt">
<span id="id83"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id237">mqtt</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#mqtt" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>Publish a message on an MQTT topic.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>client_id</td>
<td>no</td>
<td>hostname + pid</td>
<td><ul></ul></td>
<td>MQTT client identifier</td>
</tr>
<tr>
<td>password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Password for <code>username</code> to authenticate against the broker.</td>
</tr>
<tr>
<td>payload</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Payload. The special string <code>"None"</code> may be used to send a NULL (i.e. empty) payload which is useful to simply notify with the <em>topic</em> or to clear previously retained messages.</td>
</tr>
<tr>
<td>port</td>
<td>no</td>
<td>1883</td>
<td><ul></ul></td>
<td>MQTT broker port number</td>
</tr>
<tr>
<td>qos</td>
<td>no</td>
<td></td>
<td><ul><li>0</li><li>1</li><li>2</li></ul></td>
<td>QoS (Quality of Service)</td>
</tr>
<tr>
<td>retain</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Setting this flag causes the broker to retain (i.e. keep) the message so that applications that subsequently subscribe to the topic can received the last retained message immediately.</td>
</tr>
<tr>
<td>server</td>
<td>no</td>
<td>localhost</td>
<td><ul></ul></td>
<td>MQTT broker address/name</td>
</tr>
<tr>
<td>topic</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>MQTT topic name</td>
</tr>
<tr>
<td>username</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Username to authenticate against the broker.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
mosquitto
</p><br><pre>- local_action: mqtt
              topic=service/ansible/{{ ansible_hostname }}
              payload="Hello at {{ ansible_date_time.iso8601 }}"
              qos=0
              retain=false
              client_id=ans001
</pre><h4>Notes</h4>
<p>This module requires a connection to an MQTT broker such as Mosquitto <a href="http://mosquitto.org/">http://mosquitto.org</a> and the <code>mosquitto</code> Python module (<a href="http://mosquitto.org/python">http://mosquitto.org/python</a>).</p></div>
<div class="section" id="osx-say">
<span id="id84"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id238">osx_say</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#osx-say" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>makes an OS computer speak! Amuse your friends, annoy your coworkers!</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>msg</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>What to say</td>
</tr>
<tr>
<td>voice</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>What voice to use</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
say
</p><br><pre>- local_action: osx_say msg="{{inventory_hostname}} is all done" voice=Zarvox
</pre><h4>Notes</h4>
<p>If you like this module, you may also be interested in the osx_say callback in the plugins/ directory of the source checkout.</p></div>
</div>
<div class="section" id="packaging">
<h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id239">Packaging</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#packaging" title="Permalink to this headline">¶</a></h2>
<div class="section" id="apt">
<span id="id85"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id240">apt</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#apt" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.0.2.</span></p>
</div>
<p>Manages <em>apt</em> packages (such as for Debian/Ubuntu).</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>cache_valid_time</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>If <code>update_cache</code> is specified and the last run is less or equal than <em>cache_valid_time</em> seconds ago, the <code>update_cache</code> gets skipped.</td>
</tr>
<tr>
<td>default_release</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Corresponds to the <code>-t</code> option for <em>apt</em> and sets pin priorities</td>
</tr>
<tr>
<td>force</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>If <code>yes</code>, force installs/removes.</td>
</tr>
<tr>
<td>install_recommends</td>
<td>no</td>
<td>True</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Corresponds to the <code>--no-install-recommends</code> option for <em>apt</em>, default behavior works as apt's default behavior, <code>no</code> does not install recommended packages. Suggested packages are never installed.</td>
</tr>
<tr>
<td>pkg</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>A package name or package specifier with version, like <code>foo</code> or <code>foo=1.0</code>. Shell like wildcards (fnmatch) like apt* are also supported.</td>
</tr>
<tr>
<td>purge</td>
<td>no</td>
<td></td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Will force purging of configuration files if the module state is set to <em>absent</em>.</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>latest</li><li>absent</li><li>present</li></ul></td>
<td>Indicates the desired package state</td>
</tr>
<tr>
<td>update_cache</td>
<td>no</td>
<td></td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Run the equivalent of <code>apt-get update</code> before the operation. Can be run as part of the package installation or as a separate step</td>
</tr>
<tr>
<td>upgrade</td>
<td>no</td>
<td>yes</td>
<td><ul><li>yes</li><li>safe</li><li>full</li><li>dist</li></ul></td>
<td>If yes or safe, performs an aptitude safe-upgrade.If full, performs an aptitude full-upgrade.If dist, performs an apt-get dist-upgrade.Note: This does not upgrade a specific package, use state=latest for that. (added in Ansible 1.1)</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
python-apt
aptitude
</p><br><pre># Update repositories cache and install "foo" package
- apt: pkg=foo update_cache=yes

# Remove "foo" package
- apt: pkg=foo state=absent

# Install the package "foo"
- apt: pkg=foo state=present

# Install the version '1.00' of package "foo"
- apt: pkg=foo=1.00 state=present

# Update the repository cache and update package "nginx" to latest version using default release squeeze-backport
- apt: pkg=nginx state=latest default_release=squeeze-backports update_cache=yes

# Install latest version of "openjdk-6-jdk" ignoring "install-reccomends"
- apt: pkg=openjdk-6-jdk state=latest install_recommends=no

# Update all packages to the latest version
- apt: upgrade=dist

# Run the equivalent of "apt-get update" as a separate step
- apt: update_cache=yes

# Only run "update_cache=yes" if the last one is more than more than 3600 seconds ago
- apt: update_cache=yes cache_valid_time=3600
</pre><h4>Notes</h4>
<p>Three of the upgrade modes (<code>full</code>, <code>safe</code> and its alias <code>yes</code>) require <code>aptitude</code>, otherwise <code>apt-get</code> suffices.</p></div>
<div class="section" id="apt-key">
<span id="id86"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id241">apt_key</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#apt-key" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.0.</span></p>
</div>
<p>Add or remove an <em>apt</em> key, optionally downloading it</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>data</td>
<td>no</td>
<td>none</td>
<td><ul></ul></td>
<td>keyfile contents</td>
</tr>
<tr>
<td>file</td>
<td>no</td>
<td>none</td>
<td><ul></ul></td>
<td>keyfile path</td>
</tr>
<tr>
<td>id</td>
<td>no</td>
<td>none</td>
<td><ul></ul></td>
<td>identifier of key</td>
</tr>
<tr>
<td>keyring</td>
<td>no</td>
<td>none</td>
<td><ul></ul></td>
<td>path to specific keyring file in /etc/apt/trusted.gpg.d (added in Ansible 1.3)</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>absent</li><li>present</li></ul></td>
<td>used to specify if key is being added or revoked</td>
</tr>
<tr>
<td>url</td>
<td>no</td>
<td>none</td>
<td><ul></ul></td>
<td>url to retrieve key from.</td>
</tr>
</tbody></table><br><pre># Add an Apt signing key, uses whichever key is at the URL
- apt_key: url=https://ftp-master.debian.org/keys/archive-key-6.0.asc state=present

# Add an Apt signing key, will not download if present
- apt_key: id=473041FA url=https://ftp-master.debian.org/keys/archive-key-6.0.asc state=present

# Remove an Apt signing key, uses whichever key is at the URL
- apt_key: url=https://ftp-master.debian.org/keys/archive-key-6.0.asc state=absent

# Remove a Apt specific signing key
- apt_key: id=473041FA state=absent

# Add a key from a file on the Ansible server
- apt_key: data="{{ lookup('file', 'apt.gpg') }}" state=present

# Add an Apt signing key to a specific keyring file
- apt_key: id=473041FA url=https://ftp-master.debian.org/keys/archive-key-6.0.asc keyring=/etc/apt/trusted.gpg.d/debian.gpg state=present
</pre><h4>Notes</h4>
<p>doesn't download the key unless it really needs it</p>
<p>as a sanity check, downloaded key id must match the one specified</p>
<p>best practice is to specify the key id and the url</p></div>
<div class="section" id="apt-repository">
<span id="id87"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id242">apt_repository</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#apt-repository" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.7.</span></p>
</div>
<p>Add or remove an APT repositories in Ubuntu and Debian.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>repo</td>
<td>yes</td>
<td>none</td>
<td><ul></ul></td>
<td>A source string for the repository.</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>absent</li><li>present</li></ul></td>
<td>A source string state.</td>
</tr>
<tr>
<td>update_cache</td>
<td>no</td>
<td>yes</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Run the equivalent of <code>apt-get update</code> if has changed.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
python-apt
python-pycurl
</p><br><pre># Add specified repository into sources list.
apt_repository: repo='deb http://archive.canonical.com/ubuntu hardy partner' state=present

# Add source repository into sources list.
apt_repository: repo='deb-src http://archive.canonical.com/ubuntu hardy partner' state=present

# Remove specified repository from sources list.
apt_repository: repo='deb http://archive.canonical.com/ubuntu hardy partner' state=absent

# On Ubuntu target: add nginx stable repository from PPA and install its signing key.
# On Debian target: adding PPA is not available, so it will fail immediately.
apt_repository: repo='ppa:nginx/stable'
</pre><h4>Notes</h4>
<p>This module works on Debian and Ubuntu and requires <code>python-apt</code> and <code>python-pycurl</code> packages.</p>
<p>This module supports Debian Squeeze (version 6) as well as its successors.</p>
<p>This module treats Debian and Ubuntu distributions separately. So PPA could be installed only on Ubuntu machines.</p></div>
<div class="section" id="easy-install">
<span id="id88"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id243">easy_install</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#easy-install" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.7.</span></p>
</div>
<p>Installs Python libraries, optionally in a <em>virtualenv</em></p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>A Python library name</td>
</tr>
<tr>
<td>virtualenv</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>an optional <em>virtualenv</em> directory path to install into. If the <em>virtualenv</em> does not exist, it is created automatically</td>
</tr>
<tr>
<td>virtualenv_command</td>
<td>no</td>
<td>virtualenv</td>
<td><ul></ul></td>
<td>The command to create the virtual environment with. For example <code>pyvenv</code>, <code>virtualenv</code>, <code>virtualenv2</code>. (added in Ansible 1.1)</td>
</tr>
<tr>
<td>virtualenv_site_packages</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Whether the virtual environment will inherit packages from the global site-packages directory. Note that if this setting is changed on an already existing virtual environment it will not have any effect, the environment must be deleted and newly created. (added in Ansible 1.1)</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
virtualenv
</p><br><pre># Examples from Ansible Playbooks
- easy_install: name=pip

# Install foo into the specified virtualenv.
- easy_install: name=foo virtualenv=/webapps/myapp/venv
</pre><h4>Notes</h4>
<p>Please note that the <span class="module">easy_install</span> module can only install Python libraries. Thus this module is not able to remove libraries. It is generally recommended to use the <span class="module">pip</span> module which you can first install using <span class="module">easy_install</span>.</p>
<p>Also note that <em>virtualenv</em> must be installed on the remote host if the <code>virtualenv</code> parameter is specified.</p></div>
<div class="section" id="gem">
<span id="id89"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id244">gem</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#gem" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>Manage installation and uninstallation of Ruby gems.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>gem_source</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The path to a local gem used as installation source.</td>
</tr>
<tr>
<td>include_dependencies</td>
<td>no</td>
<td>yes</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Wheter to include dependencies or not.</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The name of the gem to be managed.</td>
</tr>
<tr>
<td>repository</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The repository from which the gem will be installed</td>
</tr>
<tr>
<td>state</td>
<td>yes</td>
<td></td>
<td><ul><li>present</li><li>absent</li><li>latest</li></ul></td>
<td>The desired state of the gem. <code>latest</code> ensures that the latest version is installed.</td>
</tr>
<tr>
<td>user_install</td>
<td>no</td>
<td>yes</td>
<td><ul></ul></td>
<td>Install gem in user's local gems cache or for all users (added in Ansible 1.3)</td>
</tr>
<tr>
<td>version</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Version of the gem to be installed/removed.</td>
</tr>
</tbody></table><br><pre># Installs version 1.0 of vagrant.
- gem: name=vagrant version=1.0 state=present

# Installs latest available version of rake.
- gem: name=rake state=latest

# Installs rake version 1.0 from a local gem on disk.
- gem: name=rake gem_source=/path/to/gems/rake-1.0.gem state=present
</pre></div>
<div class="section" id="homebrew">
<span id="id90"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id245">homebrew</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#homebrew" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>Manages Homebrew packages</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>name of package to install/remove</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>state of the package</td>
</tr>
<tr>
<td>update_homebrew</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>update homebrew itself first</td>
</tr>
</tbody></table><br><pre>- homebrew: name=foo state=present
- homebrew: name=foo state=present update_homebrew=yes
- homebrew: name=foo state=absent
- homebrew: name=foo,bar state=absent
</pre></div>
<div class="section" id="macports">
<span id="id91"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id246">macports</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#macports" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>Manages MacPorts packages</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>name of package to install/remove</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li><li>active</li><li>inactive</li></ul></td>
<td>state of the package</td>
</tr>
<tr>
<td>update_cache</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>update the package db first</td>
</tr>
</tbody></table><br><pre>- macports: name=foo state=present
- macports: name=foo state=present update_cache=yes
- macports: name=foo state=absent
- macports: name=foo state=active
- macports: name=foo state=inactive
</pre></div>
<div class="section" id="npm">
<span id="id92"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id247">npm</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#npm" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>Manage node.js packages with Node Package Manager (npm)</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>executable</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The executable location for npm.This is useful if you are using a version manager, such as nvm</td>
</tr>
<tr>
<td>global</td>
<td>no</td>
<td></td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Install the node.js library globally</td>
</tr>
<tr>
<td>name</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The name of a node.js library to install</td>
</tr>
<tr>
<td>path</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The base path where to install the node.js libraries</td>
</tr>
<tr>
<td>production</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Install dependencies in production mode, excluding devDependencies</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li><li>latest</li></ul></td>
<td>The state of the node.js library</td>
</tr>
<tr>
<td>version</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The version to be installed</td>
</tr>
</tbody></table><br><pre>description: Install "coffee-script" node.js package.
- npm: name=coffee-script path=/app/location

description: Install "coffee-script" node.js package on version 1.6.1.
- npm: name=coffee-script version=1.6.1 path=/app/location

description: Install "coffee-script" node.js package globally.
- npm: name=coffee-script global=yes

description: Remove the globally package "coffee-script".
- npm: name=coffee-script global=yes state=absent

description: Install packages based on package.json.
- npm: path=/app/location

description: Update packages based on package.json to their latest version.
- npm: path=/app/location state=latest

description: Install packages based on package.json using the npm installed with nvm v0.10.1.
- npm: path=/app/location executable=/opt/nvm/v0.10.1/bin/npm state=present
</pre></div>
<div class="section" id="openbsd-pkg">
<span id="id93"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id248">openbsd_pkg</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#openbsd-pkg" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>Manage packages on OpenBSD using the pkg tools.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Name of the package.</td>
</tr>
<tr>
<td>state</td>
<td>yes</td>
<td></td>
<td><ul><li>present</li><li>latest</li><li>absent</li></ul></td>
<td><code>present</code> will make sure the package is installed. <code>latest</code> will make sure the latest version of the package is installed. <code>absent</code> will make sure the specified package is not installed.</td>
</tr>
</tbody></table><br><pre># Make sure nmap is installed
- openbsd_pkg: name=nmap state=present

# Make sure nmap is the latest version
- openbsd_pkg: name=nmap state=latest

# Make sure nmap is not installed
- openbsd_pkg: name=nmap state=absent
</pre></div>
<div class="section" id="opkg">
<span id="id94"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id249">opkg</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#opkg" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>Manages OpenWrt packages</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>name of package to install/remove</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>state of the package</td>
</tr>
<tr>
<td>update_cache</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>update the package db first</td>
</tr>
</tbody></table><br><pre>- opkg: name=foo state=present
- opkg: name=foo state=present update_cache=yes
- opkg: name=foo state=absent
- opkg: name=foo,bar state=absent
</pre></div>
<div class="section" id="pacman">
<span id="id95"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id250">pacman</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#pacman" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.0.</span></p>
</div>
<p>Manages Archlinux packages</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>name of package to install, upgrade or remove.</td>
</tr>
<tr>
<td>recurse</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>remove all not explicitly installed dependencies not required by other packages of the package to remove (added in Ansible 1.3)</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>state of the package (installed or absent).</td>
</tr>
<tr>
<td>update_cache</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>update the package database first (pacman -Syy).</td>
</tr>
</tbody></table><br><pre># Install package foo
- pacman: name=foo state=installed

# Remove package foo
- pacman: name=foo state=absent

# Remove packages foo and bar
- pacman: name=foo,bar state=absent

# Recursively remove package baz
- pacman: name=baz state=absent recurse=yes

# Update the package database (pacman -Syy) and install bar (bar will be the updated if a newer version exists)
- pacman: name=bar, state=installed, update_cache=yes
</pre></div>
<div class="section" id="pip">
<span id="id96"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id251">pip</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#pip" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.7.</span></p>
</div>
<p>Manage Python library dependencies. To use this module, one of the following keys is required: <tt class="docutils literal"><span class="pre">name</span></tt> or <tt class="docutils literal"><span class="pre">requirements</span></tt>.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>chdir</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>cd into this directory before running the command (added in Ansible 1.3)</td>
</tr>
<tr>
<td>extra_args</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Extra arguments passed to pip. (added in Ansible 1.0)</td>
</tr>
<tr>
<td>name</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The name of a Python library to install or the url of the remote package.</td>
</tr>
<tr>
<td>requirements</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The path to a pip requirements file</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li><li>latest</li></ul></td>
<td>The state of module</td>
</tr>
<tr>
<td>use_mirrors</td>
<td>no</td>
<td>yes</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Whether to use mirrors when installing python libraries. If using an older version of pip (&lt; 1.0), you should set this to no because older versions of pip do not support <em>--use-mirrors</em>. (added in Ansible 1.0)</td>
</tr>
<tr>
<td>version</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The version number to install of the Python library specified in the <em>name</em> parameter</td>
</tr>
<tr>
<td>virtualenv</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>An optional path to a <em>virtualenv</em> directory to install into</td>
</tr>
<tr>
<td>virtualenv_command</td>
<td>no</td>
<td>virtualenv</td>
<td><ul></ul></td>
<td>The command or a pathname to the command to create the virtual environment with. For example <code>pyvenv</code>, <code>virtualenv</code>, <code>virtualenv2</code>, <code>~/bin/virtualenv</code>, <code>/usr/local/bin/virtualenv</code>.</td>
</tr>
<tr>
<td>virtualenv_site_packages</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Whether the virtual environment will inherit packages from the global site-packages directory. Note that if this setting is changed on an already existing virtual environment it will not have any effect, the environment must be deleted and newly created. (added in Ansible 1.0)</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
virtualenv
pip
</p><br><pre># Install (flask) python package.
- pip: name=flask

# Install (flask) python package on version 0.8.
- pip: name=flask version=0.8

# Install (MyApp) using one of the remote protocols (bzr+,hg+,git+,svn+) or tarballs (zip, gz, bz2) (pip) supports. You do not have to supply '-e' option in extra_args. For these source names, (use_mirrors) is ignored and not applicable.
- pip: name='svn+http://myrepo/svn/MyApp#egg=MyApp'

# Install (Flask) into the specified (virtualenv), inheriting none of the globally installed modules
- pip: name=flask virtualenv=/my_app/venv

# Install (Flask) into the specified (virtualenv), inheriting globally installed modules
- pip: name=flask virtualenv=/my_app/venv virtualenv_site_packages=yes

# Install (Flask) into the specified (virtualenv), using Python 2.7
- pip: name=flask virtualenv=/my_app/venv virtualenv_command=virtualenv-2.7

# Install specified python requirements.
- pip: requirements=/my_app/requirements.txt

# Install specified python requirements in indicated (virtualenv).
- pip: requirements=/my_app/requirements.txt virtualenv=/my_app/venv

# Install specified python requirements and custom Index URL.
- pip: requirements=/my_app/requirements.txt extra_args='-i https://example.com/pypi/simple'
</pre><h4>Notes</h4>
<p>Please note that virtualenv (<a href="http://www.virtualenv.org/">http://www.virtualenv.org/</a>) must be installed on the remote host if the virtualenv parameter is specified.</p></div>
<div class="section" id="pkgin">
<span id="id97"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id252">pkgin</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#pkgin" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.0.</span></p>
</div>
<p>Manages SmartOS packages</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>name of package to install/remove</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>state of the package</td>
</tr>
</tbody></table><br><pre># install package foo"
- pkgin: name=foo state=present

# remove package foo
- pkgin: name=foo state=absent

# remove packages foo and bar
- pkgin: name=foo,bar state=absent
</pre></div>
<div class="section" id="pkgng">
<span id="id98"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id253">pkgng</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#pkgng" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>Manage binary packages for FreeBSD using ‘pkgng’ which is available in versions after 9.0.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>cached</td>
<td>no</td>
<td></td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>use local package base or try to fetch an updated one</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>name of package to install/remove</td>
</tr>
<tr>
<td>pkgsite</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>specify packagesite to use for downloading packages, if not specified, use settings from /usr/local/etc/pkg.conf</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>state of the package</td>
</tr>
</tbody></table><br><pre># Install package foo
- pkgng: name=foo state=present

# Remove packages foo and bar
- pkgng: name=foo,bar state=absent
</pre><h4>Notes</h4>
<p>When using pkgsite, be careful that already in cache packages won't be downloaded again.</p></div>
<div class="section" id="pkgutil">
<span id="id99"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id254">pkgutil</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#pkgutil" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.3.</span></p>
</div>
<p>Manages CSW packages (SVR4 format) on Solaris 10 and 11.
These were the native packages on Solaris &lt;= 10 and are available as a legacy feature in Solaris 11.
Pkgutil is an advanced packaging system, which resolves dependency on installation. It is designed for CSW packages.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Package name, e.g. (<code>CSWnrpe</code>)</td>
</tr>
<tr>
<td>site</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Specifies the repository path to install the package from.Its global definition is done in <code>/etc/opt/csw/pkgutil.conf</code>.</td>
</tr>
<tr>
<td>state</td>
<td>yes</td>
<td></td>
<td><ul><li>present</li><li>absent</li><li>latest</li></ul></td>
<td>Whether to install (<code>present</code>), or remove (<code>absent</code>) a package.The upgrade (<code>latest</code>) operation will update/install the package to the latest version available.Note: The module has a limitation that (<code>latest</code>) only works for one package, not lists of them.</td>
</tr>
</tbody></table><br><pre># Install a package
pkgutil: name=CSWcommon state=present

# Install a package from a specific repository
pkgutil: name=CSWnrpe site='ftp://myinternal.repo/opencsw/kiel state=latest'
</pre></div>
<div class="section" id="redhat-subscription">
<span id="id100"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id255">redhat_subscription</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#redhat-subscription" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>Manage registration and subscription to the Red Hat Network entitlement platform.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>activationkey</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>supply an activation key for use with registration</td>
</tr>
<tr>
<td>autosubscribe</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Upon successful registration, auto-consume available subscriptions</td>
</tr>
<tr>
<td>password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Red Hat Network password</td>
</tr>
<tr>
<td>pool</td>
<td>no</td>
<td>^$</td>
<td><ul></ul></td>
<td>Specify a subscription pool name to consume. Regular expressions accepted.</td>
</tr>
<tr>
<td>rhsm_baseurl</td>
<td>no</td>
<td>Current value from C(/etc/rhsm/rhsm.conf) is the default</td>
<td><ul></ul></td>
<td>Specify CDN baseurl</td>
</tr>
<tr>
<td>server_hostname</td>
<td>no</td>
<td>Current value from C(/etc/rhsm/rhsm.conf) is the default</td>
<td><ul></ul></td>
<td>Specify an alternative Red Hat Network server</td>
</tr>
<tr>
<td>server_insecure</td>
<td>no</td>
<td>Current value from C(/etc/rhsm/rhsm.conf) is the default</td>
<td><ul></ul></td>
<td>Allow traffic over insecure http</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>whether to register and subscribe (<code>present</code>), or unregister (<code>absent</code>) a system</td>
</tr>
<tr>
<td>username</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Red Hat Network username</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
subscription-manager
</p><br><pre># Register as user (joe_user) with password (somepass) and auto-subscribe to available content.
- redhat_subscription: action=register username=joe_user password=somepass autosubscribe=true

# Register with activationkey (1-222333444) and consume subscriptions matching
# the names (Red hat Enterprise Server) and (Red Hat Virtualization)
- redhat_subscription: action=register
                       activationkey=1-222333444
                       pool='^(Red Hat Enterprise Server|Red Hat Virtualization)$'
</pre><h4>Notes</h4>
<p>In order to register a system, subscription-manager requires either a username and password, or an activationkey.</p></div>
<div class="section" id="rhn-channel">
<span id="id101"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id256">rhn_channel</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#rhn-channel" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>Adds or removes Red Hat software channels</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>name of the software channel</td>
</tr>
<tr>
<td>password</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>the user's password</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul></ul></td>
<td>whether the channel should be present or not</td>
</tr>
<tr>
<td>sysname</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>name of the system as it is known in RHN/Satellite</td>
</tr>
<tr>
<td>url</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The full url to the RHN/Satellite api</td>
</tr>
<tr>
<td>user</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>RHN/Satellite user</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
none
</p><br><pre>- rhn_channel: name=rhel-x86_64-server-v2vwin-6 sysname=server01 url=https://rhn.redhat.com/rpc/api user=rhnuser password=guessme
</pre><h4>Notes</h4>
<p>this module fetches the system id from RHN.</p></div>
<div class="section" id="rhn-register">
<span id="id102"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id257">rhn_register</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#rhn-register" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>Manage registration to the Red Hat Network.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>activationkey</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>supply an activation key for use with registration</td>
</tr>
<tr>
<td>channels</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Optionally specify a list of comma-separated channels to subscribe to upon successful registration.</td>
</tr>
<tr>
<td>password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Red Hat Network password</td>
</tr>
<tr>
<td>server_url</td>
<td>no</td>
<td>Current value of I(serverURL) from C(/etc/sysconfig/rhn/up2date) is the default</td>
<td><ul></ul></td>
<td>Specify an alternative Red Hat Network server URL</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>whether to register (<code>present</code>), or unregister (<code>absent</code>) a system</td>
</tr>
<tr>
<td>username</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Red Hat Network username</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
rhnreg_ks
</p><br><pre># Unregister system from RHN.
- rhn_register: state=absent username=joe_user password=somepass

# Register as user (joe_user) with password (somepass) and auto-subscribe to available content.
- rhn_register: state=present username=joe_user password=somepass

# Register with activationkey (1-222333444) and enable extended update support.
- rhn_register: state=present activationkey=1-222333444 enable_eus=true

# Register as user (joe_user) with password (somepass) against a satellite
# server specified by (server_url).
- rhn_register:
    state=present
    username=joe_user
    password=somepass
    server_url=https://xmlrpc.my.satellite/XMLRPC

# Register as user (joe_user) with password (somepass) and enable
# channels (rhel-x86_64-server-6-foo-1) and (rhel-x86_64-server-6-bar-1).
- rhn_register: state=present username=joe_user
                password=somepass
                channels=rhel-x86_64-server-6-foo-1,rhel-x86_64-server-6-bar-1
</pre><h4>Notes</h4>
<p>In order to register a system, rhnreg_ks requires either a username and password, or an activationkey.</p></div>
<div class="section" id="rpm-key">
<span id="id103"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id258">rpm_key</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#rpm-key" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.3.</span></p>
</div>
<p>Adds or removes (rpm –import) a gpg key to your rpm database.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>key</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Key that will be modified. Can be a url, a file, or a keyid if the key already exists in the database.</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Wheather the key will be imported or removed from the rpm db.</td>
</tr>
</tbody></table><br><pre># Example action to import a key from a url
- rpm_key state=present key=http://apt.sw.be/RPM-GPG-KEY.dag.txt

# Example action to import a key from a file
- rpm_key state=present key=/path/to/key.gpg

# Example action to ensure a key is not present in the db
- rpm_key state=absent key=DEADB33F
</pre></div>
<div class="section" id="svr4pkg">
<span id="id104"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id259">svr4pkg</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#svr4pkg" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.9.</span></p>
</div>
<p>Manages SVR4 packages on Solaris 10 and 11.
These were the native packages on Solaris &lt;= 10 and are available as a legacy feature in Solaris 11.
Note that this is a very basic packaging system. It will not enforce dependencies on install or remove.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Package name, e.g. <code>SUNWcsr</code></td>
</tr>
<tr>
<td>proxy</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>HTTP[s] proxy to be used if <code>src</code> is a URL.</td>
</tr>
<tr>
<td>src</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Specifies the location to install the package from. Required when <code>state=present</code>.Can be any path acceptable to the <code>pkgadd</code> command's <code>-d</code> option. e.g.: <code>somefile.pkg</code>, <code>/dir/with/pkgs</code>, <code>http:/server/mypkgs.pkg</code>.If using a file or directory, they must already be accessible by the host. See the <span class="module">copy</span> module for a way to get them there.</td>
</tr>
<tr>
<td>state</td>
<td>yes</td>
<td></td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Whether to install (<code>present</code>), or remove (<code>absent</code>) a package.If the package is to be installed, then <em>src</em> is required.The SVR4 package system doesn't provide an upgrade operation. You need to uninstall the old, then install the new package.</td>
</tr>
</tbody></table><br><pre># Install a package from an already copied file
- svr4pkg: name=CSWcommon src=/tmp/cswpkgs.pkg state=present

# Install a package directly from an http site
- svr4pkg: name=CSWpkgutil src=http://get.opencsw.org/now state=present

# Ensure that a package is not installed.
- svr4pkg: name=SUNWgnome-sound-recorder state=absent
</pre></div>
<div class="section" id="yum">
<span id="id105"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id260">yum</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#yum" title="Permalink to this headline">¶</a></h3>
<p>Will install, upgrade, remove, and list packages with the <em>yum</em> package manager.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>conf_file</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The remote yum configuration file to use for the transaction. (added in Ansible 0.6)</td>
</tr>
<tr>
<td>disable_gpg_check</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Whether to disable the GPG checking of signatures of packages being installed. Has an effect only if state is <em>present</em> or <em>latest</em>. (added in Ansible 1.2)</td>
</tr>
<tr>
<td>disablerepo</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td><em>repoid</em> of repositories to disable for the install/update operation These repos will not persist beyond the transaction Multiple repos separated with a ',' (added in Ansible 0.9)</td>
</tr>
<tr>
<td>enablerepo</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Repoid of repositories to enable for the install/update operation. These repos will not persist beyond the transaction multiple repos separated with a ',' (added in Ansible 0.9)</td>
</tr>
<tr>
<td>list</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Various non-idempotent commands for usage with <code>/usr/bin/ansible</code> and <em>not</em> playbooks. See examples.</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Package name, or package specifier with version, like <code>name-1.0</code>. When using state=latest, this can be '*' which means run: yum -y update. You can also pass a url or a local path to a rpm file.</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>latest</li><li>absent</li></ul></td>
<td>Whether to install (<code>present</code>, <code>latest</code>), or remove (<code>absent</code>) a package.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
yum
rpm
</p><br><pre>- yum: name=httpd state=latest
- yum: name=httpd state=removed
- yum: name=httpd enablerepo=testing state=installed
- yum: name=* state=latest
- yum: name=http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm state=present
- yum: name=/usr/local/src/nginx-release-centos-6-0.el6.ngx.noarch.rpm state=present
- yum: name="@Development tools" state=present
</pre></div>
<div class="section" id="zypper">
<span id="id106"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id261">zypper</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#zypper" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>Manage packages on SuSE and openSuSE using the zypper and rpm tools.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>disable_gpg_check</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Whether to disable to GPG signature checking of the package signature being installed. Has an effect only if state is <em>present</em> or <em>latest</em>.</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>package name or package specifier wth version <code>name</code> or <code>name-1.0</code>.</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>latest</li><li>absent</li></ul></td>
<td><code>present</code> will make sure the package is installed. <code>latest</code> will make sure the latest version of the package is installed. <code>absent</code> will make sure the specified package is not installed.</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
zypper
rpm
</p><br><pre># Install "nmap"
- zypper: name=nmap state=present

# Remove the "nmap" package
- zypper: name=nmap state=absent
</pre></div>
</div>
<div class="section" id="source-control">
<h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id262">Source Control</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#source-control" title="Permalink to this headline">¶</a></h2>
<div class="section" id="bzr">
<span id="id107"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id263">bzr</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#bzr" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>Manage <em>bzr</em> branches to deploy files or software.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>dest</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Absolute path of where the branch should be cloned to.</td>
</tr>
<tr>
<td>executable</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Path to bzr executable to use. If not supplied, the normal mechanism for resolving binary paths will be used. (added in Ansible 1.4)</td>
</tr>
<tr>
<td>force</td>
<td>no</td>
<td>yes</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>If <code>yes</code>, any modified files in the working tree will be discarded.</td>
</tr>
<tr>
<td>name</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>SSH or HTTP protocol address of the parent branch.</td>
</tr>
<tr>
<td>version</td>
<td>no</td>
<td>head</td>
<td><ul></ul></td>
<td>What version of the branch to clone. This can be the bzr revno or revid.</td>
</tr>
</tbody></table><br><pre># Example bzr checkout from Ansible Playbooks
- bzr: name=bzr+ssh://foosball.example.org/path/to/branch dest=/srv/checkout version=22
</pre></div>
<div class="section" id="git">
<span id="id108"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id264">git</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#git" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.0.1.</span></p>
</div>
<p>Manage <em>git</em> checkouts of repositories to deploy files or software.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>depth</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Create a shallow clone with a history truncated to the specified number or revisions. The minimum possible value is <code>1</code>, otherwise ignored. (added in Ansible 1.2)</td>
</tr>
<tr>
<td>dest</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Absolute path of where the repository should be checked out to.</td>
</tr>
<tr>
<td>executable</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Path to git executable to use. If not supplied, the normal mechanism for resolving binary paths will be used. (added in Ansible 1.4)</td>
</tr>
<tr>
<td>force</td>
<td>no</td>
<td>yes</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>If <code>yes</code>, any modified files in the working repository will be discarded. Prior to 0.7, this was always 'yes' and could not be disabled. (added in Ansible 0.7)</td>
</tr>
<tr>
<td>remote</td>
<td>no</td>
<td>origin</td>
<td><ul></ul></td>
<td>Name of the remote.</td>
</tr>
<tr>
<td>repo</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>git, SSH, or HTTP protocol address of the git repository.</td>
</tr>
<tr>
<td>update</td>
<td>no</td>
<td>yes</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>If <code>yes</code>, repository will be updated using the supplied remote. Otherwise the repo will be left untouched. Prior to 1.2, this was always 'yes' and could not be disabled. (added in Ansible 1.2)</td>
</tr>
<tr>
<td>version</td>
<td>no</td>
<td>HEAD</td>
<td><ul></ul></td>
<td>What version of the repository to check out. This can be the git <em>SHA</em>, the literal string <code>HEAD</code>, a branch name, or a tag name.</td>
</tr>
</tbody></table><br><pre># Example git checkout from Ansible Playbooks
- git: repo=git://foosball.example.org/path/to/repo.git
       dest=/srv/checkout
       version=release-0.22

# Example read-write git checkout from github
- git: repo=ssh://git@github.com<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>/mylogin/hello.git dest=/home/mylogin/hello

# Example just ensuring the repo checkout exists
- git: repo=git://foosball.example.org/path/to/repo.git dest=/srv/checkout update=no
</pre><h4>Notes</h4>
<p>If the task seems to be hanging, first verify remote host is in <code>known_hosts</code>. SSH will prompt user to authorize the first contact with a remote host. One solution is to add <code>StrictHostKeyChecking no</code> in <code>.ssh/config</code> which will accept and authorize the connection on behalf of the user. However, if you run as a different user such as setting sudo to True), for example, root will not look at the user .ssh/config setting.</p></div>
<div class="section" id="hg">
<span id="id109"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id265">hg</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#hg" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.0.</span></p>
</div>
<p>Manages Mercurial (hg) repositories. Supports SSH, HTTP/S and local address.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>dest</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Absolute path of where the repository should be cloned to.</td>
</tr>
<tr>
<td>executable</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Path to hg executable to use. If not supplied, the normal mechanism for resolving binary paths will be used. (added in Ansible 1.4)</td>
</tr>
<tr>
<td>force</td>
<td>no</td>
<td>yes</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Discards uncommitted changes. Runs <code>hg update -C</code>.</td>
</tr>
<tr>
<td>purge</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Deletes untracked files. Runs <code>hg purge</code>. Note this requires <code>purge</code> extension to be enabled if <code>purge=yes</code>. This module will modify hgrc file on behalf of the user and undo the changes before exiting the task.</td>
</tr>
<tr>
<td>repo</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The repository address.</td>
</tr>
<tr>
<td>revision</td>
<td>no</td>
<td>default</td>
<td><ul></ul></td>
<td>Equivalent <code>-r</code> option in hg command which could be the changeset, revision number, branch name or even tag.</td>
</tr>
</tbody></table><br><pre># Ensure the current working copy is inside the stable branch and deletes untracked files if any.
- hg: repo=https://bitbucket.org/user/repo1 dest=/home/user/repo1 revision=stable purge=yes
</pre><h4>Notes</h4>
<p>If the task seems to be hanging, first verify remote host is in <code>known_hosts</code>. SSH will prompt user to authorize the first contact with a remote host. One solution is to add <code>StrictHostKeyChecking no</code> in <code>.ssh/config</code> which will accept and authorize the connection on behalf of the user. However, if you run as a different user such as setting sudo to True), for example, root will not look at the user .ssh/config setting.</p></div>
<div class="section" id="subversion">
<span id="id110"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id266">subversion</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#subversion" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.7.</span></p>
</div>
<p>Deploy given repository URL / revision to dest. If dest exists, update to the specified revision, otherwise perform a checkout.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>dest</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>Absolute path where the repository should be deployed.</td>
</tr>
<tr>
<td>executable</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Path to svn executable to use. If not supplied, the normal mechanism for resolving binary paths will be used. (added in Ansible 1.4)</td>
</tr>
<tr>
<td>force</td>
<td>no</td>
<td>yes</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>If <code>yes</code>, modified files will be discarded. If <code>no</code>, module will fail if it encounters modified files.</td>
</tr>
<tr>
<td>password</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>--password parameter passed to svn.</td>
</tr>
<tr>
<td>repo</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The subversion URL to the repository.</td>
</tr>
<tr>
<td>revision</td>
<td>no</td>
<td>HEAD</td>
<td><ul></ul></td>
<td>Specific revision to checkout.</td>
</tr>
<tr>
<td>username</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>--username parameter passed to svn.</td>
</tr>
</tbody></table><br><pre># Checkout subversion repository to specified folder.
- subversion: repo=svn+ssh://an.example.org/path/to/repo dest=/src/checkout
</pre><h4>Notes</h4>
<p>Requres <em>svn</em> to be installed on the client.</p></div>
</div>
<div class="section" id="system">
<h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id267">System</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#system" title="Permalink to this headline">¶</a></h2>
<div class="section" id="authorized-key">
<span id="id111"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id268">authorized_key</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#authorized-key" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.5.</span></p>
</div>
<p>Adds or removes authorized keys for particular user accounts</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>key</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The SSH public key, as a string</td>
</tr>
<tr>
<td>key_options</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>A string of ssh key options to be prepended to the key in the authorized_keys file (added in Ansible 1.4)</td>
</tr>
<tr>
<td>manage_dir</td>
<td>no</td>
<td>yes</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>Whether this module should manage the directory of the authorized_keys file (added in Ansible 1.2)</td>
</tr>
<tr>
<td>path</td>
<td>no</td>
<td>(homedir)+/.ssh/authorized_keys</td>
<td><ul></ul></td>
<td>Alternate path to the authorized_keys file (added in Ansible 1.2)</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Whether the given key (with the given key_options) should or should not be in the file</td>
</tr>
<tr>
<td>unique</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Ensure that there is only one key matching the specified key in the file (added in Ansible 1.4)</td>
</tr>
<tr>
<td>user</td>
<td>yes</td>
<td></td>
<td><ul></ul></td>
<td>The username on the remote host whose authorized_keys file will be modified</td>
</tr>
</tbody></table><br><pre># Example using key data from a local file on the management machine
- authorized_key: user=charlie key="{{ lookup('file', '/home/charlie/.ssh/id_rsa.pub') }}"

# Using alternate directory locations:
- authorized_key: user=charlie
                  key="{{ lookup('file', '/home/charlie/.ssh/id_rsa.pub') }}"
                  path='/etc/ssh/authorized_keys/charlie'
                  manage_dir=no

# Using with_file
- name: Set up authorized_keys for the deploy user
  authorized_key: user=deploy
                  key="{{ item }}"
  with_file:
    - public_keys/doe-jane
    - public_keys/doe-john

# Using key_options:
- authorized_key: user=charlie
                  key="{{ lookup('file', '/home/charlie/.ssh/id_rsa.pub') }}"
                  key_options='no-port-forwarding,host="10.0.1.1"'
</pre></div>
<div class="section" id="cron">
<span id="id112"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id269">cron</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#cron" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.9.</span></p>
</div>
<p>Use this module to manage crontab entries. This module allows you to create named crontab entries, update, or delete them.
The module includes one line with the description of the crontab entry <tt class="docutils literal"><span class="pre">"#Ansible:</span> <span class="pre">&lt;name&gt;"</span></tt> corresponding to the “name” passed to the module, which is used by future ansible/module calls to find/check the state.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
<tr>
<td>backup</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>If set, create a backup of the crontab before it is modified. The location of the backup is returned in the <code>backup</code> variable by this module.</td>
</tr>
<tr>
<td>cron_file</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>If specified, uses this file in cron.d instead of an individual user's crontab.</td>
</tr>
<tr>
<td>day</td>
<td>no</td>
<td>*</td>
<td><ul></ul></td>
<td>Day of the month the job should run ( 1-31, *, */2, etc )</td>
</tr>
<tr>
<td>hour</td>
<td>no</td>
<td>*</td>
<td><ul></ul></td>
<td>Hour when the job should run ( 0-23, *, */2, etc )</td>
</tr>
<tr>
<td>job</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>The command to execute. Required if state=present.</td>
</tr>
<tr>
<td>minute</td>
<td>no</td>
<td>*</td>
<td><ul></ul></td>
<td>Minute when the job should run ( 0-59, *, */2, etc )</td>
</tr>
<tr>
<td>month</td>
<td>no</td>
<td>*</td>
<td><ul></ul></td>
<td>Month of the year the job should run ( 1-12, *, */2, etc )</td>
</tr>
<tr>
<td>name</td>
<td>no</td>
<td></td>
<td><ul></ul></td>
<td>Description of a crontab entry.</td>
</tr>
<tr>
<td>reboot</td>
<td>no</td>
<td>no</td>
<td><ul><li>yes</li><li>no</li></ul></td>
<td>If the job should be run at reboot. This option is deprecated. Users should use special_time. (added in Ansible 1.0)</td>
</tr>
<tr>
<td>special_time</td>
<td>no</td>
<td></td>
<td><ul><li>reboot</li><li>yearly</li><li>annually</li><li>monthly</li><li>weekly</li><li>daily</li><li>hourly</li></ul></td>
<td>Special time specification nickname. (added in Ansible 1.3)</td>
</tr>
<tr>
<td>state</td>
<td>no</td>
<td>present</td>
<td><ul><li>present</li><li>absent</li></ul></td>
<td>Whether to ensure the job is present or absent.</td>
</tr>
<tr>
<td>user</td>
<td>no</td>
<td>root</td>
<td><ul></ul></td>
<td>The specific user who's crontab should be modified.</td>
</tr>
<tr>
<td>weekday</td>
<td>no</td>
<td>*</td>
<td><ul></ul></td>
<td>Day of the week that the job should run ( 0-7 for Sunday - Saturday, *, etc )</td>
</tr>
</tbody></table><p>
<b>Requirements:</b>
cron
</p><br><pre># Ensure a job that runs at 2 and 5 exists.
# Creates an entry like "* 5,2 * * ls -alh &gt; /dev/null"
- cron: name="check dirs" hour="5,2" job="ls -alh &gt; /dev/null"

# Ensure an old job is no longer present. Removes any job that is prefixed
# by "#Ansible: an old job" from the crontab
- cron: name="an old job" state=absent

# Creates an entry like "@reboot /some/job.sh"
- cron: name="a job for reboot" special_time=reboot job="/some/job.sh"

# Creates a cron file under /etc/cron.d
- cron: name="yum autoupdate" weekday="2" minute=0 hour=12
        user="root" job="YUMINTERACTIVE=0 /usr/sbin/yum-autoupdate"
        cron_file=ansible_yum-autoupdate

# Removes a cron file from under /etc/cron.d
- cron: cron_file=ansible_yum-autoupdate state=absent
</pre></div>
<div class="section" id="facter">
<span id="id113"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id270">facter</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#facter" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.2.</span></p>
</div>
<p>Runs the <em>facter</em> discovery program (<a class="reference external" href="https://github.com/puppetlabs/facter">https://github.com/puppetlabs/facter</a>) on the remote system, returning JSON data that can be useful for inventory purposes.</p>
<p>
<b>Requirements:</b>
    facter
    ruby-json
    </p><br><pre># Example command-line invocation
ansible www.example.net -m facter
</pre></div>
<div class="section" id="filesystem">
<span id="id114"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id271">filesystem</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#filesystem" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>This module creates file system.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>dev</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>Target block device.</td>
</tr>
        <tr>
<td>force</td>
<td>no</td>
<td>no</td>
    <td><ul><li>yes</li><li>no</li></ul></td>
    <td>If yes, allows to create new filesystem on devices that already has filesystem.</td>
</tr>
        <tr>
<td>fstype</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>File System type to be created.</td>
</tr>
        <tr>
<td>opts</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>List of options to be passed to mkfs command.</td>
</tr>
    </tbody></table><br><pre># Create a ext2 filesystem on /dev/sdb1.
- filesystem: fstype=ext2 dev=/dev/sdb1

# Create a ext4 filesystem on /dev/sdb1 and check disk blocks.
- filesystem: fstype=ext4 dev=/dev/sdb1 opts="-cc"
</pre><h4>Notes</h4>
    <p>uses mkfs command</p></div>
<div class="section" id="firewalld">
<span id="id115"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id272">firewalld</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#firewalld" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.4.</span></p>
</div>
<p>This module allows for addition or deletion of services and ports either tcp or udp in either running or permanent firewalld rules</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>permanent</td>
<td>yes</td>
<td>True</td>
    <td><ul></ul></td>
    <td>Should this configuration be in the running firewalld configuration or persist across reboots</td>
</tr>
        <tr>
<td>port</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Name of a port to add/remove to/from firewalld must be in the form PORT/PROTOCOL</td>
</tr>
        <tr>
<td>service</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Name of a service to add/remove to/from firewalld - service must be listed in /etc/services</td>
</tr>
        <tr>
<td>state</td>
<td>yes</td>
<td>enabled</td>
    <td><ul></ul></td>
    <td>Should this port accept(enabled) or reject(disabled) connections</td>
</tr>
        <tr>
<td>timeout</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>The amount of time the rule should be in effect for when non-permanent</td>
</tr>
        <tr>
<td>zone</td>
<td>no</td>
<td>system-default(public)</td>
    <td><ul><li>work</li><li>drop</li><li>internal</li><li>external</li><li>trusted</li><li>home</li><li>dmz</li><li>public</li><li>block</li></ul></td>
    <td>The firewalld zone to add/remove to/from (NOTE: default zone can be configured per system but "public" is default from upstream. Available choices can be extended based on per-system configs, listed here are "out of the box" defaults).</td>
</tr>
    </tbody></table><p>
<b>Requirements:</b>
    firewalld &gt;= 0.2.11
    </p><br><pre>- firewalld: service=https permanent=true state=enabled
- firewalld: port=8081/tcp permanent=true state=disabled
- firewalld: zone=dmz service=http permanent=true state=enabled
</pre><h4>Notes</h4>
    <p>Not tested on any debian based system</p></div>
<div class="section" id="group">
<span id="id116"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id273">group</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#group" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.0.2.</span></p>
</div>
<p>Manage presence of groups on a host.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>gid</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Optional <em>GID</em> to set for the group.</td>
</tr>
        <tr>
<td>name</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>Name of the group to manage.</td>
</tr>
        <tr>
<td>state</td>
<td>no</td>
<td>present</td>
    <td><ul><li>present</li><li>absent</li></ul></td>
    <td>Whether the group should be present or not on the remote host.</td>
</tr>
        <tr>
<td>system</td>
<td>no</td>
<td>no</td>
    <td><ul><li>yes</li><li>no</li></ul></td>
    <td>If <em>yes</em>, indicates that the group created is a system group.</td>
</tr>
    </tbody></table><p>
<b>Requirements:</b>
    groupadd
    groupdel
    groupmod
    </p><br><pre># Example group command from Ansible Playbooks
- group: name=somegroup state=present
</pre></div>
<div class="section" id="host">
<span id="id117"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id274">host</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#host" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.4.</span></p>
</div>
<p>Manage entries in <tt class="docutils literal"><span class="pre">/etc/hosts</span></tt>.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>aliases</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>list of alias hostnames, comma separated.</td>
</tr>
        <tr>
<td>hostname</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>name of host. Required if <code>state=present</code>.</td>
</tr>
        <tr>
<td>ip</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>IP address. Required if <code>state=present</code>.</td>
</tr>
        <tr>
<td>state</td>
<td>no</td>
<td>present</td>
    <td><ul><li>present</li><li>absent</li></ul></td>
    <td>Whether the entries should be present or not in <code>/etc/hosts</code>.</td>
</tr>
    </tbody></table><br><pre># Example host command from Ansible Playbooks
- host: ip=127.0.0.1 hostname=localhost state=present
- host: ip=127.0.0.1 hostname=localhost aliases=foobar.com,localhost.foobar.com
- host: ip=192.168.1.1 state=absent
- host: hostname=www.example.com state=absent
- host: ip=::1 hostname=localhost6 aliases=ip6-localhost,ip6-loopback
</pre></div>
<div class="section" id="lvg">
<span id="id118"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id275">lvg</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#lvg" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>This module creates, removes or resizes volume groups.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>force</td>
<td>no</td>
<td>no</td>
    <td><ul><li>yes</li><li>no</li></ul></td>
    <td>If yes, allows to remove volume group with logical volumes.</td>
</tr>
        <tr>
<td>pesize</td>
<td>no</td>
<td>4</td>
    <td><ul></ul></td>
    <td>The size of the physical extent in megabytes. Must be a power of 2.</td>
</tr>
        <tr>
<td>pvs</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>List of comma-separated devices to use as physical devices in this volume group. Required when creating or resizing volume group.</td>
</tr>
        <tr>
<td>state</td>
<td>no</td>
<td>present</td>
    <td><ul><li>present</li><li>absent</li></ul></td>
    <td>Control if the volume group exists.</td>
</tr>
        <tr>
<td>vg</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>The name of the volume group.</td>
</tr>
    </tbody></table><br><pre># Create a volume group on top of /dev/sda1 with physical extent size = 32MB.
- lvg:  vg=vg.services pvs=/dev/sda1 pesize=32

# Create or resize a volume group on top of /dev/sdb1 and /dev/sdc5.
# If, for example, we already have VG vg.services on top of /dev/sdb1,
# this VG will be extended by /dev/sdc5.  Or if vg.services was created on
# top of /dev/sda5, we first extend it with /dev/sdb1 and /dev/sdc5,
# and then reduce by /dev/sda5.
- lvg: vg=vg.services pvs=/dev/sdb1,/dev/sdc5

# Remove a volume group with name vg.services.
- lvg: vg=vg.services state=absent
</pre><h4>Notes</h4>
    <p>module does not modify PE size for already present volume group</p></div>
<div class="section" id="lvol">
<span id="id119"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id276">lvol</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#lvol" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>This module creates, removes or resizes logical volumes.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>lv</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>The name of the logical volume.</td>
</tr>
        <tr>
<td>size</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>The size of the logical volume, according to lvcreate(8) --size, by default in megabytes or optionally with one of [bBsSkKmMgGtTpPeE] units; or according to lvcreate(8) --extents as a percentage of [VG|PVS|FREE]; resizing is not supported with percentages.</td>
</tr>
        <tr>
<td>state</td>
<td>no</td>
<td>present</td>
    <td><ul><li>present</li><li>absent</li></ul></td>
    <td>Control if the logical volume exists.</td>
</tr>
        <tr>
<td>vg</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>The volume group this logical volume is part of.</td>
</tr>
    </tbody></table><br><pre># Create a logical volume of 512m.
- lvol: vg=firefly lv=test size=512

# Create a logical volume of 512g.
- lvol: vg=firefly lv=test size=512g

# Create a logical volume the size of all remaining space in the volume group
- lvol: vg=firefly lv=test size=100%FREE

# Extend the logical volume to 1024m.
- lvol: vg=firefly lv=test size=1024

# Reduce the logical volume to 512m
- lvol: vg=firefly lv=test size=512

# Remove the logical volume.
- lvol: vg=firefly lv=test state=absent
</pre><h4>Notes</h4>
    <p>Filesystems on top of the volume are not resized.</p></div>
<div class="section" id="modprobe">
<span id="id120"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id277">modprobe</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#modprobe" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.4.</span></p>
</div>
<p>Add or remove kernel modules.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>name</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>Name of kernel module to manage.</td>
</tr>
        <tr>
<td>state</td>
<td>no</td>
<td>present</td>
    <td><ul><li>present</li><li>absent</li></ul></td>
    <td>Whether the module should be present or absent.</td>
</tr>
    </tbody></table><br><pre># Add the 802.1q module
- modprobe: name=8021q state=present
</pre></div>
<div class="section" id="mount">
<span id="id121"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id278">mount</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#mount" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.6.</span></p>
</div>
<p>This module controls active and configured mount points in <tt class="docutils literal"><span class="pre">/etc/fstab</span></tt>.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>dump</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>dump (see fstab(8))</td>
</tr>
        <tr>
<td>fstype</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>file-system type</td>
</tr>
        <tr>
<td>name</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>path to the mount point, eg: <code>/mnt/files</code></td>
</tr>
        <tr>
<td>opts</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>mount options (see fstab(8))</td>
</tr>
        <tr>
<td>passno</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>passno (see fstab(8))</td>
</tr>
        <tr>
<td>src</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>device to be mounted on <em>name</em>.</td>
</tr>
        <tr>
<td>state</td>
<td>yes</td>
<td></td>
    <td><ul><li>present</li><li>absent</li><li>mounted</li><li>unmounted</li></ul></td>
    <td>If <code>mounted</code> or <code>unmounted</code>, the device will be actively mounted or unmounted as well as just configured in <em>fstab</em>. <code>absent</code> and <code>present</code> only deal with <em>fstab</em>.</td>
</tr>
    </tbody></table><br><pre># Mount DVD read-only
- mount: name=/mnt/dvd src=/dev/sr0 fstype=iso9660 opts=ro state=present

# Mount up device by label
- mount: name=/srv/disk src='LABEL=SOME_LABEL' state=present

# Mount up device by UUID
- mount: name=/home src='UUID=b3e48f45-f933-4c8e-a700-22a159ec9077' opts=noatime state=present
</pre></div>
<div class="section" id="ohai">
<span id="id122"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id279">ohai</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#ohai" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.6.</span></p>
</div>
<p>Similar to the <tt class="docutils literal"><span class="pre">facter</span></tt> module, this runs the <em>Ohai</em> discovery program (<a class="reference external" href="http://wiki.opscode.com/display/chef/Ohai">http://wiki.opscode.com/display/chef/Ohai</a>) on the remote host and returns JSON inventory data. <em>Ohai</em> data is a bit more verbose and nested than <em>facter</em>.</p>
<p>
<b>Requirements:</b>
    ohai
    </p><br><pre># Retrieve (ohai) data from all Web servers and store in one-file per host
ansible webservers -m ohai --tree=/tmp/ohaidata
</pre></div>
<div class="section" id="open-iscsi">
<span id="id123"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id280">open_iscsi</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#open-iscsi" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.4.</span></p>
</div>
<p>Discover targets on given portal, (dis)connect targets, mark targets to manually or auto start, return device nodes of connected targets.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>auto_node_startup</td>
<td>no</td>
<td></td>
    <td><ul><li>True</li><li>False</li></ul></td>
    <td>whether the target node should be automatically connected at startup</td>
</tr>
        <tr>
<td>discover</td>
<td>no</td>
<td></td>
    <td><ul><li>True</li><li>False</li></ul></td>
    <td>whether the list of target nodes on the portal should be (re)discovered and added to the persistent iscsi database. Keep in mind that iscsiadm discovery resets configurtion, like node.startup to manual, hence combined with auto_node_startup=yes will allways return a changed state.</td>
</tr>
        <tr>
<td>login</td>
<td>no</td>
<td></td>
    <td><ul><li>True</li><li>False</li></ul></td>
    <td>whether the target node should be connected</td>
</tr>
        <tr>
<td>node_auth</td>
<td>no</td>
<td>CHAP</td>
    <td><ul></ul></td>
    <td>discovery.sendtargets.auth.authmethod</td>
</tr>
        <tr>
<td>node_pass</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>discovery.sendtargets.auth.password</td>
</tr>
        <tr>
<td>node_user</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>discovery.sendtargets.auth.username</td>
</tr>
        <tr>
<td>port</td>
<td>no</td>
<td>3260</td>
    <td><ul></ul></td>
    <td>the port on which the iscsi target process listens</td>
</tr>
        <tr>
<td>portal</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>the ip address of the iscsi target</td>
</tr>
        <tr>
<td>show_nodes</td>
<td>no</td>
<td></td>
    <td><ul><li>True</li><li>False</li></ul></td>
    <td>whether the list of nodes in the persistent iscsi database should be returned by the module</td>
</tr>
        <tr>
<td>target</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>the iscsi target name</td>
</tr>
    </tbody></table><p>
<b>Requirements:</b>
    open_iscsi library and tools (iscsiadm)
    </p><p>perform a discovery on 10.1.2.3 and show available target nodes</p>    <p>
</p><pre>open_iscsi: show_nodes=yes discover=yes portal=10.1.2.3
</pre>
<p></p>
<p>discover targets on portal and login to the one available (only works if exactly one target is exported to the initiator)</p>    <p>
</p><pre>open_iscsi: portal={{iscsi_target}} login=yes discover=yes
</pre>
<p></p>
<p>connect to the named target, after updating the local persistent database (cache)</p>    <p>
</p><pre>open_iscsi: login=yes target=iqn.1986-03.com.sun:02:f8c1f9e0-c3ec-ec84-c9c9-8bfb0cd5de3d
</pre>
<p></p>
<p>discconnect from the cached named target</p>    <p>
</p><pre>open_iscsi: login=no target=iqn.1986-03.com.sun:02:f8c1f9e0-c3ec-ec84-c9c9-8bfb0cd5de3d"
</pre>
<p></p>
<br></div>
<div class="section" id="ping">
<span id="id124"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id281">ping</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#ping" title="Permalink to this headline">¶</a></h3>
<p>A trivial test module, this module always returns <tt class="docutils literal"><span class="pre">pong</span></tt> on successful contact. It does not make sense in playbooks, but it is useful from <tt class="docutils literal"><span class="pre">/usr/bin/ansible</span></tt></p>
<br><pre># Test 'webservers' status
ansible webservers -m ping
</pre></div>
<div class="section" id="seboolean">
<span id="id125"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id282">seboolean</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#seboolean" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.7.</span></p>
</div>
<p>Toggles SELinux booleans.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>name</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>Name of the boolean to configure</td>
</tr>
        <tr>
<td>persistent</td>
<td>no</td>
<td></td>
    <td><ul><li>yes</li><li>no</li></ul></td>
    <td>Set to <code>yes</code> if the boolean setting should survive a reboot</td>
</tr>
        <tr>
<td>state</td>
<td>yes</td>
<td></td>
    <td><ul><li>yes</li><li>no</li></ul></td>
    <td>Desired boolean value</td>
</tr>
    </tbody></table><br><pre># Set (httpd_can_network_connect) flag on and keep it persistent across reboots
- seboolean: name=httpd_can_network_connect state=yes persistent=yes
</pre><h4>Notes</h4>
    <p>Not tested on any debian based system</p></div>
<div class="section" id="selinux">
<span id="id126"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id283">selinux</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#selinux" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.7.</span></p>
</div>
<p>Configures the SELinux mode and policy. A reboot may be required after usage. Ansible will not issue this reboot but will let you know when it is required.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>conf</td>
<td>no</td>
<td>/etc/selinux/config</td>
    <td><ul></ul></td>
    <td>path to the SELinux configuration file, if non-standard</td>
</tr>
        <tr>
<td>policy</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>name of the SELinux policy to use (example: <code>targeted</code>) will be required if state is not <code>disabled</code></td>
</tr>
        <tr>
<td>state</td>
<td>yes</td>
<td></td>
    <td><ul><li>enforcing</li><li>permissive</li><li>disabled</li></ul></td>
    <td>The SELinux mode</td>
</tr>
    </tbody></table><p>
<b>Requirements:</b>
    libselinux-python
    </p><br><pre>- selinux: policy=targeted state=enforcing
- selinux: policy=targeted state=permissive
- selinux: state=disabled
</pre><h4>Notes</h4>
    <p>Not tested on any debian based system</p></div>
<div class="section" id="service">
<span id="id127"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id284">service</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#service" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.1.</span></p>
</div>
<p>Controls services on remote hosts.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>arguments</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Additional arguments provided on the command line</td>
</tr>
        <tr>
<td>enabled</td>
<td>no</td>
<td></td>
    <td><ul><li>yes</li><li>no</li></ul></td>
    <td>Whether the service should start on boot. At least one of state and enabled are required.</td>
</tr>
        <tr>
<td>name</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>Name of the service.</td>
</tr>
        <tr>
<td>pattern</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>If the service does not respond to the status command, name a substring to look for as would be found in the output of the <em>ps</em> command as a stand-in for a status result.  If the string is found, the service will be assumed to be running. (added in Ansible 0.7)</td>
</tr>
        <tr>
<td>runlevel</td>
<td>no</td>
<td>default</td>
    <td><ul></ul></td>
    <td>For OpenRC init scripts (ex: Gentoo) only.  The runlevel that this service belongs to.</td>
</tr>
        <tr>
<td>sleep</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>If the service is being <code>restarted</code> then sleep this many seconds between the stop and start command. This helps to workaround badly behaving init scripts that exit immediately after signaling a process to stop. (added in Ansible 1.3)</td>
</tr>
        <tr>
<td>state</td>
<td>no</td>
<td></td>
    <td><ul><li>started</li><li>stopped</li><li>restarted</li><li>reloaded</li></ul></td>
    <td><code>started</code>/<code>stopped</code> are idempotent actions that will not run commands unless necessary.  <code>restarted</code> will always bounce the service.  <code>reloaded</code> will always reload. At least one of state and enabled are required.</td>
</tr>
    </tbody></table><br><pre># Example action to start service httpd, if not running
- service: name=httpd state=started

# Example action to stop service httpd, if running
- service: name=httpd state=stopped

# Example action to restart service httpd, in all cases
- service: name=httpd state=restarted

# Example action to reload service httpd, in all cases
- service: name=httpd state=reloaded

# Example action to enable service httpd, and not touch the running state
- service: name=httpd enabled=yes

# Example action to start service foo, based on running process /usr/bin/foo
- service: name=foo pattern=/usr/bin/foo state=started

# Example action to restart network service for interface eth0
- service: name=network state=restarted args=eth0
</pre></div>
<div class="section" id="setup">
<span id="id128"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id285">setup</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#setup" title="Permalink to this headline">¶</a></h3>
<p>This module is automatically called by playbooks to gather useful variables about remote hosts that can be used in playbooks. It can also be executed directly by <tt class="docutils literal"><span class="pre">/usr/bin/ansible</span></tt> to check what variables are available to a host. Ansible provides many <em>facts</em> about the system, automatically.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>fact_path</td>
<td>no</td>
<td>/etc/ansible/facts.d</td>
    <td><ul></ul></td>
    <td>path used for local ansible facts (*.fact) - files in this dir will be run (if executable) and their results be added to ansible_local facts if a file is not executable it is read. File/results format can be json or ini-format (added in Ansible 1.3)</td>
</tr>
        <tr>
<td>filter</td>
<td>no</td>
<td>*</td>
    <td><ul></ul></td>
    <td>if supplied, only return facts that match this shell-style (fnmatch) wildcard. (added in Ansible 1.1)</td>
</tr>
    </tbody></table><br><pre># Display facts from all hosts and store them indexed by I(hostname) at C(/tmp/facts).
ansible all -m setup --tree /tmp/facts

# Display only facts regarding memory found by ansible on all hosts and output them.
ansible all -m setup -a 'filter=ansible_*_mb'

# Display only facts returned by facter.
ansible all -m setup -a 'filter=facter_*'

# Display only facts returned by facter.
ansible all -m setup -a 'filter=ansible_eth[0-2]'
</pre><h4>Notes</h4>
    <p>More ansible facts will be added with successive releases. If <em>facter</em> or <em>ohai</em> are installed, variables from these programs will also be snapshotted into the JSON file for usage in templating. These variables are prefixed with <code>facter_</code> and <code>ohai_</code> so it's easy to tell their source. All variables are bubbled up to the caller. Using the ansible facts and choosing to not install <em>facter</em> and <em>ohai</em> means you can avoid Ruby-dependencies on your remote systems. (See also <span class="module">facter</span> and <span class="module">ohai</span>.)</p>
    <p>The filter option filters only the first level subkey below ansible_facts.</p></div>
<div class="section" id="sysctl">
<span id="id129"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id286">sysctl</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#sysctl" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.0.</span></p>
</div>
<p>This module manipulates sysctl entries and performs a <em>/sbin/sysctl -p</em> after changing them.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>checks</td>
<td>no</td>
<td>both</td>
    <td><ul><li>none</li><li>before</li><li>after</li><li>both</li></ul></td>
    <td>if <code>checks</code>=<em>none</em> no smart/facultative checks will be madeif <code>checks</code>=<em>before</em> some checks performed before any update (ie. does the sysctl key is writable ?)if <code>checks</code>=<em>after</em> some checks performed after an update (ie. does kernel give back the set value ?)if <code>checks</code>=<em>both</em> all the smart checks <em>before and after</em> are performed</td>
</tr>
        <tr>
<td>name</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>this is the short path, decimal separated, to the sysctl entry</td>
</tr>
        <tr>
<td>reload</td>
<td>no</td>
<td>yes</td>
    <td><ul><li>yes</li><li>no</li></ul></td>
    <td>if <code>reload=yes</code>, performs a <em>/sbin/sysctl -p</em> if the <code>sysctl_file</code> is updatedif <code>reload=no</code>, does not reload <em>sysctl</em> even if the <code>sysctl_file</code> is updated</td>
</tr>
        <tr>
<td>state</td>
<td>no</td>
<td>present</td>
    <td><ul><li>present</li><li>absent</li></ul></td>
    <td>whether the entry should be present or absent</td>
</tr>
        <tr>
<td>sysctl_file</td>
<td>no</td>
<td>/etc/sysctl.conf</td>
    <td><ul></ul></td>
    <td>specifies the absolute path to <code>sysctl.conf</code>, if not /etc/sysctl.conf</td>
</tr>
        <tr>
<td>value</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>set the sysctl value to this entry</td>
</tr>
    </tbody></table><br><pre># Set vm.swappiness to 5 in /etc/sysctl.conf
- sysctl: name=vm.swappiness value=5 state=present

# Remove kernel.panic entry from /etc/sysctl.conf
- sysctl: name=kernel.panic state=absent sysctl_file=/etc/sysctl.conf

# Set kernel.panic to 3 in /tmp/test_sysctl.conf, check if the sysctl key
# seems writable, but do not reload sysctl, and do not check kernel value
# after (not needed, because the real /etc/sysctl.conf was not updated)
- sysctl: name=kernel.panic value=3 sysctl_file=/tmp/test_sysctl.conf check=before reload=no
</pre></div>
<div class="section" id="user">
<span id="id130"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id287">user</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#user" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.2.</span></p>
</div>
<p>Manage user accounts and user attributes.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>append</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>If <code>yes</code>, will only add groups, not set them to just the list in <em>groups</em>.</td>
</tr>
        <tr>
<td>comment</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Optionally sets the description (aka <em>GECOS</em>) of user account.</td>
</tr>
        <tr>
<td>createhome</td>
<td>no</td>
<td>yes</td>
    <td><ul><li>yes</li><li>no</li></ul></td>
    <td>Unless set to <code>no</code>, a home directory will be made for the user when the account is created.</td>
</tr>
        <tr>
<td>force</td>
<td>no</td>
<td>no</td>
    <td><ul><li>yes</li><li>no</li></ul></td>
    <td>When used with <code>state=absent</code>, behavior is as with <code>userdel --force</code>.</td>
</tr>
        <tr>
<td>generate_ssh_key</td>
<td>no</td>
<td>no</td>
    <td><ul><li>yes</li><li>no</li></ul></td>
    <td>Whether to generate a SSH key for the user in question. This will <b>not</b> overwrite an existing SSH key. (added in Ansible 0.9)</td>
</tr>
        <tr>
<td>group</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Optionally sets the user's primary group (takes a group name).</td>
</tr>
        <tr>
<td>groups</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Puts the user in this comma-delimited list of groups. When set to the empty string ('groups='), the user is removed from all groups except the primary group.</td>
</tr>
        <tr>
<td>home</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Optionally set the user's home directory.</td>
</tr>
        <tr>
<td>login_class</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Optionally sets the user's login class for FreeBSD, OpenBSD and NetBSD systems.</td>
</tr>
        <tr>
<td>name</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>Name of the user to create, remove or modify.</td>
</tr>
        <tr>
<td>non_unique</td>
<td>no</td>
<td>no</td>
    <td><ul><li>yes</li><li>no</li></ul></td>
    <td>Optionally when used with the -u option, this option allows to change the user ID to a non-unique value. (added in Ansible 1.1)</td>
</tr>
        <tr>
<td>password</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Optionally set the user's password to this crypted value.  See the user example in the github examples directory for what this looks like in a playbook.Passwords values can be generated with "openssl passwd -salt &lt;salt&gt; -1 &lt;plaintext&gt;"</td>
</tr>
        <tr>
<td>remove</td>
<td>no</td>
<td>no</td>
    <td><ul><li>yes</li><li>no</li></ul></td>
    <td>When used with <code>state=absent</code>, behavior is as with <code>userdel --remove</code>.</td>
</tr>
        <tr>
<td>shell</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Optionally set the user's shell.</td>
</tr>
        <tr>
<td>ssh_key_bits</td>
<td>no</td>
<td>2048</td>
    <td><ul></ul></td>
    <td>Optionally specify number of bits in SSH key to create. (added in Ansible 0.9)</td>
</tr>
        <tr>
<td>ssh_key_comment</td>
<td>no</td>
<td>ansible-generated</td>
    <td><ul></ul></td>
    <td>Optionally define the comment for the SSH key. (added in Ansible 0.9)</td>
</tr>
        <tr>
<td>ssh_key_file</td>
<td>no</td>
<td>$HOME/.ssh/id_rsa</td>
    <td><ul></ul></td>
    <td>Optionally specify the SSH key filename. (added in Ansible 0.9)</td>
</tr>
        <tr>
<td>ssh_key_passphrase</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Set a passphrase for the SSH key.  If no passphrase is provided, the SSH key will default to having no passphrase. (added in Ansible 0.9)</td>
</tr>
        <tr>
<td>ssh_key_type</td>
<td>no</td>
<td>rsa</td>
    <td><ul></ul></td>
    <td>Optionally specify the type of SSH key to generate. Available SSH key types will depend on implementation present on target host. (added in Ansible 0.9)</td>
</tr>
        <tr>
<td>state</td>
<td>no</td>
<td>present</td>
    <td><ul><li>present</li><li>absent</li></ul></td>
    <td>Whether the account should exist.  When <code>absent</code>, removes the user account.</td>
</tr>
        <tr>
<td>system</td>
<td>no</td>
<td>no</td>
    <td><ul><li>yes</li><li>no</li></ul></td>
    <td>When creating an account, setting this to <code>yes</code> makes the user a system account.  This setting cannot be changed on existing users.</td>
</tr>
        <tr>
<td>uid</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Optionally sets the <em>UID</em> of the user.</td>
</tr>
        <tr>
<td>update_password</td>
<td>no</td>
<td>always</td>
    <td><ul><li>always</li><li>on_create</li></ul></td>
    <td><code>always</code> will update passwords if they differ.  <code>on_create</code> will only set the password for newly created users. (added in Ansible 1.3)</td>
</tr>
    </tbody></table><p>
<b>Requirements:</b>
    useradd
    userdel
    usermod
    </p><br><pre># Add the user 'johnd' with a specific uid and a primary group of 'admin'
- user: name=johnd comment="John Doe" uid=1040

# Remove the user 'johnd'
- user: name=johnd state=absent remove=yes

# Create a 2048-bit SSH key for user jsmith
- user: name=jsmith generate_ssh_key=yes ssh_key_bits=2048
</pre></div>
<div class="section" id="zfs">
<span id="id131"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id288">zfs</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#zfs" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>Manages ZFS file systems on Solaris and FreeBSD. Can manage file systems, volumes and snapshots. See zfs(1M) for more information about the properties.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>aclinherit</td>
<td>no</td>
<td></td>
    <td><ul><li>discard</li><li>noallow</li><li>restricted</li><li>passthrough</li><li>passthrough-x</li></ul></td>
    <td>The aclinherit property.</td>
</tr>
        <tr>
<td>aclmode</td>
<td>no</td>
<td></td>
    <td><ul><li>discard</li><li>groupmask</li><li>passthrough</li></ul></td>
    <td>The aclmode property.</td>
</tr>
        <tr>
<td>atime</td>
<td>no</td>
<td></td>
    <td><ul><li>on</li><li>off</li></ul></td>
    <td>The atime property.</td>
</tr>
        <tr>
<td>canmount</td>
<td>no</td>
<td></td>
    <td><ul><li>on</li><li>off</li><li>noauto</li></ul></td>
    <td>The canmount property.</td>
</tr>
        <tr>
<td>casesensitivity</td>
<td>no</td>
<td></td>
    <td><ul><li>sensitive</li><li>insensitive</li><li>mixed</li></ul></td>
    <td>The casesensitivity property.</td>
</tr>
        <tr>
<td>checksum</td>
<td>no</td>
<td></td>
    <td><ul><li>on</li><li>off</li><li>fletcher2</li><li>fletcher4</li><li>sha256</li></ul></td>
    <td>The checksum property.</td>
</tr>
        <tr>
<td>compression</td>
<td>no</td>
<td></td>
    <td><ul><li>on</li><li>off</li><li>lzjb</li><li>gzip</li><li>gzip-1</li><li>gzip-2</li><li>gzip-3</li><li>gzip-4</li><li>gzip-5</li><li>gzip-6</li><li>gzip-7</li><li>gzip-8</li><li>gzip-9</li><li>lz4</li></ul></td>
    <td>The compression property.</td>
</tr>
        <tr>
<td>copies</td>
<td>no</td>
<td></td>
    <td><ul><li>1</li><li>2</li><li>3</li></ul></td>
    <td>The copies property.</td>
</tr>
        <tr>
<td>dedup</td>
<td>no</td>
<td></td>
    <td><ul><li>on</li><li>off</li></ul></td>
    <td>The dedup property.</td>
</tr>
        <tr>
<td>devices</td>
<td>no</td>
<td></td>
    <td><ul><li>on</li><li>off</li></ul></td>
    <td>The devices property.</td>
</tr>
        <tr>
<td>exec</td>
<td>no</td>
<td></td>
    <td><ul><li>on</li><li>off</li></ul></td>
    <td>The exec property.</td>
</tr>
        <tr>
<td>jailed</td>
<td>no</td>
<td></td>
    <td><ul><li>on</li><li>off</li></ul></td>
    <td>The jailed property.</td>
</tr>
        <tr>
<td>logbias</td>
<td>no</td>
<td></td>
    <td><ul><li>latency</li><li>throughput</li></ul></td>
    <td>The logbias property.</td>
</tr>
        <tr>
<td>mountpoint</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>The mountpoint property.</td>
</tr>
        <tr>
<td>name</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>File system, snapshot or volume name e.g. <code>rpool/myfs</code></td>
</tr>
        <tr>
<td>nbmand</td>
<td>no</td>
<td></td>
    <td><ul><li>on</li><li>off</li></ul></td>
    <td>The nbmand property.</td>
</tr>
        <tr>
<td>normalization</td>
<td>no</td>
<td></td>
    <td><ul><li>none</li><li>formC</li><li>formD</li><li>formKC</li><li>formKD</li></ul></td>
    <td>The normalization property.</td>
</tr>
        <tr>
<td>primarycache</td>
<td>no</td>
<td></td>
    <td><ul><li>all</li><li>none</li><li>metadata</li></ul></td>
    <td>The primarycache property.</td>
</tr>
        <tr>
<td>quota</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>The quota property.</td>
</tr>
        <tr>
<td>readonly</td>
<td>no</td>
<td></td>
    <td><ul><li>on</li><li>off</li></ul></td>
    <td>The readonly property.</td>
</tr>
        <tr>
<td>recordsize</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>The recordsize property.</td>
</tr>
        <tr>
<td>refquota</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>The refquota property.</td>
</tr>
        <tr>
<td>refreservation</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>The refreservation property.</td>
</tr>
        <tr>
<td>reservation</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>The reservation property.</td>
</tr>
        <tr>
<td>secondarycache</td>
<td>no</td>
<td></td>
    <td><ul><li>all</li><li>none</li><li>metadata</li></ul></td>
    <td>The secondarycache property.</td>
</tr>
        <tr>
<td>setuid</td>
<td>no</td>
<td></td>
    <td><ul><li>on</li><li>off</li></ul></td>
    <td>The setuid property.</td>
</tr>
        <tr>
<td>shareiscsi</td>
<td>no</td>
<td></td>
    <td><ul><li>on</li><li>off</li></ul></td>
    <td>The shareiscsi property.</td>
</tr>
        <tr>
<td>sharenfs</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>The sharenfs property.</td>
</tr>
        <tr>
<td>sharesmb</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>The sharesmb property.</td>
</tr>
        <tr>
<td>snapdir</td>
<td>no</td>
<td></td>
    <td><ul><li>hidden</li><li>visible</li></ul></td>
    <td>The snapdir property.</td>
</tr>
        <tr>
<td>state</td>
<td>yes</td>
<td></td>
    <td><ul><li>present</li><li>absent</li></ul></td>
    <td>Whether to create (<code>present</code>), or remove (<code>absent</code>) a file system, snapshot or volume.</td>
</tr>
        <tr>
<td>sync</td>
<td>no</td>
<td></td>
    <td><ul><li>on</li><li>off</li></ul></td>
    <td>The sync property.</td>
</tr>
        <tr>
<td>utf8only</td>
<td>no</td>
<td></td>
    <td><ul><li>on</li><li>off</li></ul></td>
    <td>The utf8only property.</td>
</tr>
        <tr>
<td>volblocksize</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>The volblocksize property.</td>
</tr>
        <tr>
<td>volsize</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>The volsize property.</td>
</tr>
        <tr>
<td>vscan</td>
<td>no</td>
<td></td>
    <td><ul><li>on</li><li>off</li></ul></td>
    <td>The vscan property.</td>
</tr>
        <tr>
<td>xattr</td>
<td>no</td>
<td></td>
    <td><ul><li>on</li><li>off</li></ul></td>
    <td>The xattr property.</td>
</tr>
        <tr>
<td>zoned</td>
<td>no</td>
<td></td>
    <td><ul><li>on</li><li>off</li></ul></td>
    <td>The zoned property.</td>
</tr>
    </tbody></table><br><pre># Create a new file system called myfs in pool rpool
- zfs: name=rpool/myfs state=present

# Create a new volume called myvol in pool rpool.
- zfs: name=rpool/myvol state=present volsize=10M

# Create a snapshot of rpool/myfs file system.
- zfs: name=rpool/myfs@mysnapshot state=present

# Create a new file system called myfs2 with snapdir enabled
- zfs: name=rpool/myfs2 state=present snapdir=enabled
</pre></div>
</div>
<div class="section" id="utilities">
<h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id289">Utilities</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#utilities" title="Permalink to this headline">¶</a></h2>
<div class="section" id="accelerate">
<span id="id132"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id290">accelerate</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#accelerate" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.3.</span></p>
</div>
<p>This modules launches an ephemeral <em>accelerate</em> daemon on the remote node which Ansible can use to communicate with nodes at high speed.
The daemon listens on a configurable port for a configurable amount of time.
Fireball mode is AES encrypted</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>minutes</td>
<td>no</td>
<td>30</td>
    <td><ul></ul></td>
    <td>The <em>accelerate</em> listener daemon is started on nodes and will stay around for this number of minutes before turning itself off.</td>
</tr>
        <tr>
<td>port</td>
<td>no</td>
<td>5099</td>
    <td><ul></ul></td>
    <td>TCP port for the socket connection</td>
</tr>
        <tr>
<td>timeout</td>
<td>no</td>
<td>300</td>
    <td><ul></ul></td>
    <td>The number of seconds the socket will wait for data. If none is received when the timeout value is reached, the connection will be closed.</td>
</tr>
    </tbody></table><p>
<b>Requirements:</b>
    python-keyczar
    </p><br><pre># To use accelerate mode, simply add "accelerate: true" to your play. The initial
# key exchange and starting up of the daemon will occur over SSH, but all commands and
# subsequent actions will be conducted over the raw socket connection using AES encryption

- hosts: devservers
  accelerate: true
  tasks:
      - command: /usr/bin/anything
</pre><h4>Notes</h4>
    <p>See the advanced playbooks chapter for more about using accelerated mode.</p></div>
<div class="section" id="debug">
<span id="id133"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id291">debug</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#debug" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.8.</span></p>
</div>
<p>This module prints statements during execution and can be useful for debugging variables or expressions without necessarily halting the playbook. Useful for debugging together with the ‘when:’ directive.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>msg</td>
<td>no</td>
<td>Hello world!</td>
    <td><ul></ul></td>
    <td>The customized message that is printed. If omitted, prints a generic message.</td>
</tr>
    </tbody></table><br><pre># Example that prints the loopback address and gateway for each host
- debug: msg="System {{ inventory_hostname }} has uuid {{ ansible_product_uuid }}"

- debug: msg="System {{ inventory_hostname }} has gateway {{ ansible_default_ipv4.gateway }}"
  when: ansible_default_ipv4.gateway is defined
</pre></div>
<div class="section" id="fail">
<span id="id134"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id292">fail</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#fail" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.8.</span></p>
</div>
<p>This module fails the progress with a custom message. It can be useful for bailing out when a certain condition is met using <tt class="docutils literal"><span class="pre">when</span></tt>.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>msg</td>
<td>no</td>
<td>'Failed as requested from task'</td>
    <td><ul></ul></td>
    <td>The customized message used for failing execution. If omitted, fail will simple bail out with a generic message.</td>
</tr>
    </tbody></table><br><pre># Example playbook using fail and when together
- fail: msg="The system may not be provisioned according to the CMDB status."
  when: "{{ cmdb_status }} != 'to-be-staged'"
</pre></div>
<div class="section" id="fireball">
<span id="id135"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id293">fireball</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#fireball" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.9.</span></p>
</div>
<p>This modules launches an ephemeral <em>fireball</em> ZeroMQ message bus daemon on the remote node which Ansible can use to communicate with nodes at high speed.
The daemon listens on a configurable port for a configurable amount of time.
Starting a new fireball as a given user terminates any existing user fireballs.
Fireball mode is AES encrypted</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>minutes</td>
<td>no</td>
<td>30</td>
    <td><ul></ul></td>
    <td>The <em>fireball</em> listener daemon is started on nodes and will stay around for this number of minutes before turning itself off.</td>
</tr>
        <tr>
<td>port</td>
<td>no</td>
<td>5099</td>
    <td><ul></ul></td>
    <td>TCP port for ZeroMQ</td>
</tr>
    </tbody></table><p>
<b>Requirements:</b>
    zmq
    keyczar
    </p><br><pre># This example playbook has two plays: the first launches 'fireball' mode on all hosts via SSH, and
# the second actually starts using it for subsequent management over the fireball connection

- hosts: devservers
  gather_facts: false
  connection: ssh
  sudo: yes
  tasks:
      - action: fireball

- hosts: devservers
  connection: fireball
  tasks:
      - command: /usr/bin/anything
</pre><h4>Notes</h4>
    <p>See the advanced playbooks chapter for more about using fireball mode.</p></div>
<div class="section" id="pause">
<span id="id136"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id294">pause</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#pause" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.8.</span></p>
</div>
<p>Pauses playbook execution for a set amount of time, or until a prompt is acknowledged. All parameters are optional. The default behavior is to pause with a prompt.
You can use <tt class="docutils literal"><span class="pre">ctrl+c</span></tt> if you wish to advance a pause earlier than it is set to expire or if you need to abort a playbook run entirely. To continue early: press <tt class="docutils literal"><span class="pre">ctrl+c</span></tt> and then <tt class="docutils literal"><span class="pre">c</span></tt>. To abort a playbook: press <tt class="docutils literal"><span class="pre">ctrl+c</span></tt> and then <tt class="docutils literal"><span class="pre">a</span></tt>.
The pause module integrates into async/parallelized playbooks without any special considerations (see also: Rolling Updates). When using pauses with the <tt class="docutils literal"><span class="pre">serial</span></tt> playbook parameter (as in rolling updates) you are only prompted once for the current group of hosts.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>minutes</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Number of minutes to pause for.</td>
</tr>
        <tr>
<td>prompt</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Optional text to use for the prompt message.</td>
</tr>
        <tr>
<td>seconds</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Number of seconds to pause for.</td>
</tr>
    </tbody></table><br><pre># Pause for 5 minutes to build app cache.
- pause: minutes=5

# Pause until you can verify updates to an application were successful.
- pause:

# A helpful reminder of what to look out for post-update.
- pause: prompt="Make sure org.foo.FooOverload exception is not present"
</pre></div>
<div class="section" id="set-fact">
<span id="id137"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id295">set_fact</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#set-fact" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.2.</span></p>
</div>
<p>This module allows setting new variables.  Variables are set on a host-by-host basis just like facts discovered by the setup module.
These variables will survive between plays.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>key_value</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>The <code>set_fact</code> module takes key=value pairs as variables to set in the playbook scope. Or alternatively, accepts complex arguments using the <code>args:</code> statement.</td>
</tr>
    </tbody></table><br><pre># Example setting host facts using key=value pairs
- set_fact: one_fact="something" other_fact="{{ local_var * 2 }}"

# Example setting host facts using complex arguments
- set_fact:
     one_fact: something
     other_fact: "{{ local_var * 2 }}"
</pre></div>
<div class="section" id="wait-for">
<span id="id138"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id296">wait_for</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#wait-for" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.7.</span></p>
</div>
<p>This is useful for when services are not immediately available after their init scripts return - which is true of certain Java application servers. It is also useful when starting guests with the <tt class="docutils literal"><span class="pre">virt</span></tt> module and needing to pause until they are ready.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>delay</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>number of seconds to wait before starting to poll</td>
</tr>
        <tr>
<td>host</td>
<td>no</td>
<td>127.0.0.1</td>
    <td><ul></ul></td>
    <td>hostname or IP address to wait for</td>
</tr>
        <tr>
<td>port</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>port number to poll</td>
</tr>
        <tr>
<td>state</td>
<td>no</td>
<td>started</td>
    <td><ul><li>started</li><li>stopped</li></ul></td>
    <td>either <code>started</code>, or <code>stopped</code> depending on whether the module should poll for the port being open or closed.</td>
</tr>
        <tr>
<td>timeout</td>
<td>no</td>
<td>300</td>
    <td><ul></ul></td>
    <td>maximum number of seconds to wait for</td>
</tr>
    </tbody></table><br><pre># wait 300 seconds for port 8000 to become open on the host, don't start checking for 10 seconds
- wait_for: port=8000 delay=10"
</pre></div>
</div>
<div class="section" id="web-infrastructure">
<h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id297">Web Infrastructure</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#web-infrastructure" title="Permalink to this headline">¶</a></h2>
<div class="section" id="django-manage">
<span id="id139"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id298">django_manage</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#django-manage" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 1.1.</span></p>
</div>
<p>Manages a Django application using the <em>manage.py</em> application frontend to <em>django-admin</em>. With the <em>virtualenv</em> parameter, all management commands will be executed by the given <em>virtualenv</em> installation.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>app_path</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>The path to the root of the Django application where <b>manage.py</b> lives.</td>
</tr>
        <tr>
<td>apps</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>A list of space-delimited apps to target. Used by the 'test' command.</td>
</tr>
        <tr>
<td>cache_table</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>The name of the table used for database-backed caching. Used by the 'createcachetable' command.</td>
</tr>
        <tr>
<td>command</td>
<td>yes</td>
<td></td>
    <td><ul><li>cleanup</li><li>flush</li><li>loaddata</li><li>runfcgi</li><li>syncdb</li><li>test</li><li>validate</li><li>migrate</li><li>collectstatic</li></ul></td>
    <td>The name of the Django management command to run. Allowed commands are cleanup, createcachetable, flush, loaddata, syncdb, test, validate.</td>
</tr>
        <tr>
<td>database</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>The database to target. Used by the 'createcachetable', 'flush', 'loaddata', and 'syncdb' commands.</td>
</tr>
        <tr>
<td>failfast</td>
<td>no</td>
<td>no</td>
    <td><ul><li>yes</li><li>no</li></ul></td>
    <td>Fail the command immediately if a test fails. Used by the 'test' command.</td>
</tr>
        <tr>
<td>fixtures</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>A space-delimited list of fixture file names to load in the database. <b>Required</b> by the 'loaddata' command.</td>
</tr>
        <tr>
<td>link</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Will create links to the files instead of copying them, you can only use this parameter with 'collectstatic' command</td>
</tr>
        <tr>
<td>merge</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Will run out-of-order or missing migrations as they are not rollback migrations, you can only use this parameter with 'migrate' command</td>
</tr>
        <tr>
<td>pythonpath</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>A directory to add to the Python path. Typically used to include the settings module if it is located external to the application directory.</td>
</tr>
        <tr>
<td>settings</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>The Python path to the application's settings module, such as 'myapp.settings'.</td>
</tr>
        <tr>
<td>skip</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Will skip over out-of-order missing migrations, you can only use this parameter with <em>migrate</em></td>
</tr>
        <tr>
<td>virtualenv</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>An optional path to a <em>virtualenv</em> installation to use while running the manage application.</td>
</tr>
    </tbody></table><p>
<b>Requirements:</b>
    virtualenv
    django
    </p><br><pre># Run cleanup on the application installed in 'django_dir'.
- django_manage: command=cleanup app_path={{ django_dir }}

# Load the initial_data fixture into the application
- django_manage: command=loaddata app_path={{ django_dir }} fixtures={{ initial_data }}

#Run syncdb on the application
- django_manage: &gt;
      command=syncdb
      app_path={{ django_dir }}
      settings={{ settings_app_name }}
      pythonpath={{ settings_dir }}
      virtualenv={{ virtualenv_dir }}

#Run the SmokeTest test case from the main app. Useful for testing deploys.
- django_manage: command=test app_path=django_dir apps=main.SmokeTest
</pre><h4>Notes</h4>
    <p><em>virtualenv</em> (<a href="http://www.virtualenv.org/">http://www.virtualenv.org</a>) must be installed on the remote host if the virtualenv parameter is specified.</p>
    <p>This module will create a virtualenv if the virtualenv parameter is specified and a virtualenv does not already exist at the given location.</p>
    <p>This module assumes English error messages for the 'createcachetable' command to detect table existence, unfortunately.</p>
    <p>To be able to use the migrate command, you must have south installed and added as an app in your settings</p>
    <p>To be able to use the collectstatic command, you must have enabled staticfiles in your settings</p></div>
<div class="section" id="htpasswd">
<span id="id140"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id299">htpasswd</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#htpasswd" title="Permalink to this headline">¶</a></h3>
<p>Add and remove username/password entries in a password file using htpasswd.
This is used by web servers such as Apache and Nginx for basic authentication.</p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>create</td>
<td>no</td>
<td>yes</td>
    <td><ul><li>yes</li><li>no</li></ul></td>
    <td>Used with <code>state=present</code>. If specified, the file will be created if it does not already exist. If set to "no", will fail if the file does not exist</td>
</tr>
        <tr>
<td>crypt_scheme</td>
<td>no</td>
<td>apr_md5_crypt</td>
    <td><ul></ul></td>
    <td>Encryption scheme to be used. One of: "apr_md5_crypt", "des_crypt", "ldap_sha1" or "plaintext"</td>
</tr>
        <tr>
<td>name</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>User name to add or remove</td>
</tr>
        <tr>
<td>password</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Password associated with user.Must be specified if user does not exist yet</td>
</tr>
        <tr>
<td>path</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>Path to the file that contains the usernames and passwords</td>
</tr>
        <tr>
<td>state</td>
<td>no</td>
<td>present</td>
    <td><ul><li>present</li><li>absent</li></ul></td>
    <td>Whether the user entry should be present or not</td>
</tr>
    </tbody></table><br><pre># Add a user to a password file and ensure permissions are set
- htpasswd: path=/etc/nginx/passwdfile name=janedoe password=9s36?;fyNp owner=root group=www-data mode=0640
# Remove a user from a password file
- htpasswd: path=/etc/apache2/passwdfile name=foobar state=absent
</pre><h4>Notes</h4>
    <p>This module depends on the <em>passlib</em> Python library, which needs to be installed on all target systems.</p>
    <p>On Debian, Ubuntu, or Fedora: install <em>python-passlib</em>.</p>
    <p>On RHEL or CentOS: Enable EPEL, then install <em>python-passlib</em>.</p></div>
<div class="section" id="supervisorctl">
<span id="id141"></span><h3><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id300">supervisorctl</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#supervisorctl" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.7.</span></p>
</div>
<p>Manage the state of a program or group of programs running via <em>Supervisord</em></p>
<table>
<tbody><tr>
<th class="head">parameter</th>
<th class="head">required</th>
<th class="head">default</th>
<th class="head">choices</th>
<th class="head">comments</th>
</tr>
        <tr>
<td>config</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>configuration file path, passed as -c to supervisorctl (added in Ansible 1.3)</td>
</tr>
        <tr>
<td>name</td>
<td>yes</td>
<td></td>
    <td><ul></ul></td>
    <td>The name of the <em>supervisord</em> program/process to manage</td>
</tr>
        <tr>
<td>password</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>password to use for authentication with server, passed as -p to supervisorctl (added in Ansible 1.3)</td>
</tr>
        <tr>
<td>server_url</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>URL on which supervisord server is listening, passed as -s to supervisorctl (added in Ansible 1.3)</td>
</tr>
        <tr>
<td>state</td>
<td>yes</td>
<td></td>
    <td><ul><li>present</li><li>started</li><li>stopped</li><li>restarted</li></ul></td>
    <td>The state of service</td>
</tr>
        <tr>
<td>supervisorctl_path</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>Path to supervisorctl executable to use (added in Ansible 1.4)</td>
</tr>
        <tr>
<td>username</td>
<td>no</td>
<td></td>
    <td><ul></ul></td>
    <td>username to use for authentication with server, passed as -u to supervisorctl (added in Ansible 1.3)</td>
</tr>
    </tbody></table><br><pre># Manage the state of program to be in 'started' state.
- supervisorctl: name=my_app state=started

# Restart my_app, reading supervisorctl configuration from a specified file.
- supervisorctl: name=my_app state=restarted config=/var/opt/my_project/supervisord.conf

# Restart my_app, connecting to supervisord with credentials and server URL.
- supervisorctl: name=my_app state=restarted username=test password=testpass server_url=http://localhost:9001

</pre></div>
</div>
<div class="section" id="reading-module-documentation-locally">
<span id="ansible-doc"></span><h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id301">Reading Module Documentation Locally</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#reading-module-documentation-locally" title="Permalink to this headline">¶</a></h2>
<p>ansible-doc is a friendly command line tool that allows you to access module documentation locally.
It comes with Ansible.</p>
<p>To list documentation for a particular module:</p>
<div class="highlight-python"><pre>ansible-doc yum | less</pre>
</div>
<p>To list all modules available:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ansible</span><span class="o">-</span><span class="n">doc</span> <span class="o">--</span><span class="nb">list</span> <span class="o">|</span> <span class="n">less</span>
</pre></div>
</div>
<p>To access modules outside of the stock module path (such as custom modules that live in your playbook directory),
use the ‘–module-path’ option to specify the directory where the module lives.</p>
</div>
<div class="section" id="writing-your-own-modules">
<span id="writing-modules"></span><h2><a class="toc-backref" href="http://www.ansibleworks.com/docs/modules.html#id302">Writing your own modules</a><a class="headerlink" href="http://www.ansibleworks.com/docs/modules.html#writing-your-own-modules" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="http://www.ansibleworks.com/docs/developing_modules.html"><em>Developing Modules</em></a>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="http://www.ansibleworks.com/docs/intro_adhoc.html"><em>Introduction To Ad-Hoc Commands</em></a></dt>
<dd>Examples of using modules in /usr/bin/ansible</dd>
<dt><a class="reference internal" href="http://www.ansibleworks.com/docs/playbooks.html"><em>Intro to Playbooks</em></a></dt>
<dd>Examples of using modules with /usr/bin/ansible-playbook</dd>
<dt><a class="reference internal" href="http://www.ansibleworks.com/docs/developing_modules.html"><em>Developing Modules</em></a></dt>
<dd>How to write your own modules</dd>
<dt><a class="reference internal" href="http://www.ansibleworks.com/docs/developing_api.html"><em>Python API</em></a></dt>
<dd>Examples of using modules with the Python API</dd>
<dt><a class="reference external" href="http://groups.google.com/group/ansible-project">Mailing List</a></dt>
<dd>Questions? Help? Ideas?  Stop by the list on Google Groups</dd>
<dt><a class="reference external" href="http://irc.freenode.net/">irc.freenode.net</a></dt>
<dd>#ansible IRC chat channel</dd>
</dl>
</div>
</div>
</div>


    </div><!-- END ARTICLE CONTENT AREA -->
</div> <!-- class=row -->
</div> <!-- class=container -->

    <!-- End Template Content -->
</div>
<div id="push"></div>

      <div id="footer">
<div class="footerwide">
<div class="container footer">
<div class="footermenu  ">
          <div id="text-3" class="widget widget_text"><h4>Contact Us</h4>			<div class="textwidget"><address class="address">
<p>1482 East Valley Road, Suite 888<br> Santa Barbara, California, 93108</p><br>
<p>Phone: +1 800-825-0212</p>
<p><a href="mailto:info@ansibleworks.com">info@ansibleworks.com<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script></a></p>
</address>
</div>
		</div><div id="nav_menu-2" class="widget widget_nav_menu"><h4>Quick Links</h4><div class="menu-footer-container"><ul id="menu-footer" class="menu"><li id="menu-item-320" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-320"><a href="http://www.ansibleworks.com/">Home</a></li>
<li id="menu-item-1232" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1232"><a href="http://www.ansibleworks.com/why-ansible/">Why Ansible</a></li>
<li id="menu-item-2090" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2090"><a href="http://www.ansibleworks.com/pricing/">Pricing</a></li>
<li id="menu-item-322" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-322"><a href="http://www.ansibleworks.com/docs/">Documentation</a></li>
<li id="menu-item-456" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-456"><a href="http://www.ansibleworks.com/whitepapers/">White Papers</a></li>
<li id="menu-item-321" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-321"><a href="http://www.ansibleworks.com/contact-us/">Contact Us</a></li>
</ul></div></div><div id="nav_menu-3" class="widget widget_nav_menu"><h4>Solutions</h4><div class="menu-solutions-container"><ul id="menu-solutions" class="menu"><li id="menu-item-353" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-353"><a href="http://www.ansibleworks.com/configuration-management/">Configuration Management</a></li>
<li id="menu-item-493" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-493"><a href="http://www.ansibleworks.com/application-deployment/">Application Deployment</a></li>
<li id="menu-item-351" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-351"><a href="http://www.ansibleworks.com/continuous-delivery/">Continuous Delivery</a></li>
</ul></div></div><div id="cnss_widget-3" class="widget widget_cnss_widget"><table class="cnss-social-icon" style="width:84px" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td style="width:28px"><a target="_blank" title="GitHub" href="http://github.com/ansible/ansible"><img src="./modules_files/1370104966_github_flurry_ios_style_icon_by_flakshack-d5ariic.png" border="0" width="24" height="24" alt="GitHub"></a></td><td style="width:28px"><a target="_blank" title="Twitter" href="https://twitter.com/AnsibleWorks"><img src="./modules_files/1370365460_twitter_icon.png" border="0" width="24" height="24" alt="Twitter"></a></td><td style="width:28px"><a target="_blank" title="LinkedIn" href="http://www.linkedin.com/groups/Ansiblecc-4648083"><img src="./modules_files/1370365179_LinkedIn_logo.png" border="0" width="24" height="24" alt="LinkedIn"></a></td></tr></tbody></table></div></div>



      <p class="pull-right"><a href="http://www.ansibleworks.com/docs/modules.html#">Back to top</a></p>
        <p>© AnsibleWorks 2013</p>

    </div> <!-- /container -->
       </div>


       
<script type="text/javascript" src="./modules_files/bootstrap.min.js"></script>
<script type="text/javascript" src="./modules_files/prettify.js"></script>
<script type="text/javascript" src="./modules_files/bootstrapwp.demo.js"></script>
<script type="text/javascript" src="./modules_files/parsley.js"></script>
<script type="text/javascript" src="./modules_files/jquery.noty.js"></script>
<script type="text/javascript" src="./modules_files/bottom.js"></script>
<script type="text/javascript" src="./modules_files/default.js"></script>

						


</div>
  <script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l=document.getElementsByTagName("a"),t=document.createElement("textarea");for(i=0;l.length-i;i++){try{a=l[i].getAttribute("href");if(a&&"www.cloudflare.com/email-protection"==a.substr(7 ,35)){s='';j=43;r=parseInt(a.substr(j,2),16);for(j+=2;a.length-j&&a.substr(j,1)!='X';j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}j+=1;s+=a.substr(j,a.length-j);t.innerHTML=s.replace(/</g,"&lt;").replace(/>/g,"&gt;");l[i].setAttribute("href","mailto:"+t.value);}}catch(e){}}}catch(e){}})();
/* ]]> */
</script>


<table cellspacing="0" cellpadding="0" class="gstl_50 gssb_c" style="width: 252px; display: none; top: 187px; position: absolute; left: 880px;"><tbody><tr><td class="gssb_f"></td><td class="gssb_e" style="width: 100%;"></td></tr></tbody></table></body></html>